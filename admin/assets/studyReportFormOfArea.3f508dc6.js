import{_ as R,u as Q,b as p,v as T,o as r,c as u,h as e,t as a,x as L,y as O,r as F,C as m,D as v,P as N,a as w,w as j,B as V,Y as X,Z as ee,F as A,f as E,W as q,i as te,d as ae,k as se,j as B,n as oe}from"./index.1ab44cd6.js";import{a as ce,b as G}from"./datacenter.6a0226d9.js";import{u as S}from"./school.b6a7d819.js";import{_ as K,a as U,b as W,c as z}from"./six_border.bc95b85f.js";import{_ as Z,a as le,b as ne,c as de}from"./medal3.fce23df7.js";import{u as ie}from"./teacher.fc81dec3.js";import{s as re,A as ue}from"./study.2c5dac22.js";import{h as $}from"./moment.9709ab41.js";import{g as _e}from"./ak.02252990.js";const H=t=>(L("data-v-c6e2741f"),t=t(),O(),t),me={class:"all-complete-box flex"},ve={class:"left-box"},he={class:"num"},pe=H(()=>e("span",{class:"per-char"},"%",-1)),ye=H(()=>e("span",{class:"per-char"},"\u5168\u6821\u7D2F\u8BA1\u5B8C\u6210\u6CE8\u518C\u7387",-1)),fe={__name:"PerAllComplete",setup(t){const o=Q(),s=()=>{o.push({path:"/CompletionRate"})},l=p(0),n=async()=>{const d={school_id:S().schoolInfo.id},i=await ce(d);if(i){const I=i.parent_count||0,c=i.student_should_count||0;c?l.value=Math.ceil(I/c*100):l.value=100}};return T(()=>{n()}),(d,i)=>(r(),u("div",me,[e("div",ve,[e("span",he,a(l.value),1),pe,ye]),e("div",{class:"look-char",onClick:s},"\u67E5\u770B\u8BE6\u60C5")]))}},ge=R(fe,[["__scopeId","data-v-c6e2741f"]]);const Y=t=>(L("data-v-ba2afd6c"),t=t(),O(),t),$e={class:"grade-class-rank-container"},we={class:"rank-left"},Ie={class:"rank-img",src:K,alt:""},ke={class:"rank-img",src:U,alt:""},Ce={class:"rank-img",src:W,alt:""},De={class:"rank-cic"},Ye=Y(()=>e("img",{class:"six-img",src:z,alt:""},null,-1)),be={class:"rank-num"},xe=Y(()=>e("div",{class:"ranked-tag"},"\u8F83\u4E0A\u6708\u4E0A\u53471\u540D",-1)),Se={class:"right-data-wrap"},Ae={class:"progress-complete"},Ee={class:"progress-box"},Me={class:"flex"},Be={class:"gc-char"},Re=Y(()=>e("span",{class:"cp-char"},"\u672C\u6708\u5B66\u4E60\u5B8C\u6210\u7387",-1)),Fe={class:"progress"},Ve={class:"fire-icon",src:Z,alt:"fire"},Le={class:"per-char"},Oe={class:"data-box flex"},Ne={class:"data-detail-wrap"},Pe=Y(()=>e("span",{class:"data-char"},"\u6570\u636E\u6982\u89C8",-1)),Te={class:"data-item"},je={class:"num-char"},qe=Y(()=>e("div",{class:"char"},"\u5B66\u4E60\u4EBA\u6B21",-1)),Ge={class:"data-item"},Ke={class:"num-char"},Ue=Y(()=>e("div",{class:"char"},"\u5E74\u7EA7\u4EBA\u6570",-1)),We=q('<div class="data-item" data-v-ba2afd6c><div class="num-char" data-v-ba2afd6c>0</div><div class="char" data-v-ba2afd6c>\u4E0A\u5468\u6392\u540D</div></div><div class="data-item" data-v-ba2afd6c><div class="num-char" data-v-ba2afd6c>0</div><div class="char" data-v-ba2afd6c>\u4E0A\u6708\u6392\u540D</div></div>',2),ze={class:"data-item"},Ze={class:"num-char"},He=Y(()=>e("div",{class:"char"},"\u6BCF\u65E5\u4E00\u5B66",-1)),Je={class:"data-item"},Qe={class:"num-char"},Xe=Y(()=>e("div",{class:"char"},"\u6BCF\u5468\u4E00\u505A",-1)),et={class:"data-item"},tt={class:"num-char"},at=Y(()=>e("div",{class:"char nomar"},"\u6BCF\u6708\u4E00\u8BFE",-1)),st={class:"detail-char"},ot={class:"class-item-wrap"},ct={class:"flex"},lt={class:"class-sec"},nt={class:"class-char"},dt={class:"per-char"},it={class:"teacher-sec flex"},rt={class:"teacher-char"},ut=Y(()=>e("span",{class:"teacher-char"},"\u5B66\u4E60\u5B8C\u6210\u7387",-1)),_t={class:"progress-wrap"},mt={class:"count-sec flex"},vt={class:"flex"},ht={class:"count-tag"},pt={class:"count-tag"},yt={class:"medal-img",src:le,alt:""},ft={class:"medal-img",src:ne,alt:""},gt={class:"medal-img",src:de,alt:""},$t={class:"no-char"},wt=te("NO: "),It={class:"no-num"},kt={__name:"GradeClassRank",props:{completeItem:{type:Object},completeIndex:{type:Number,default:0},startDate:{type:String,default:""},endDate:{type:String,default:""},studyType:{type:String,default:""}},setup(t){const o=t,s=p([]),l=async h=>{const k={school_id:S().schoolInfo.id,limit:30,page:1,rank_mode:"class",start_date:o.startDate,end_date:o.endDate,study_type:o.studyType,year:h},x=await G(k);s.value=x},n=p(!1),d=h=>{n.value=!n.value,n.value&&l(h)},i=(h,k)=>{const x=ie().teacherList;for(const _ of x)if(_.year==h&&_.class_id==k)return _.name},I=h=>{const k=S().gradeList,_=new Date().getFullYear()-Number(h)+1;let y={};for(const M of k)M.id===_&&(y=M);return y},c=h=>Math.ceil(Number(h)*100);return(h,k)=>{const x=F("el-icon");return r(),u("div",$e,[e("div",we,[m(e("img",Ie,null,512),[[v,t.completeIndex==0]]),m(e("img",ke,null,512),[[v,t.completeIndex==1]]),m(e("img",Ce,null,512),[[v,t.completeIndex==2]]),m(e("div",De,[Ye,e("span",be,a(t.completeIndex+1),1)],512),[[v,t.completeIndex>2]]),xe]),e("div",Se,[e("div",Ae,[e("div",Ee,[e("div",Me,[e("span",Be,a(I(t.completeItem.year).name),1),Re]),e("div",Fe,[e("div",{class:"progress-active",style:N(`width: ${c(t.completeItem.parent_student_ratio)>=100?100:c(t.completeItem.parent_student_ratio)}%`)},null,4),m(e("img",Ve,null,512),[[v,c(t.completeItem.parent_student_ratio)>=100]])])]),e("span",Le,a(c(t.completeItem.parent_student_ratio))+"%",1)]),e("div",Oe,[e("div",Ne,[Pe,e("div",Te,[e("div",je,a(t.completeItem.complete_parent),1),qe]),e("div",Ge,[e("div",Ke,a(t.completeItem.student_num),1),Ue]),We,e("div",ze,[e("div",Ze,a(c(t.completeItem.daily_parent_ratio))+"% ",1),He]),e("div",Je,[e("div",Qe,a(c(t.completeItem.weekly_parent_ratio))+"% ",1),Xe]),e("div",et,[e("div",tt,a(c(t.completeItem.monthy_parent_ratio))+"% ",1),at])]),e("div",{class:"sw-btn",onClick:k[0]||(k[0]=_=>d(t.completeItem.year))},[e("span",st,a(n.value?"\u6536\u8D77":"\u67E5\u770B")+"\u5E74\u7EA7\u5404\u73ED\u8BE6\u60C5",1),w(x,null,{default:j(()=>[m(w(V(X),{class:"arr-icon"},null,512),[[v,n.value]]),m(w(V(ee),{class:"arr-icon"},null,512),[[v,!n.value]])]),_:1})])]),m(e("div",ot,[(r(!0),u(A,null,E(s.value,(_,y)=>(r(),u("div",{class:"class-item",key:y},[e("div",ct,[e("div",lt,[e("span",nt,a(_.class_id)+"\u73ED",1)]),e("span",dt,a(c(_.parent_student_ratio))+"%",1)]),e("div",it,[e("span",rt,"\u73ED\u4E3B\u4EFB\uFF1A"+a(i(_.year,_.class_id)),1),ut]),e("div",_t,[e("div",{class:"progress-item",style:N(`width: ${c(_.parent_student_ratio)}%`)},null,4)]),e("div",mt,[e("div",vt,[e("div",ht,"\u5B66\u4E60\u4EBA\u6B21\uFF1A"+a(_.complete_parent),1),e("div",pt,"\u73ED\u7EA7\u4EBA\u6570\uFF1A"+a(_.student_num),1)]),m(e("img",yt,null,512),[[v,y==0]]),m(e("img",ft,null,512),[[v,y==1]]),m(e("img",gt,null,512),[[v,y==2]]),m(e("span",$t,[wt,e("span",It,a(y+1),1)],512),[[v,y>2]])])]))),128))],512),[[v,n.value]])])])}}},Ct=R(kt,[["__scopeId","data-v-ba2afd6c"]]);function Dt(){const t=p({}),o=p({}),s=async()=>{const d={school_id:S().getSchoolInfo.id,type:"term"},i=await re(d);t.value=i},l=async()=>{const d={school_id:S().getSchoolInfo.id},i=await ue(d);o.value=i};return s(),l(),{studyDashboardCompleteCountRef:t,studyDashboardCompleteDailyRef:o}}const Yt=ae({name:"CompletedAmountOverview",props:{dataSource:{type:Object,default:()=>({})},dataSourceAvg:{type:Object,default:()=>({})}},setup(t){const o=p({total:{title:"\u603B\u8BBF\u95EE\u91CF",icon:"overview_total_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u8BBF\u95EE\u91CF",num:0}},daily:{title:"\u6BCF\u65E5\u4E00\u5B66\u603B\u5B66\u4E60\u91CF",icon:"overview_daily_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u5B66\u4E60\u91CF",num:0}},weekly:{title:"\u6BCF\u5468\u4E00\u505A\u603B\u5B8C\u6210\u91CF",icon:"overview_weekly_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u5B8C\u6210\u91CF",num:0}},monthy:{title:"\u6BCF\u6708\u4E00\u8BFE\u603B\u5B66\u4E60\u91CF",icon:"overview_monthly_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u5B66\u4E60\u91CF",num:0}}}),s=p(t.dataSource),l=p(t.dataSourceAvg);return se(()=>{s.value=t.dataSource,l.value=t.dataSourceAvg,Object.keys(s.value).length>0&&(o.value.total.num=s.value.total_all,o.value.total.tag.num=s.value.all_today,o.value.total.averageDaily.num=Math.ceil(l.value.all_num/l.value.day_num),o.value.daily.num=s.value.total_daily,o.value.daily.tag.num=s.value.daily,o.value.daily.averageDaily.num=Math.ceil(l.value.daily/l.value.day_num),o.value.weekly.num=s.value.total_weekly,o.value.weekly.tag.num=s.value.weekly_today,o.value.weekly.averageDaily.num=Math.ceil(l.value.weekly/l.value.day_num),o.value.monthy.num=s.value.total_monthy,o.value.monthy.tag.num=s.value.monthy_today,o.value.monthy.averageDaily.num=Math.ceil(l.value.monthy/l.value.day_num))}),{overviewListRef:o,getImageUrl:_e}}});const bt={class:"completed-amount-overview-container"},xt={class:"completed-amount-overview-ul flex"},St={class:"flex"},At={class:"title-style"},Et={class:"flex-start align-end"},Mt={class:"total-num-style"},Bt={class:"tag-box flex-center"},Rt={class:"flex-start"},Ft={class:"average-daily-title-style"},Vt={class:"average-daily-num-style"};function Lt(t,o,s,l,n,d){const i=F("el-image"),I=F("el-card");return r(),u("div",bt,[e("ul",xt,[(r(!0),u(A,null,E(t.overviewListRef,(c,h)=>(r(),u("li",{key:h,class:"completed-amount-overview-li"},[w(I,{class:"el-card-style","body-style":{padding:"0px"}},{default:j(()=>[e("header",St,[e("p",At,a(c.title),1),w(i,{class:"header-icon-style",src:t.getImageUrl(c.icon+".png")},null,8,["src"])]),e("article",Et,[e("p",Mt,a(c.num),1),e("div",Bt,[e("p",null,a(c.tag.title),1),e("p",null,a(c.tag.num),1)])]),e("footer",Rt,[e("p",Ft,a(c.averageDaily.title),1),e("p",Vt,a(c.averageDaily.num),1)])]),_:2},1024)]))),128))])])}const Ot=R(Yt,[["render",Lt],["__scopeId","data-v-f9503421"]]);const b=t=>(L("data-v-88759243"),t=t(),O(),t),Nt={class:"grade-class-rank-container"},Pt={class:"rank-left"},Tt={class:"rank-img",src:K,alt:""},jt={class:"rank-img",src:U,alt:""},qt={class:"rank-img",src:W,alt:""},Gt={class:"rank-cic"},Kt=b(()=>e("img",{class:"six-img",src:z,alt:""},null,-1)),Ut={class:"rank-num"},Wt=b(()=>e("div",{class:"ranked-tag"},"\u8F83\u4E0A\u6708\u4E0A\u53471\u540D",-1)),zt={class:"right-data-wrap"},Zt={class:"progress-complete"},Ht={class:"progress-box"},Jt={class:"flex"},Qt={class:"gc-char"},Xt=b(()=>e("span",{class:"cp-char"},"\u672C\u6708\u5B66\u4E60\u5B8C\u6210\u7387",-1)),ea={class:"progress"},ta={class:"fire-icon",src:Z,alt:"fire"},aa={class:"per-char"},sa={class:"data-box flex"},oa={class:"data-detail-wrap"},ca=b(()=>e("span",{class:"data-char"},"\u6570\u636E\u6982\u89C8",-1)),la={class:"data-item"},na={class:"num-char"},da=b(()=>e("div",{class:"char"},"\u5B66\u4E60\u4EBA\u6B21",-1)),ia={class:"data-item"},ra={class:"num-char"},ua=b(()=>e("div",{class:"char"},"\u73ED\u7EA7\u4EBA\u6570",-1)),_a=q('<div class="data-item" data-v-88759243><div class="num-char" data-v-88759243>0</div><div class="char" data-v-88759243>\u4E0A\u5468\u6392\u540D</div></div><div class="data-item" data-v-88759243><div class="num-char" data-v-88759243>0</div><div class="char" data-v-88759243>\u4E0A\u6708\u6392\u540D</div></div>',2),ma={class:"data-item"},va={class:"num-char"},ha=b(()=>e("div",{class:"char"},"\u6BCF\u65E5\u4E00\u5B66",-1)),pa={class:"data-item"},ya={class:"num-char"},fa=b(()=>e("div",{class:"char"},"\u6BCF\u5468\u4E00\u505A",-1)),ga={class:"data-item"},$a={class:"num-char"},wa=b(()=>e("div",{class:"char nomar"},"\u6BCF\u6708\u4E00\u8BFE",-1)),Ia={__name:"ClassRankForComplete",props:{completeItem:{type:Object},completeIndex:{type:Number,default:0}},setup(t){const o=l=>{const n=S().gradeList,i=new Date().getFullYear()-Number(l)+1;let I={};for(const c of n)c.id===i&&(I=c);return I},s=l=>Math.ceil(Number(l)*100);return(l,n)=>(r(),u("div",Nt,[e("div",Pt,[m(e("img",Tt,null,512),[[v,t.completeIndex==0]]),m(e("img",jt,null,512),[[v,t.completeIndex==1]]),m(e("img",qt,null,512),[[v,t.completeIndex==2]]),m(e("div",Gt,[Kt,e("span",Ut,a(t.completeIndex+1),1)],512),[[v,t.completeIndex>2]]),Wt]),e("div",zt,[e("div",Zt,[e("div",Ht,[e("div",Jt,[e("span",Qt,a(o(t.completeItem.year).name)+"("+a(t.completeItem.class_id)+")\u73ED",1),Xt]),e("div",ea,[e("div",{class:"progress-active",style:N(`width: ${s(t.completeItem.parent_student_ratio)>=100?100:s(t.completeItem.parent_student_ratio)}%`)},null,4),m(e("img",ta,null,512),[[v,s(t.completeItem.parent_student_ratio)>=100]])])]),e("span",aa,a(s(t.completeItem.parent_student_ratio))+"%",1)]),e("div",sa,[e("div",oa,[ca,e("div",la,[e("div",na,a(t.completeItem.complete_parent),1),da]),e("div",ia,[e("div",ra,a(t.completeItem.student_num),1),ua]),_a,e("div",ma,[e("div",va,a(s(t.completeItem.daily_parent_ratio))+"% ",1),ha]),e("div",pa,[e("div",ya,a(s(t.completeItem.weekly_parent_ratio))+"% ",1),fa]),e("div",ga,[e("div",$a,a(s(t.completeItem.monthy_parent_ratio))+"% ",1),wa])])])])]))}},ka=R(Ia,[["__scopeId","data-v-88759243"]]);const J=t=>(L("data-v-5f1cb08a"),t=t(),O(),t),Ca={class:"study-report-container"},Da={class:"all-wrap"},Ya={class:"sort-wrap"},ba={class:"title-time"},xa=J(()=>e("span",{class:"study-tit"},"\u5B66\u4E60\u5B8C\u6210\u699C",-1)),Sa={class:"time-char"},Aa=J(()=>e("span",{class:"o-char"},"\u5206\u7C7B\uFF1A",-1)),Ea=["onClick"],Ma={key:0,class:"date-picker-wrap"},Ba={key:1,class:"date-picker-wrap"},Ra={key:0,class:"data-wrap"},Fa={key:0},Va={key:1},La={__name:"studyReportFormOfArea",setup(t){const{studyDashboardCompleteCountRef:o,studyDashboardCompleteDailyRef:s}=Dt(),l=[{sortKey:1,sortItem:[{id:"grade",name:"\u5E74\u6BB5\u6392\u540D"},{id:"class",name:"\u73ED\u7EA7\u6392\u540D"}]},{sortKey:2,sortItem:[{id:"daily",name:"\u6BCF\u65E5\u4E00\u5B66"},{id:"weekly",name:"\u6BCF\u5468\u4E00\u505A"},{id:"monthy",name:"\u6BCF\u6708\u4E00\u8BFE"}]},{sortKey:3,sortItem:[{id:2,name:"\u6708\u699C"},{id:1,name:"\u5468\u699C"}]}],n=p(["grade","daily",2]),d=p(""),i=p(""),I=(g,C)=>{n.value[g-1]=C,g==3&&C==1&&(d.value=$().isoWeek(1).format("YYYY-MM-DD"),i.value=$(d.value).add(7,"day").format("YYYY-MM-DD")),g==3&&C==2&&(d.value=$().format("YYYY-MM-01"),i.value=$(d.value).add(1,"month").format("YYYY-MM-DD")),y()},c=p(""),h=p(""),k=g=>{d.value=$(g).add(1,"day").format("YYYY-MM-DD"),i.value=$(g).add(7,"day").format("YYYY-MM-DD"),y(),console.log(d.value)},x=g=>{d.value=$(g).format("YYYY-MM-01"),i.value=$(d.value).add(1,"month").format("YYYY-MM-DD"),y()},_=p([]),y=async()=>{const g={school_id:S().schoolInfo.id,limit:30,page:1,rank_mode:n.value[0],start_date:d.value,end_date:i.value,study_type:n.value[1]},C=await G(g);_.value=C},M=p("");return T(()=>{M.value=$().format("YYYY\u5E74MM\u6708DD\u65E5"),d.value=$().format("YYYY-MM-01"),i.value=$(d.value).add(1,"month").format("YYYY-MM-DD"),y()}),(g,C)=>{const P=F("el-date-picker");return r(),u("div",Ca,[e("div",null,[w(Ot,{dataSource:V(o),dataSourceAvg:V(s)},null,8,["dataSource","dataSourceAvg"]),e("div",Da,[w(ge)]),e("div",Ya,[e("div",ba,[xa,e("span",Sa,"\u66F4\u65B0\u65F6\u95F4\uFF1A"+a(M.value),1)]),(r(),u(A,null,E(l,f=>e("div",{class:"sort-sec",key:f.sortKey},[Aa,(r(!0),u(A,null,E(f.sortItem,D=>(r(),u("div",{class:oe(["lab-item",n.value[f.sortKey-1]==D.id?"active":""]),onClick:Oa=>I(f.sortKey,D.id),key:D.id},a(D.name),11,Ea))),128))])),64)),n.value[2]==1?(r(),u("div",Ma,[w(P,{modelValue:c.value,"onUpdate:modelValue":C[0]||(C[0]=f=>c.value=f),onChange:k,type:"week",format:"YYYY \u7B2C ww \u5468",placeholder:"\u9009\u62E9\u5468"},null,8,["modelValue"])])):B("",!0),n.value[2]==2?(r(),u("div",Ba,[w(P,{modelValue:h.value,"onUpdate:modelValue":C[1]||(C[1]=f=>h.value=f),type:"month",placeholder:"\u9009\u62E9\u6708",onChange:x},null,8,["modelValue"])])):B("",!0)]),_.value&&_.value.length?(r(),u("div",Ra,[n.value[0]=="grade"?(r(),u("div",Fa,[(r(!0),u(A,null,E(_.value,(f,D)=>(r(),u("div",{class:"mar-wrap",key:D},[w(Ct,{completeItem:f,completeIndex:D,startDate:d.value,endDate:i.value,studyType:n.value[1]},null,8,["completeItem","completeIndex","startDate","endDate","studyType"])]))),128))])):B("",!0),n.value[0]=="class"?(r(),u("div",Va,[(r(!0),u(A,null,E(_.value,(f,D)=>(r(),u("div",{class:"mar-wrap",key:D},[w(ka,{completeItem:f,completeIndex:D},null,8,["completeItem","completeIndex"])]))),128))])):B("",!0)])):B("",!0)])])}}},za=R(La,[["__scopeId","data-v-5f1cb08a"]]);export{za as default};
