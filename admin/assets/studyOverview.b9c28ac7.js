import{u as i}from"./school.3ccd3a33.js";import{e as q}from"./study.06d667f0.js";import{h as z}from"./moment.9709ab41.js";import{E as A}from"./EveryDayDetail.7ca58f21.js";import{E as N}from"./EveryWeekDetail.57b8dda1.js";import{E as P}from"./EveryMonthDetail.502486f2.js";import{_ as W,b as o,v as T,r as E,o as l,c as d,h as a,F as y,f as p,t as n,a as c,w as V,n as M,x as j,y as H}from"./index.a5417fcb.js";import"./request.905e5acc.js";import"./week_theme_tag.f9014bdd.js";import"./quiz.2c5126d9.js";const Y=_=>(j("data-v-080ad306"),_=_(),H(),_),J={class:"study-overview-container"},K={class:"sort-wrap"},Q={class:"sort-sec"},X=Y(()=>a("span",{class:"o-char"},"\u5E74\u7EA7\uFF1A",-1)),Z=["onClick"],ee={class:"sort-sec"},te=Y(()=>a("span",{class:"o-char"},"\u5206\u7C7B\uFF1A",-1)),ae=["onClick"],oe={class:"learn-box"},se=["onClick"],le={class:"left-title"},de={class:"title-char"},ie={class:"yellow-tag"},ne={class:"time-char"},ce={class:"flex-start",style:{margin:"18px 0 0 18px"}},ue={class:"flex"},re={class:"record-char"},_e={class:"study-dialog-wrap"},ve={class:"study-dialog-wrap"},ye={class:"study-dialog-wrap"},pe={__name:"studyOverview",setup(_){const S=o([]),B=[{id:"daily",name:"\u6BCF\u65E5\u4E00\u5B66"},{id:"weekly",name:"\u6BCF\u5468\u4E00\u505A"},{id:"monthy",name:"\u6BCF\u6708\u4E00\u8BFE"}],h=o("daily"),F=e=>{h.value=e,v()},f=o(1),G=e=>{f.value=e,v()},m=o(0),x=o(1),O=e=>{x.value=e,v()},C=o([]),v=async()=>{const e={type:h.value,is_custom:!1,limit:10,page:x.value,area_id:0,school_id:i().schoolInfo.id,grade:f.value,title:"",start_date:"",end_date:"",tag_ids:""},s=await q(e);C.value=s.data,m.value=s.total};T(async()=>{const e=i().gradeList;(!e||!e.length)&&await i().getSchoolGradeList(),i().saveSchoolInfo(i().schoolInfo.id).then(()=>{console.log("schoolinfo_refresh")});const s=[];for(const u in e)e[u].id>=i().schoolInfo.grade_min&&e[u].id<=i().schoolInfo.grade_max&&s.push(e[u]);S.value=s,v()});const U=e=>z(e).utc().format("YYYY.MM.DD"),R=o(0),g=o(!1),D=o(0),k=o(!1),L=o(0),w=o(!1),b=o(0),$=e=>{e.study_type=="daily"&&(g.value=!0,R.value=e.id),e.study_type=="weekly"&&(k.value=!0,D.value=e.id),e.study_type=="monthy"&&(w.value=!0,L.value=e.id,b.value=e.study_id)};return(e,s)=>{const u=E("el-pagination"),I=E("el-dialog");return l(),d("div",J,[a("div",K,[a("div",Q,[X,(l(!0),d(y,null,p(S.value,t=>(l(),d("div",{class:M(["lab-item",f.value==t.id?"active":""]),onClick:r=>G(t.id),key:t.id},n(t.name),11,Z))),128))]),a("div",ee,[te,(l(),d(y,null,p(B,t=>a("div",{class:M(["lab-item",h.value==t.id?"active":""]),onClick:r=>F(t.id),key:t.id},n(t.name),11,ae)),64))])]),a("div",oe,[(l(!0),d(y,null,p(C.value,t=>(l(),d("div",{class:"learn-sec flex",key:t.id,onClick:r=>$(t)},[a("div",le,[a("span",de,"\u300A"+n(t.title)+"\u300B",1),(l(!0),d(y,null,p(t.special_tag,r=>(l(),d("div",{class:"blue-tag",key:r.id},n(r.name),1))),128)),a("div",ie,"\u6240\u5C5E\u5E74\u7EA7\uFF1A"+n(t.grade)+"\u5E74\u7EA7",1)]),a("span",ne,n(U(t.show_date)),1)],8,se))),128))]),a("div",ce,[a("div",ue,[a("span",re,"\u5171"+n(m.value)+"\u6761\u8BB0\u5F55",1),c(u,{"page-size":10,"pager-count":5,layout:"prev, pager, next",total:m.value,onCurrentChange:O},null,8,["total"])])]),c(I,{modelValue:g.value,"onUpdate:modelValue":s[0]||(s[0]=t=>g.value=t),title:"",width:"29vw",center:""},{default:V(()=>[a("div",_e,[c(A,{"look-study-id":R.value},null,8,["look-study-id"])])]),_:1},8,["modelValue"]),c(I,{modelValue:k.value,"onUpdate:modelValue":s[1]||(s[1]=t=>k.value=t),title:"",width:"31vw",center:""},{default:V(()=>[a("div",ve,[c(N,{"look-study-id":D.value},null,8,["look-study-id"])])]),_:1},8,["modelValue"]),c(I,{modelValue:w.value,"onUpdate:modelValue":s[2]||(s[2]=t=>w.value=t),title:"",width:"30vw",center:""},{default:V(()=>[a("div",ye,[c(P,{"look-study-id":L.value,"look-month-id":b.value},null,8,["look-study-id","look-month-id"])])]),_:1},8,["modelValue"])])}}},Ce=W(pe,[["__scopeId","data-v-080ad306"]]);export{Ce as default};
