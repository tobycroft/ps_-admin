import{u as l}from"./school.16e7ecdd.js";import{e as A}from"./study.44dbe23c.js";import{h as E}from"./moment.9709ab41.js";import{E as H}from"./EveryDayDetail.7eccc608.js";import{E as N}from"./EveryWeekDetail.fe62b4e9.js";import{E as P}from"./EveryMonthDetail.d35a52a4.js";import{_ as W,b as o,v as T,r as M,o as d,c as i,h as s,F as f,f as m,t as n,a as c,w as S,n as G,x as j,y as J}from"./index.14898826.js";import"./request.ebae3eec.js";import"./week_theme_tag.7a60b101.js";import"./quiz.856cf712.js";const O=v=>(j("data-v-99d32c9d"),v=v(),J(),v),K={class:"study-overview-container"},Q={class:"sort-wrap"},X={class:"sort-sec"},Z=O(()=>s("span",{class:"o-char"},"\u5E74\u7EA7\uFF1A",-1)),ee=["onClick"],te={class:"sort-sec"},se=O(()=>s("span",{class:"o-char"},"\u5206\u7C7B\uFF1A",-1)),ae=["onClick"],oe={class:"learn-box"},le=["onClick"],de={class:"left-title"},ie={class:"title-char"},ne={class:"yellow-tag"},ce={class:"time-char"},re={class:"flex-start",style:{margin:"18px 0 0 18px"}},ue={class:"flex"},_e={class:"record-char"},ve={class:"study-dialog-wrap"},ye={class:"study-dialog-wrap"},pe={class:"study-dialog-wrap"},he={__name:"studyOverview",setup(v){const g=o([]),Y=[{id:"daily",name:"\u6BCF\u65E5\u4E00\u5B66"},{id:"weekly",name:"\u6BCF\u5468\u4E00\u505A"},{id:"monthy",name:"\u6BCF\u6708\u4E00\u8BFE"}],y=o("daily"),B=e=>{y.value=e,h()},p=o(-2),F=e=>{p.value=e,h()},k=o(0),x=o(1),U=e=>{x.value=e,h()},L=o([]),h=async()=>{const e={type:y.value,is_custom:!1,limit:10,page:x.value,area_id:0,school_id:l().schoolInfo.id,grade:p.value,title:"",start_date:"",end_date:y.value=="weekly"?E().startOf("week").add(1,"day").format("yyyy-MM-DD HH:mm:ss"):"",tag_ids:""},a=await A(e);L.value=a.data,k.value=a.total};T(async()=>{const e=l().gradeList;(!e||!e.length)&&await l().getSchoolGradeList(),l().saveSchoolInfo(l().schoolInfo.id).then(()=>{console.log("schoolinfo_refresh")});const a=[];for(const r in e)e[r].id>=l().schoolInfo.grade_min&&e[r].id<=l().schoolInfo.grade_max&&a.push(e[r]);g.value=a,p.value=g.value[0].id,h()});const $=e=>E(e).format("YYYY.MM.DD"),q=e=>l().gradeList.find(u=>u.id==e).name,C=o(0),w=o(!1),D=o(0),I=o(!1),R=o(0),V=o(!1),b=o(0),z=e=>{e.study_type=="daily"&&(w.value=!0,C.value=e.id),e.study_type=="weekly"&&(I.value=!0,D.value=e.id),e.study_type=="monthy"&&(V.value=!0,R.value=e.id,b.value=e.study_id)};return(e,a)=>{const r=M("el-pagination"),u=M("el-dialog");return d(),i("div",K,[s("div",Q,[s("div",X,[Z,(d(!0),i(f,null,m(g.value,t=>(d(),i("div",{class:G(["lab-item",p.value==t.id?"active":""]),onClick:_=>F(t.id),key:t.id},n(t.name),11,ee))),128))]),s("div",te,[se,(d(),i(f,null,m(Y,t=>s("div",{class:G(["lab-item",y.value==t.id?"active":""]),onClick:_=>B(t.id),key:t.id},n(t.name),11,ae)),64))])]),s("div",oe,[(d(!0),i(f,null,m(L.value,t=>(d(),i("div",{class:"learn-sec flex",key:t.id,onClick:_=>z(t)},[s("div",de,[s("span",ie,"\u300A"+n(t.title)+"\u300B",1),(d(!0),i(f,null,m(t.special_tag,_=>(d(),i("div",{class:"blue-tag",key:_.id},n(_.name),1))),128)),s("div",ne,"\u6240\u5C5E\u5E74\u7EA7\uFF1A"+n(q(t.grade)),1)]),s("span",ce,n($(t.show_date)),1)],8,le))),128))]),s("div",re,[s("div",ue,[s("span",_e,"\u5171"+n(k.value)+"\u6761\u8BB0\u5F55",1),c(r,{"page-size":10,"pager-count":5,layout:"prev, pager, next",total:k.value,onCurrentChange:U},null,8,["total"])])]),c(u,{modelValue:w.value,"onUpdate:modelValue":a[0]||(a[0]=t=>w.value=t),title:"",width:"29vw",center:""},{default:S(()=>[s("div",ve,[c(H,{"look-study-id":C.value},null,8,["look-study-id"])])]),_:1},8,["modelValue"]),c(u,{modelValue:I.value,"onUpdate:modelValue":a[1]||(a[1]=t=>I.value=t),title:"",width:"31vw",center:""},{default:S(()=>[s("div",ye,[c(N,{"look-study-id":D.value},null,8,["look-study-id"])])]),_:1},8,["modelValue"]),c(u,{modelValue:V.value,"onUpdate:modelValue":a[2]||(a[2]=t=>V.value=t),title:"",width:"30vw",center:""},{default:S(()=>[s("div",pe,[c(P,{"look-study-id":R.value,"look-month-id":b.value},null,8,["look-study-id","look-month-id"])])]),_:1},8,["modelValue"])])}}},Ce=W(he,[["__scopeId","data-v-99d32c9d"]]);export{Ce as default};
