import{_ as N,u as le,b as _,v as z,o as n,c as i,h as t,t as a,x as P,y as L,r as j,C as s,D as l,n as K,B as F,P as x,j as v,a as Y,w as oe,Y as ce,Z as ne,F as B,f as R,i as ie,d as de,k as re,T as ue,g as me,Q as _e}from"./index.2d66623d.js";import{a as he,b as W}from"./datacenter.1621c3b7.js";import{u as U}from"./school.5caabc29.js";import{_ as S,a as ye,b as ve,c as pe}from"./medal3.a026bfe8.js";import{u as ge}from"./teacher.fb11f396.js";import{h as Q}from"./handleView.21127f21.js";import{s as fe,A as ke}from"./study.82231a19.js";import{h as w}from"./moment.9709ab41.js";import{g as Ie}from"./ak.02252990.js";import{_ as $e}from"./nodata_status.b4bc20a4.js";import"./request.96ccd61f.js";const Z=e=>(P("data-v-4ce2ce80"),e=e(),L(),e),we={class:"all-complete-box flex"},xe={class:"left-box"},Ce={class:"num"},De=Z(()=>t("span",{class:"per-char"},"%",-1)),Te=Z(()=>t("span",{class:"per-char"},"\u5168\u6821\u7D2F\u8BA1\u5B8C\u6210\u6CE8\u518C\u7387",-1)),Ye={__name:"PerAllComplete",setup(e){const o=le(),u=()=>{o.push({path:"/CompletionRate"})},r=_(0),p=async()=>{const f={school_id:U().schoolInfo.id},c=await he(f);if(c){const y=c.parent_count||0,k=c.student_should_count||0;k?r.value=Math.ceil(y/k*100):r.value=100}};return z(()=>{p()}),(f,c)=>(n(),i("div",we,[t("div",xe,[t("span",Ce,a(r.value),1),De,Te]),t("div",{class:"look-char",onClick:u},"\u67E5\u770B\u8BE6\u60C5")]))}},be=N(Ye,[["__scopeId","data-v-4ce2ce80"]]),H="/admin/images/rank1.png",J="/admin/images/rank2.png",X="/admin/images/rank3.png",ee="/admin/images/six_border.png";const A=e=>(P("data-v-35f77f24"),e=e(),L(),e),Me={class:"grade-class-rank-container"},Se={class:"rank-left"},Ae={class:"rank-img",src:H,alt:""},Ee={class:"rank-img",src:J,alt:""},Be={class:"rank-img",src:X,alt:""},Re={class:"rank-cic"},Fe=A(()=>t("img",{class:"six-img",src:ee,alt:""},null,-1)),Ne={class:"rank-num"},Ve={class:"right-data-wrap"},Ue={class:"progress-complete"},Pe={class:"progress-box"},Le={class:"flex"},Oe={class:"gc-char"},je={class:"cp-char"},Ke={key:0,class:"progress"},qe={class:"fire-icon",src:S,alt:"fire"},Ge={key:1,class:"progress"},ze={class:"fire-icon",src:S,alt:"fire"},We={class:"progress"},Qe={class:"fire-icon",src:S,alt:"fire"},Ze={class:"progress"},He={class:"fire-icon",src:S,alt:"fire"},Je={key:0,class:"per-char"},Xe={key:1,class:"per-char"},et={key:2,class:"per-char"},tt={key:3,class:"per-char"},at={class:"data-box flex"},st={class:"data-detail-wrap"},lt=A(()=>t("span",{class:"data-char"},"\u6570\u636E\u6982\u89C8",-1)),ot={class:"data-item"},ct=A(()=>t("div",{class:"char"},"\u5B66\u4E60\u4EBA\u6B21",-1)),nt={class:"data-item"},it={class:"num-char"},dt=A(()=>t("div",{class:"char"},"\u5E74\u7EA7\u4EBA\u6570",-1)),rt={class:"data-item"},ut={class:"num-char"},mt={class:"char"},_t={class:"data-item"},ht={class:"num-char"},yt=A(()=>t("div",{class:"char"},"\u6BCF\u65E5\u4E00\u5B66",-1)),vt={class:"data-item"},pt={class:"num-char"},gt=A(()=>t("div",{class:"char"},"\u6BCF\u5468\u4E00\u505A",-1)),ft={class:"data-item"},kt={class:"num-char"},It=A(()=>t("div",{class:"char nomar"},"\u6BCF\u6708\u4E00\u8BFE",-1)),$t={class:"detail-char"},wt={class:"class-item-wrap"},xt={class:"flex"},Ct={class:"class-sec"},Dt={class:"class-char"},Tt={class:"teacher-sec flex"},Yt={class:"teacher-char"},bt=A(()=>t("span",{class:"teacher-char"},"\u5B66\u4E60\u5B8C\u6210\u7387",-1)),Mt={class:"progress-wrap"},St={class:"progress-wrap"},At={class:"progress-wrap"},Et={class:"progress-wrap"},Bt={class:"count-sec flex"},Rt={class:"flex"},Ft={class:"count-tag"},Nt={class:"medal-img",src:ye,alt:""},Vt={class:"medal-img",src:ve,alt:""},Ut={class:"medal-img",src:pe,alt:""},Pt={class:"no-char"},Lt=ie("NO: "),Ot={class:"no-num"},jt={__name:"GradeClassRank",props:{completeItem:{type:Object},completeIndex:{type:Number,default:0},startDate:{type:String,default:""},endDate:{type:String,default:""},studyType:{type:String,default:""},rankMode:{type:Number,default:1}},setup(e,{expose:o}){const u=e,r=_([]),p=async h=>{const I={school_id:U().schoolInfo.id,limit:30,page:1,rank_mode:"class",start_date:u.startDate,end_date:u.endDate,study_type:u.studyType,year:h},D=await W(I);r.value=D},f=()=>{c.value=!1},c=_(!1),y=h=>{c.value=!c.value,c.value&&p(h)},k=(h,I)=>{const D=ge().teacherList;for(const m of D)if(m.year==h&&m.class_id==I)return m.name},d=h=>Math.ceil(Number(h)*100),C=(h,I)=>({isUp:h-I>0,isShow:h-I!=0,numAbs:Math.abs(h-I)});return o({doSth:f}),(h,I)=>{const D=j("el-icon");return n(),i("div",Me,[t("div",Se,[s(t("img",Ae,null,512),[[l,e.completeIndex==0]]),s(t("img",Ee,null,512),[[l,e.completeIndex==1]]),s(t("img",Be,null,512),[[l,e.completeIndex==2]]),s(t("div",Re,[Fe,t("span",Ne,a(e.completeIndex+1),1)],512),[[l,e.completeIndex>2]]),s(t("div",{class:K(["ranked-tag",C(e.completeItem.rank_index_last,e.completeItem.rank_index).isUp?"":"green"])}," \u8F83\u4E0A"+a(e.rankMode==1?"\u5468":"\u6708")+a(C(e.completeItem.rank_index_last,e.completeItem.rank_index).isUp?"\u4E0A\u5347":"\u4E0B\u964D")+a(C(e.completeItem.rank_index_last,e.completeItem.rank_index).numAbs)+"\u540D ",3),[[l,C(e.completeItem.rank_index_last,e.completeItem.rank_index).isShow]])]),t("div",Ve,[t("div",Ue,[t("div",Pe,[t("div",Le,[t("span",Oe,a(F(Q)(e.completeItem.year).name),1),t("span",je,"\u672C"+a(e.rankMode==1?"\u5468":"\u6708")+"\u5B66\u4E60\u5B8C\u6210\u7387",1)]),e.studyType=="all"?(n(),i("div",Ke,[t("div",{class:"progress-active",style:x(`width: ${d(e.completeItem.parent_student_ratio)>=100?100:d(e.completeItem.parent_student_ratio)}%`)},null,4),s(t("img",qe,null,512),[[l,d(e.completeItem.parent_student_ratio)>=100]])])):v("",!0),e.studyType=="daily"?(n(),i("div",Ge,[t("div",{class:"progress-active",style:x(`width: ${d(e.completeItem.daily_parent_ratio)>=100?100:d(e.completeItem.daily_parent_ratio)}%`)},null,4),s(t("img",ze,null,512),[[l,d(e.completeItem.daily_parent_ratio)>=100]])])):v("",!0),s(t("div",We,[t("div",{class:"progress-active",style:x(`width: ${d(e.completeItem.weekly_parent_ratio)>=100?100:d(e.completeItem.weekly_parent_ratio)}%`)},null,4),s(t("img",Qe,null,512),[[l,d(e.completeItem.weekly_parent_ratio)>=100]])],512),[[l,e.studyType=="weekly"]]),s(t("div",Ze,[t("div",{class:"progress-active",style:x(`width: ${d(e.completeItem.monthy_parent_ratio)>=100?100:d(e.completeItem.monthy_parent_ratio)}%`)},null,4),s(t("img",He,null,512),[[l,d(e.completeItem.monthy_parent_ratio)>=100]])],512),[[l,e.studyType=="monthy"]])]),e.studyType=="all"?(n(),i("span",Je,a(d(e.completeItem.parent_student_ratio))+"%",1)):v("",!0),e.studyType=="daily"?(n(),i("span",Xe,a(d(e.completeItem.daily_parent_ratio))+"%",1)):v("",!0),e.studyType=="weekly"?(n(),i("span",et,a(d(e.completeItem.weekly_parent_ratio))+"%",1)):v("",!0),e.studyType=="monthy"?(n(),i("span",tt,a(d(e.completeItem.monthy_parent_ratio))+"%",1)):v("",!0)]),t("div",at,[t("div",st,[lt,t("div",ot,[s(t("div",{class:"num-char"},a(e.completeItem.complete_parent),513),[[l,e.studyType=="all"]]),s(t("div",{class:"num-char"},a(e.completeItem.daily_parent_num),513),[[l,e.studyType=="daily"]]),s(t("div",{class:"num-char"},a(e.completeItem.weekly_parent_num),513),[[l,e.studyType=="weekly"]]),s(t("div",{class:"num-char"},a(e.completeItem.monthy_parent_num),513),[[l,e.studyType=="monthy"]]),ct]),t("div",nt,[t("div",it,a(e.completeItem.student_num),1),dt]),t("div",rt,[t("div",ut,a(e.completeItem.rank_index_last),1),t("div",mt,a(e.rankMode==1?"\u4E0A\u5468\u6392\u540D":"\u4E0A\u6708\u6392\u540D"),1)]),t("div",_t,[t("div",ht,a(d(e.completeItem.daily_parent_ratio))+"% ",1),yt]),t("div",vt,[t("div",pt,a(d(e.completeItem.weekly_parent_ratio))+"% ",1),gt]),t("div",ft,[t("div",kt,a(d(e.completeItem.monthy_parent_ratio))+"% ",1),It])]),t("div",{class:"sw-btn",onClick:I[0]||(I[0]=m=>y(e.completeItem.year))},[t("span",$t,a(c.value?"\u6536\u8D77":"\u67E5\u770B")+"\u5E74\u7EA7\u5404\u73ED\u8BE6\u60C5",1),Y(D,null,{default:oe(()=>[s(Y(F(ce),{class:"arr-icon"},null,512),[[l,c.value]]),s(Y(F(ne),{class:"arr-icon"},null,512),[[l,!c.value]])]),_:1})])]),s(t("div",wt,[(n(!0),i(B,null,R(r.value,(m,b)=>(n(),i("div",{class:"class-item",key:b},[t("div",xt,[t("div",Ct,[t("span",Dt,a(m.class_id)+"\u73ED",1)]),s(t("span",{class:"per-char"},a(d(m.parent_student_ratio))+"%",513),[[l,e.studyType=="all"]]),s(t("span",{class:"per-char"},a(d(m.daily_parent_ratio))+"%",513),[[l,e.studyType=="daily"]]),s(t("span",{class:"per-char"},a(d(m.weekly_parent_ratio))+"%",513),[[l,e.studyType=="weekly"]]),s(t("span",{class:"per-char"},a(d(m.monthy_parent_ratio))+"%",513),[[l,e.studyType=="monthy"]])]),t("div",Tt,[t("span",Yt,"\u73ED\u4E3B\u4EFB\uFF1A"+a(k(m.year,m.class_id)),1),bt]),s(t("div",Mt,[t("div",{class:"progress-item",style:x(`width: ${d(m.parent_student_ratio)}%`)},null,4)],512),[[l,e.studyType=="all"]]),s(t("div",St,[t("div",{class:"progress-item",style:x(`width: ${d(m.daily_parent_ratio)}%`)},null,4)],512),[[l,e.studyType=="daily"]]),s(t("div",At,[t("div",{class:"progress-item",style:x(`width: ${d(m.weekly_parent_ratio)}%`)},null,4)],512),[[l,e.studyType=="weekly"]]),s(t("div",Et,[t("div",{class:"progress-item",style:x(`width: ${d(m.monthy_parent_ratio)}%`)},null,4)],512),[[l,e.studyType=="monthy"]]),t("div",Bt,[t("div",Rt,[s(t("div",{class:"count-tag"},"\u5B66\u4E60\u4EBA\u6B21\uFF1A"+a(m.complete_parent),513),[[l,e.studyType=="all"]]),s(t("div",{class:"count-tag"},"\u5B66\u4E60\u4EBA\u6B21\uFF1A"+a(m.daily_parent_num),513),[[l,e.studyType=="daily"]]),s(t("div",{class:"count-tag"},"\u5B66\u4E60\u4EBA\u6B21\uFF1A"+a(m.weekly_parent_num),513),[[l,e.studyType=="weekly"]]),s(t("div",{class:"count-tag"},"\u5B66\u4E60\u4EBA\u6B21\uFF1A"+a(m.monthy_parent_num),513),[[l,e.studyType=="monthy"]]),t("div",Ft,"\u73ED\u7EA7\u4EBA\u6570\uFF1A"+a(m.student_num),1)]),s(t("img",Nt,null,512),[[l,b==0]]),s(t("img",Vt,null,512),[[l,b==1]]),s(t("img",Ut,null,512),[[l,b==2]]),s(t("span",Pt,[Lt,t("span",Ot,a(b+1),1)],512),[[l,b>2]])])]))),128))],512),[[l,c.value]])])])}}},Kt=N(jt,[["__scopeId","data-v-35f77f24"]]);function qt(){const e=_({}),o=_({}),u=async()=>{const f={school_id:U().getSchoolInfo.id,type:"term"},c=await fe(f);e.value=c},r=async()=>{const f={school_id:U().getSchoolInfo.id},c=await ke(f);o.value=c};return u(),r(),{studyDashboardCompleteCountRef:e,studyDashboardCompleteDailyRef:o}}const Gt=de({name:"CompletedAmountOverview",props:{dataSource:{type:Object,default:()=>({})},dataSourceAvg:{type:Object,default:()=>({})}},setup(e){const o=_({total:{title:"\u603B\u8BBF\u95EE\u91CF",icon:"overview_total_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u8BBF\u95EE\u91CF",num:0}},daily:{title:"\u6BCF\u65E5\u4E00\u5B66\u603B\u5B66\u4E60\u91CF",icon:"overview_daily_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u5B66\u4E60\u91CF",num:0}},weekly:{title:"\u6BCF\u5468\u4E00\u505A\u603B\u5B8C\u6210\u91CF",icon:"overview_weekly_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u5B8C\u6210\u91CF",num:0}},monthy:{title:"\u6BCF\u6708\u4E00\u8BFE\u603B\u5B66\u4E60\u91CF",icon:"overview_monthly_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u5B66\u4E60\u91CF",num:0}}}),u=_(e.dataSource),r=_(e.dataSourceAvg);return re(()=>{u.value=e.dataSource,r.value=e.dataSourceAvg,Object.keys(u.value).length>0&&(o.value.total.num=u.value.total_all,o.value.total.tag.num=u.value.all_today,o.value.total.averageDaily.num=Math.ceil(r.value.all_num/r.value.day_num),o.value.daily.num=u.value.total_daily,o.value.daily.tag.num=u.value.daily,o.value.daily.averageDaily.num=Math.ceil(r.value.daily/r.value.day_num),o.value.weekly.num=u.value.total_weekly,o.value.weekly.tag.num=u.value.weekly_today,o.value.weekly.averageDaily.num=Math.ceil(r.value.weekly/r.value.day_num),o.value.monthy.num=u.value.total_monthy,o.value.monthy.tag.num=u.value.monthy_today,o.value.monthy.averageDaily.num=Math.ceil(r.value.monthy/r.value.day_num))}),{overviewListRef:o,getImageUrl:Ie}}});const zt={class:"completed-amount-overview-container"},Wt={class:"completed-amount-overview-ul flex"},Qt={class:"el-card-style","body-style":{padding:"0px"}},Zt={class:"flex"},Ht={class:"title-style"},Jt={class:"flex-start align-end"},Xt={class:"total-num-style"},ea={class:"tag-box flex-center"},ta={class:"flex-start"},aa={class:"average-daily-title-style"},sa={class:"average-daily-num-style"};function la(e,o,u,r,p,f){const c=j("el-image");return n(),i("div",zt,[t("ul",Wt,[(n(!0),i(B,null,R(e.overviewListRef,(y,k)=>(n(),i("li",{key:k,class:"completed-amount-overview-li"},[t("div",Qt,[t("header",Zt,[t("p",Ht,a(y.title),1),Y(c,{class:"header-icon-style",src:e.getImageUrl(y.icon+".png")},null,8,["src"])]),t("article",Jt,[t("p",Xt,a(y.num),1),t("div",ea,[t("p",null,a(y.tag.title),1),t("p",null,a(y.tag.num),1)])]),t("footer",ta,[t("p",aa,a(y.averageDaily.title),1),t("p",sa,a(y.averageDaily.num),1)])])]))),128))])])}const oa=N(Gt,[["render",la],["__scopeId","data-v-7331e030"]]);const E=e=>(P("data-v-e276eaa3"),e=e(),L(),e),ca={class:"grade-class-rank-container"},na={class:"rank-left"},ia={class:"rank-img",src:H,alt:""},da={class:"rank-img",src:J,alt:""},ra={class:"rank-img",src:X,alt:""},ua={class:"rank-cic"},ma=E(()=>t("img",{class:"six-img",src:ee,alt:""},null,-1)),_a={class:"rank-num"},ha={class:"right-data-wrap"},ya={class:"progress-complete"},va={class:"progress-box"},pa={class:"flex"},ga={class:"gc-char"},fa={class:"cp-char"},ka={key:0,class:"progress"},Ia={class:"fire-icon",src:S,alt:"fire"},$a={key:1,class:"progress"},wa={class:"fire-icon",src:S,alt:"fire"},xa={class:"progress"},Ca={class:"fire-icon",src:S,alt:"fire"},Da={class:"progress"},Ta={class:"fire-icon",src:S,alt:"fire"},Ya={key:0,class:"per-char"},ba={key:1,class:"per-char"},Ma={key:2,class:"per-char"},Sa={key:3,class:"per-char"},Aa={class:"data-box flex"},Ea={class:"data-detail-wrap"},Ba=E(()=>t("span",{class:"data-char"},"\u6570\u636E\u6982\u89C8",-1)),Ra={class:"data-item"},Fa=E(()=>t("div",{class:"char"},"\u5B66\u4E60\u4EBA\u6B21",-1)),Na={class:"data-item"},Va={class:"num-char"},Ua=E(()=>t("div",{class:"char"},"\u73ED\u7EA7\u4EBA\u6570",-1)),Pa={class:"data-item"},La={class:"num-char"},Oa={class:"char"},ja={class:"data-item"},Ka={class:"num-char"},qa=E(()=>t("div",{class:"char"},"\u6BCF\u65E5\u4E00\u5B66",-1)),Ga={class:"data-item"},za={class:"num-char"},Wa=E(()=>t("div",{class:"char"},"\u6BCF\u5468\u4E00\u505A",-1)),Qa={class:"data-item"},Za={class:"num-char"},Ha=E(()=>t("div",{class:"char nomar"},"\u6BCF\u6708\u4E00\u8BFE",-1)),Ja={__name:"ClassRankForComplete",props:{completeItem:{type:Object},completeIndex:{type:Number,default:0},rankMode:{type:Number,default:1},studyType:{type:String,default:""}},setup(e){const o=r=>Math.ceil(Number(r)*100),u=(r,p)=>({isUp:r-p>0,isShow:r-p!=0,numAbs:Math.abs(r-p)});return(r,p)=>(n(),i("div",ca,[t("div",na,[s(t("img",ia,null,512),[[l,e.completeIndex==0]]),s(t("img",da,null,512),[[l,e.completeIndex==1]]),s(t("img",ra,null,512),[[l,e.completeIndex==2]]),s(t("div",ua,[ma,t("span",_a,a(e.completeIndex+1),1)],512),[[l,e.completeIndex>2]]),s(t("div",{class:K(["ranked-tag",u(e.completeItem.rank_index_last,e.completeItem.rank_index).isUp?"":"green"])}," \u8F83\u4E0A"+a(e.rankMode==1?"\u5468":"\u6708")+a(u(e.completeItem.rank_index_last,e.completeItem.rank_index).isUp?"\u4E0A\u5347":"\u4E0B\u964D")+a(u(e.completeItem.rank_index_last,e.completeItem.rank_index).numAbs)+"\u540D ",3),[[l,u(e.completeItem.rank_index_last,e.completeItem.rank_index).isShow]])]),t("div",ha,[t("div",ya,[t("div",va,[t("div",pa,[t("span",ga,a(F(Q)(e.completeItem.year).name)+"("+a(e.completeItem.class_id)+")\u73ED",1),t("span",fa,"\u672C"+a(e.rankMode==1?"\u5468":"\u6708")+"\u5B66\u4E60\u5B8C\u6210\u7387",1)]),e.studyType=="all"?(n(),i("div",ka,[t("div",{class:"progress-active",style:x(`width: ${o(e.completeItem.parent_student_ratio)>=100?100:o(e.completeItem.parent_student_ratio)}%`)},null,4),s(t("img",Ia,null,512),[[l,o(e.completeItem.parent_student_ratio)>=100]])])):v("",!0),e.studyType=="daily"?(n(),i("div",$a,[t("div",{class:"progress-active",style:x(`width: ${o(e.completeItem.daily_parent_ratio)>=100?100:o(e.completeItem.daily_parent_ratio)}%`)},null,4),s(t("img",wa,null,512),[[l,o(e.completeItem.daily_parent_ratio)>=100]])])):v("",!0),s(t("div",xa,[t("div",{class:"progress-active",style:x(`width: ${o(e.completeItem.weekly_parent_ratio)>=100?100:o(e.completeItem.weekly_parent_ratio)}%`)},null,4),s(t("img",Ca,null,512),[[l,o(e.completeItem.weekly_parent_ratio)>=100]])],512),[[l,e.studyType=="weekly"]]),s(t("div",Da,[t("div",{class:"progress-active",style:x(`width: ${o(e.completeItem.monthy_parent_ratio)>=100?100:o(e.completeItem.monthy_parent_ratio)}%`)},null,4),s(t("img",Ta,null,512),[[l,o(e.completeItem.monthy_parent_ratio)>=100]])],512),[[l,e.studyType=="monthy"]])]),e.studyType=="all"?(n(),i("span",Ya,a(o(e.completeItem.parent_student_ratio))+"%",1)):v("",!0),e.studyType=="daily"?(n(),i("span",ba,a(o(e.completeItem.daily_parent_ratio))+"%",1)):v("",!0),e.studyType=="weekly"?(n(),i("span",Ma,a(o(e.completeItem.weekly_parent_ratio))+"%",1)):v("",!0),e.studyType=="monthy"?(n(),i("span",Sa,a(o(e.completeItem.monthy_parent_ratio))+"%",1)):v("",!0)]),t("div",Aa,[t("div",Ea,[Ba,t("div",Ra,[s(t("div",{class:"num-char"},a(e.completeItem.complete_parent),513),[[l,e.studyType=="all"]]),s(t("div",{class:"num-char"},a(e.completeItem.daily_parent_num),513),[[l,e.studyType=="daily"]]),s(t("div",{class:"num-char"},a(e.completeItem.weekly_parent_num),513),[[l,e.studyType=="weekly"]]),s(t("div",{class:"num-char"},a(e.completeItem.monthy_parent_num),513),[[l,e.studyType=="monthy"]]),Fa]),t("div",Na,[t("div",Va,a(e.completeItem.student_num),1),Ua]),t("div",Pa,[t("div",La,a(e.completeItem.rank_index_last),1),t("div",Oa,a(e.rankMode==1?"\u4E0A\u5468\u6392\u540D":"\u4E0A\u6708\u6392\u540D"),1)]),t("div",ja,[t("div",Ka,a(o(e.completeItem.daily_parent_ratio))+"% ",1),qa]),t("div",Ga,[t("div",za,a(o(e.completeItem.weekly_parent_ratio))+"% ",1),Wa]),t("div",Qa,[t("div",Za,a(o(e.completeItem.monthy_parent_ratio))+"% ",1),Ha])])])])]))}},Xa=N(Ja,[["__scopeId","data-v-e276eaa3"]]);const es={},te=e=>(P("data-v-14029ae3"),e=e(),L(),e),ts={class:"nodata-status-container"},as=te(()=>t("img",{class:"nodata-img",src:$e,alt:""},null,-1)),ss=te(()=>t("span",{class:"nodata-char"},"\u6682\u65E0\u6570\u636E\u5185\u5BB9\uFF0C\u770B\u770B\u5176\u4ED6\u7684\u5427~",-1)),ls=[as,ss];function os(e,o){return n(),i("div",ts,ls)}const cs=N(es,[["render",os],["__scopeId","data-v-14029ae3"]]);const ae=e=>(P("data-v-08d19174"),e=e(),L(),e),ns={class:"study-report-container"},is={class:"all-wrap"},ds={class:"sort-wrap"},rs={class:"title-time"},us=ae(()=>t("span",{class:"study-tit"},"\u5B66\u4E60\u5B8C\u6210\u699C",-1)),ms={class:"time-char"},_s=ae(()=>t("span",{class:"o-char"},"\u5206\u7C7B\uFF1A",-1)),hs=["onClick"],ys={key:0,class:"date-picker-wrap"},vs={key:1,class:"date-picker-wrap"},ps={key:0,class:"data-wrap"},gs={key:0},fs={key:1},ks={__name:"studyReportForm",setup(e){const{studyDashboardCompleteCountRef:o,studyDashboardCompleteDailyRef:u}=qt(),r=[{sortKey:1,sortItem:[{id:"grade",name:"\u5E74\u6BB5\u6392\u540D"},{id:"class",name:"\u73ED\u7EA7\u6392\u540D"}]},{sortKey:2,sortItem:[{id:"all",name:"\u7EFC\u5408"},{id:"daily",name:"\u6BCF\u65E5\u4E00\u5B66"},{id:"weekly",name:"\u6BCF\u5468\u4E00\u505A"},{id:"monthy",name:"\u6BCF\u6708\u4E00\u8BFE"}]},{sortKey:3,sortItem:[{id:2,name:"\u6708\u699C"},{id:1,name:"\u5468\u699C"}]}],{proxy:p}=ue(),f=()=>{p.$refs.gradeRef.map(g=>{g.doSth()})},c=_(["class","daily",1]),y=_(""),k=_(""),d=_(""),C=_(""),h=_("");_("");const I=(g,M)=>{c.value[g-1]=M,O(),_e(()=>{f()})},D=_(""),m=_(""),b=g=>{C.value=w(g).add(1,"day").format("YYYY-MM-DD"),h.value=w(g).add(7,"day").format("YYYY-MM-DD"),O()},se=g=>{y.value=w(g).format("YYYY-MM-01"),g?d.value=w(g).format("M"):d.value="",k.value=w(y.value).add(1,"month").format("YYYY-MM-DD"),O()},V=_([]),O=async()=>{const g={school_id:U().schoolInfo.id,limit:30,page:1,rank_mode:c.value[0],start_date:c.value[2]==2?y.value:C.value,end_date:c.value[2]==2?k.value:h.value,study_type:c.value[1]},M=await W(g);V.value=M},q=_("");return z(()=>{q.value=w().format("YYYY\u5E74MM\u6708DD\u65E5"),d.value=w().month(),k.value=w().format("YYYY-MM-01"),y.value=w(k.value).subtract(1,"month").format("YYYY-MM-DD"),h.value=w().isoWeekday(0).format("YYYY-MM-DD"),C.value=w(h.value).subtract(6,"day").format("YYYY-MM-DD"),D.value=C.value,m.value=w().subtract(1,"month").format("YYYY-MM"),O()}),(g,M)=>{const G=j("el-date-picker");return n(),i("div",ns,[t("div",null,[Y(oa,{dataSource:F(o),dataSourceAvg:F(u)},null,8,["dataSource","dataSourceAvg"]),t("div",is,[Y(be)]),t("div",ds,[t("div",rs,[us,t("span",ms,"\u66F4\u65B0\u65F6\u95F4\uFF1A"+a(q.value),1)]),(n(),i(B,null,R(r,$=>t("div",{class:"sort-sec",key:$.sortKey},[_s,(n(!0),i(B,null,R($.sortItem,T=>(n(),i("div",{class:K(["lab-item",c.value[$.sortKey-1]==T.id?"active":""]),onClick:Is=>I($.sortKey,T.id),key:T.id},a(T.name),11,hs))),128))])),64)),c.value[2]==1?(n(),i("div",ys,[Y(G,{modelValue:D.value,"onUpdate:modelValue":M[0]||(M[0]=$=>D.value=$),onChange:b,type:"week",format:"YYYY \u7B2C ww \u5468",placeholder:"\u9009\u62E9\u5468"},null,8,["modelValue"])])):v("",!0),c.value[2]==2?(n(),i("div",vs,[Y(G,{modelValue:m.value,"onUpdate:modelValue":M[1]||(M[1]=$=>m.value=$),type:"month",placeholder:"\u9009\u62E9\u6708",onChange:se},null,8,["modelValue"]),s(t("div",{class:"ranking_list_name"},a(d.value)+"\u6708\u6392\u884C\u699C",513),[[l,d.value]])])):v("",!0)]),V.value&&V.value.length?(n(),i("div",ps,[c.value[0]=="grade"?(n(),i("div",gs,[(n(!0),i(B,null,R(V.value,($,T)=>(n(),i("div",{class:"mar-wrap",key:T},[Y(Kt,{ref_for:!0,ref:"gradeRef",completeItem:$,completeIndex:T,startDate:c.value[2]==2?y.value:C.value,endDate:c.value[2]==2?k.value:h.value,studyType:c.value[1],rankMode:c.value[2]},null,8,["completeItem","completeIndex","startDate","endDate","studyType","rankMode"])]))),128))])):v("",!0),c.value[0]=="class"?(n(),i("div",fs,[(n(!0),i(B,null,R(V.value,($,T)=>(n(),i("div",{class:"mar-wrap",key:T},[Y(Xa,{completeItem:$,completeIndex:T,rankMode:c.value[2],studyType:c.value[1]},null,8,["completeItem","completeIndex","rankMode","studyType"])]))),128))])):v("",!0)])):(n(),me(cs,{key:1}))])])}}},Es=N(ks,[["__scopeId","data-v-08d19174"]]);export{Es as default};
