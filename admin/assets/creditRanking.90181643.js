import{h as s}from"./moment.9709ab41.js";import{c as q}from"./datacenter.f605ded7.js";import{u as z}from"./school.a228afe4.js";import{b as P}from"./calcFunc.09d0c2f3.js";import{_ as B,r as g,o as c,g as C,w as Y,a as i,i as R,t as m,j as b,B as U,h as l,b as t,v as W,c as _,F as V,f as L,n as j,x as E,y as G}from"./index.4f62021f.js";import"./request.b885c166.js";const H={class:"sum_amount"},J={__name:"TableForRank",props:{tableList:{type:Array,default:()=>[]},mode:{type:String,default:"student"},page:{type:Number,default:1}},setup(r){const k={background:"#f6f8fa"};return(n,p)=>{const a=g("el-table-column"),v=g("el-table");return c(),C(v,{data:r.tableList,style:{width:"100%"},"header-cell-style":k},{default:Y(()=>[i(a,{label:"\u6392\u540D",width:"120",align:"center"},{default:Y(o=>[R(m(r.page*10+o.$index+1),1)]),_:1}),r.mode=="student"?(c(),C(a,{key:0,prop:"name",label:"\u5B66\u751F\u59D3\u540D",width:"200"})):b("",!0),r.mode=="student"?(c(),C(a,{key:1,prop:"wx_name",label:"\u5BB6\u957F\u59D3\u540D",width:"200"})):b("",!0),i(a,{label:"\u6240\u5728\u73ED\u7EA7",width:"200"},{default:Y(({row:o})=>[R(m(U(P)(o.year))+m(o.class)+"\u73ED ",1)]),_:1}),i(a,{prop:"teacher_name",label:"\u73ED\u4E3B\u4EFB\u59D3\u540D"}),i(a,{prop:"sum_amount",label:"\u65B0\u589E\u5B66\u5206",fixed:"right",align:"center",width:"300"},{default:Y(({row:o})=>[l("span",H,m(o.sum_amount),1)]),_:1})]),_:1},8,["data"])}}},O=B(J,[["__scopeId","data-v-cbb48464"]]);const K=r=>(E("data-v-7794402d"),r=r(),G(),r),Q={class:"study-report-container"},X={class:"sort-wrap"},Z=K(()=>l("div",{class:"title-time"},[l("span",{class:"study-tit"},"\u5B66\u5206\u6392\u884C\u699C")],-1)),ee=K(()=>l("span",{class:"o-char"},"\u5206\u7C7B\uFF1A",-1)),te=["onClick"],ae={key:0,class:"date-picker-wrap"},oe={key:1,class:"date-picker-wrap"},se={class:"data-wrap"},le={class:"flex-start",style:{margin:"18px 0 0 0"}},ne={class:"flex"},re={class:"record-char"},de={__name:"creditRanking",setup(r){const k=[{sortKey:1,sortItem:[{id:"",name:"\u7EFC\u5408"},{id:"daily",name:"\u6BCF\u65E5\u4E00\u5B66"},{id:"weekly",name:"\u6BCF\u5468\u4E00\u505A"},{id:"monthy",name:"\u6BCF\u6708\u4E00\u8BFE"}]},{sortKey:2,sortItem:[{id:2,name:"\u6708\u699C"},{id:1,name:"\u5468\u699C"}]},{sortKey:3,sortItem:[{id:"student",name:"\u5BB6\u957F\u6392\u540D"},{id:"class",name:"\u73ED\u7EA7\u6392\u540D"}]}],n=t(["",2,"student"]),p=t(""),a=t(""),v=t(""),o=t(""),f=t("");t(""),t([]);const N=(e,d)=>{n.value[e-1]=d,h()},M=t(""),w=t(""),A=e=>{o.value=s(e).add(1,"day").format("YYYY-MM-DD"),f.value=s(e).add(7,"day").format("YYYY-MM-DD"),h()},F=e=>{p.value=s(e).format("YYYY-MM-01"),e?v.value=s(e).format("M"):v.value="",a.value=s(p.value).add(1,"month").format("YYYY-MM-DD"),h()},x=t(0),D=t(1),T=e=>{D.value=e,h()},I=t([]),h=async()=>{const e={coin_id:1,school_id:z().schoolInfo.id,limit:10,page:D.value,mode:n.value[2],start_date:n.value[1]==2?p.value:o.value,end_date:n.value[1]==2?a.value:f.value,study_type:n.value[0]},d=await q(e);I.value=d.data,x.value=d.total};return W(()=>{v.value=s().month(),a.value=s().format("YYYY-MM-01"),p.value=s(a.value).subtract(1,"month").format("YYYY-MM-DD"),f.value=s().isoWeekday(0).format("YYYY-MM-DD"),o.value=s(f.value).subtract(6,"day").format("YYYY-MM-DD"),M.value=o.value,w.value=s().subtract(1,"month").format("YYYY-MM"),h()}),(e,d)=>{const S=g("el-date-picker"),$=g("el-pagination");return c(),_("div",Q,[l("div",null,[l("div",X,[Z,(c(),_(V,null,L(k,u=>l("div",{class:"sort-sec",key:u.sortKey},[ee,(c(!0),_(V,null,L(u.sortItem,y=>(c(),_("div",{class:j(["lab-item",n.value[u.sortKey-1]==y.id?"active":""]),onClick:ce=>N(u.sortKey,y.id),key:y.id},m(y.name),11,te))),128))])),64)),n.value[1]==1?(c(),_("div",ae,[i(S,{modelValue:M.value,"onUpdate:modelValue":d[0]||(d[0]=u=>M.value=u),onChange:A,type:"week",format:"YYYY \u7B2C ww \u5468",placeholder:"\u9009\u62E9\u5468"},null,8,["modelValue"])])):b("",!0),n.value[1]==2?(c(),_("div",oe,[i(S,{modelValue:w.value,"onUpdate:modelValue":d[1]||(d[1]=u=>w.value=u),type:"month",placeholder:"\u9009\u62E9\u6708",onChange:F},null,8,["modelValue"])])):b("",!0)]),l("div",se,[i(O,{tableList:I.value,mode:n.value[2],page:D.value-1},null,8,["tableList","mode","page"])]),l("div",le,[l("div",ne,[l("span",re,"\u5171"+m(x.value)+"\u6761\u8BB0\u5F55",1),i($,{background:"","page-size":10,"pager-count":5,layout:"prev, pager, next",total:x.value,onCurrentChange:T},null,8,["total"])])])])])}}},he=B(de,[["__scopeId","data-v-7794402d"]]);export{he as default};
