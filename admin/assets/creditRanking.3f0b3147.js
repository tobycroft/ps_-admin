import{_ as K,r as b,o as c,g as S,w as g,a as i,i as V,t as m,j as k,B as q,h as n,b as e,v as P,c as _,F as L,f as B,C as U,D as W,n as j,x as E,y as G}from"./index.426da901.js";import{h as l}from"./moment.9709ab41.js";import{c as H}from"./datacenter.88383534.js";import{u as J}from"./school.a3827cd2.js";import{b as O}from"./calcFunc.10f1a886.js";import"./request.1742dea2.js";const Q={class:"sum_amount"},X={__name:"TableForRank",props:{tableList:{type:Array,default:()=>[]},mode:{type:String,default:"student"},page:{type:Number,default:1}},setup(d){const w={background:"#f6f8fa"};return(r,p)=>{const t=b("el-table-column"),v=b("el-table");return c(),S(v,{data:d.tableList,style:{width:"100%"},"header-cell-style":w},{default:g(()=>[i(t,{label:"\u6392\u540D",width:"120",align:"center"},{default:g(o=>[V(m(d.page*10+o.$index+1),1)]),_:1}),d.mode=="student"?(c(),S(t,{key:0,prop:"name",label:"\u5B66\u751F\u59D3\u540D",width:"200"})):k("",!0),d.mode=="student"?(c(),S(t,{key:1,prop:"wx_name",label:"\u5BB6\u957F\u59D3\u540D",width:"200"})):k("",!0),i(t,{label:"\u6240\u5728\u73ED\u7EA7",width:"200"},{default:g(({row:o})=>[V(m(q(O)(o.year))+m(o.class)+"\u73ED ",1)]),_:1}),i(t,{prop:"teacher_name",label:"\u73ED\u4E3B\u4EFB\u59D3\u540D"}),i(t,{prop:"sum_amount",label:"\u65B0\u589E\u5B66\u5206",fixed:"right",align:"center",width:"300"},{default:g(({row:o})=>[n("span",Q,m(o.sum_amount),1)]),_:1})]),_:1},8,["data"])}}},Z=K(X,[["__scopeId","data-v-3b9523f3"]]);const N=d=>(E("data-v-3d20a5eb"),d=d(),G(),d),ee={class:"study-report-container"},ae={class:"sort-wrap"},te=N(()=>n("div",{class:"title-time"},[n("span",{class:"study-tit"},"\u5B66\u5206\u6392\u884C\u699C")],-1)),oe=N(()=>n("span",{class:"o-char"},"\u5206\u7C7B\uFF1A",-1)),se=["onClick"],le={key:0,class:"date-picker-wrap"},ne={key:1,class:"date-picker-wrap"},re={class:"data-wrap"},de={class:"flex-start",style:{margin:"18px 0 0 0"}},ce={class:"flex"},ue={class:"record-char"},ie={__name:"creditRanking",setup(d){const w=[{sortKey:1,sortItem:[{id:"",name:"\u7EFC\u5408"},{id:"daily",name:"\u6BCF\u65E5\u4E00\u5B66"},{id:"weekly",name:"\u6BCF\u5468\u4E00\u505A"},{id:"monthy",name:"\u6BCF\u6708\u4E00\u8BFE"}]},{sortKey:2,sortItem:[{id:2,name:"\u6708\u699C"},{id:1,name:"\u5468\u699C"}]},{sortKey:3,sortItem:[{id:"student",name:"\u5BB6\u957F\u6392\u540D"},{id:"class",name:"\u73ED\u7EA7\u6392\u540D"}]}],r=e(["",2,"student"]),p=e(""),t=e(""),v=e(""),o=e(""),y=e("");e(""),e([]);const A=(a,s)=>{r.value[a-1]=s,s=="student"?h.value=50:s=="class"&&(h.value=0),f()},M=e(""),D=e(""),F=a=>{o.value=l(a).add(1,"day").format("YYYY-MM-DD"),y.value=l(a).add(7,"day").format("YYYY-MM-DD"),f()},z=a=>{p.value=l(a).format("YYYY-MM-01"),a?v.value=l(a).format("M"):v.value="",t.value=l(p.value).add(1,"month").format("YYYY-MM-DD"),f()},x=e(0),h=e(50),C=e(1),T=a=>{C.value=a,f()},R=e([]),f=async()=>{const a={coin_id:1,school_id:J().schoolInfo.id,limit:h.value,page:C.value,mode:r.value[2],start_date:r.value[1]==2?p.value:o.value,end_date:r.value[1]==2?t.value:y.value,study_type:r.value[0]},s=await H(a);R.value=s.data,x.value=s.total};return P(()=>{v.value=l().month(),t.value=l().format("YYYY-MM-01"),p.value=l(t.value).subtract(1,"month").format("YYYY-MM-DD"),y.value=l().isoWeekday(0).format("YYYY-MM-DD"),o.value=l(y.value).subtract(6,"day").format("YYYY-MM-DD"),M.value=o.value,D.value=l().subtract(1,"month").format("YYYY-MM"),f()}),(a,s)=>{const I=b("el-date-picker"),$=b("el-pagination");return c(),_("div",ee,[n("div",null,[n("div",ae,[te,(c(),_(L,null,B(w,u=>n("div",{class:"sort-sec",key:u.sortKey},[oe,(c(!0),_(L,null,B(u.sortItem,Y=>(c(),_("div",{class:j(["lab-item",r.value[u.sortKey-1]==Y.id?"active":""]),onClick:_e=>A(u.sortKey,Y.id),key:Y.id},m(Y.name),11,se))),128))])),64)),r.value[1]==1?(c(),_("div",le,[i(I,{modelValue:M.value,"onUpdate:modelValue":s[0]||(s[0]=u=>M.value=u),onChange:F,type:"week",format:"YYYY \u7B2C ww \u5468",placeholder:"\u9009\u62E9\u5468"},null,8,["modelValue"])])):k("",!0),r.value[1]==2?(c(),_("div",ne,[i(I,{modelValue:D.value,"onUpdate:modelValue":s[1]||(s[1]=u=>D.value=u),type:"month",placeholder:"\u9009\u62E9\u6708",onChange:z},null,8,["modelValue"])])):k("",!0)]),n("div",re,[i(Z,{tableList:R.value,mode:r.value[2],page:C.value-1},null,8,["tableList","mode","page"])]),n("div",de,[n("div",ce,[n("span",ue,"\u5171"+m(x.value)+"\u6761\u8BB0\u5F55",1),U(i($,{background:"","page-size":h.value,"pager-count":5,layout:"prev, pager, next",total:x.value,onCurrentChange:T},null,8,["page-size","total"]),[[W,h.value]])])])])])}}},Ye=K(ie,[["__scopeId","data-v-3d20a5eb"]]);export{Ye as default};
