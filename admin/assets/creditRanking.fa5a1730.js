import{h as a}from"./moment.9709ab41.js";import{c as $}from"./datacenter.5a672933.js";import{u as q}from"./school.87598fd4.js";import{b as z}from"./calcFunc.73c854a6.js";import{_ as L,r as Y,o as d,g as x,w as D,a as i,j as k,i as P,t as h,B as U,h as o,b as t,v as W,c as _,F as R,f as V,n as j,x as E,y as G}from"./index.25d239b2.js";import"./request.e2368599.js";const H={class:"sum_amount"},J={__name:"TableForRank",props:{tableList:{type:Array,default:()=>[]},mode:{type:String,default:"student"}},setup(c){const b={background:"#f6f8fa"};return(s,m)=>{const l=Y("el-table-column"),p=Y("el-table");return d(),x(p,{data:c.tableList,style:{width:"100%"},"header-cell-style":b},{default:D(()=>[i(l,{label:"\u6392\u540D",width:"100",type:"index"}),c.mode=="student"?(d(),x(l,{key:0,prop:"name",label:"\u5B66\u751F\u59D3\u540D",width:"200"})):k("",!0),c.mode=="student"?(d(),x(l,{key:1,prop:"wx_name",label:"\u5BB6\u957F\u59D3\u540D",width:"200"})):k("",!0),i(l,{label:"\u6240\u5728\u73ED\u7EA7",width:"200"},{default:D(({row:n})=>[P(h(U(z)(n.year))+h(n.class)+"\u73ED ",1)]),_:1}),i(l,{prop:"sum_amount",label:"\u65B0\u589E\u5B66\u5206",fixed:"right",align:"center",width:"300"},{default:D(({row:n})=>[o("span",H,h(n.sum_amount),1)]),_:1})]),_:1},8,["data"])}}},O=L(J,[["__scopeId","data-v-3d3aeb62"]]);const B=c=>(E("data-v-f4d69c34"),c=c(),G(),c),Q={class:"study-report-container"},X={class:"sort-wrap"},Z=B(()=>o("div",{class:"title-time"},[o("span",{class:"study-tit"},"\u5B66\u5206\u6392\u884C\u699C")],-1)),ee=B(()=>o("span",{class:"o-char"},"\u5206\u7C7B\uFF1A",-1)),te=["onClick"],ae={key:0,class:"date-picker-wrap"},oe={key:1,class:"date-picker-wrap"},se={class:"data-wrap"},le={class:"flex-start",style:{margin:"18px 0 0 0"}},ne={class:"flex"},re={class:"record-char"},de={__name:"creditRanking",setup(c){const b=[{sortKey:1,sortItem:[{id:"",name:"\u7EFC\u5408"},{id:"daily",name:"\u6BCF\u65E5\u4E00\u5B66"},{id:"weekly",name:"\u6BCF\u5468\u4E00\u505A"},{id:"monthy",name:"\u6BCF\u6708\u4E00\u8BFE"}]},{sortKey:2,sortItem:[{id:2,name:"\u6708\u699C"},{id:1,name:"\u5468\u699C"}]},{sortKey:3,sortItem:[{id:"student",name:"\u5BB6\u957F\u6392\u540D"},{id:"class",name:"\u73ED\u7EA7\u6392\u540D"}]}],s=t(["",2,"student"]),m=t(""),l=t(""),p=t(""),n=t(""),f=t("");t(""),t([]);const K=(e,r)=>{s.value[e-1]=r,v()},g=t(""),M=t(""),A=e=>{n.value=a(e).add(1,"day").format("YYYY-MM-DD"),f.value=a(e).add(7,"day").format("YYYY-MM-DD"),v()},F=e=>{m.value=a(e).format("YYYY-MM-01"),e?p.value=a(e).format("M"):p.value="",l.value=a(m.value).add(1,"month").format("YYYY-MM-DD"),v()},w=t(0),C=t(1),N=e=>{C.value=e,v()},I=t([]),v=async()=>{const e={coin_id:1,school_id:q().schoolInfo.id,limit:10,page:C.value,mode:s.value[2],start_date:s.value[1]==2?m.value:n.value,end_date:s.value[1]==2?l.value:f.value,study_type:s.value[0]},r=await $(e);I.value=r.data,w.value=r.total};return W(()=>{p.value=a().month(),l.value=a().format("YYYY-MM-01"),m.value=a(l.value).subtract(1,"month").format("YYYY-MM-DD"),f.value=a().isoWeekday(0).format("YYYY-MM-DD"),n.value=a(f.value).subtract(6,"day").format("YYYY-MM-DD"),g.value=n.value,M.value=a().subtract(1,"month").format("YYYY-MM"),v()}),(e,r)=>{const S=Y("el-date-picker"),T=Y("el-pagination");return d(),_("div",Q,[o("div",null,[o("div",X,[Z,(d(),_(R,null,V(b,u=>o("div",{class:"sort-sec",key:u.sortKey},[ee,(d(!0),_(R,null,V(u.sortItem,y=>(d(),_("div",{class:j(["lab-item",s.value[u.sortKey-1]==y.id?"active":""]),onClick:ce=>K(u.sortKey,y.id),key:y.id},h(y.name),11,te))),128))])),64)),s.value[1]==1?(d(),_("div",ae,[i(S,{modelValue:g.value,"onUpdate:modelValue":r[0]||(r[0]=u=>g.value=u),onChange:A,type:"week",format:"YYYY \u7B2C ww \u5468",placeholder:"\u9009\u62E9\u5468"},null,8,["modelValue"])])):k("",!0),s.value[1]==2?(d(),_("div",oe,[i(S,{modelValue:M.value,"onUpdate:modelValue":r[1]||(r[1]=u=>M.value=u),type:"month",placeholder:"\u9009\u62E9\u6708",onChange:F},null,8,["modelValue"])])):k("",!0)]),o("div",se,[i(O,{tableList:I.value,mode:s.value[2]},null,8,["tableList","mode"])]),o("div",le,[o("div",ne,[o("span",re,"\u5171"+h(w.value)+"\u6761\u8BB0\u5F55",1),i(T,{background:"","page-size":10,"pager-count":5,layout:"prev, pager, next",total:w.value,onCurrentChange:N},null,8,["total"])])])])])}}},he=L(de,[["__scopeId","data-v-f4d69c34"]]);export{he as default};
