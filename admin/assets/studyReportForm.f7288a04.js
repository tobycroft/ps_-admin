import{_ as R,u as H,b as p,v as T,o as r,c as u,h as e,t as a,x as L,y as N,r as F,C as m,D as v,Q as O,a as w,w as j,B as V,Z as J,$ as ee,F as E,f as M,X as q,i as te,d as ae,k as se,j as B,n as oe}from"./index.dde6a0b4.js";import{a as ce,b as G}from"./datacenter.75bb6fa3.js";import{u as S}from"./school.d695eb63.js";import{_ as K,a as U,b as z,c as W}from"./six_border.bc95b85f.js";import{_ as Q,a as le,b as ne,c as de}from"./medal3.fce23df7.js";import{u as ie}from"./teacher.29683c95.js";import{s as re,z as ue}from"./study.75355a76.js";import{h as $}from"./moment.9709ab41.js";import{g as _e}from"./ak.02252990.js";const X=t=>(L("data-v-4ce2ce80"),t=t(),N(),t),me={class:"all-complete-box flex"},ve={class:"left-box"},he={class:"num"},pe=X(()=>e("span",{class:"per-char"},"%",-1)),ye=X(()=>e("span",{class:"per-char"},"\u5168\u6821\u7D2F\u8BA1\u5B8C\u6210\u6CE8\u518C\u7387",-1)),ge={__name:"PerAllComplete",setup(t){const o=H(),s=()=>{o.push({path:"/CompletionRate"})},l=p(0),n=async()=>{const d={school_id:S().schoolInfo.id},i=await ce(d);if(i){const I=i.parent_count||0,c=i.student_should_count||0;c?l.value=Math.ceil(I/c*100):l.value=100}};return T(()=>{n()}),(d,i)=>(r(),u("div",me,[e("div",ve,[e("span",he,a(l.value),1),pe,ye]),e("div",{class:"look-char",onClick:s},"\u67E5\u770B\u8BE6\u60C5")]))}},fe=R(ge,[["__scopeId","data-v-4ce2ce80"]]);const Y=t=>(L("data-v-0738bdbe"),t=t(),N(),t),$e={class:"grade-class-rank-container"},we={class:"rank-left"},Ie={class:"rank-img",src:K,alt:""},ke={class:"rank-img",src:U,alt:""},Ce={class:"rank-img",src:z,alt:""},De={class:"rank-cic"},Ye=Y(()=>e("img",{class:"six-img",src:W,alt:""},null,-1)),be={class:"rank-num"},xe=Y(()=>e("div",{class:"ranked-tag"},"\u8F83\u4E0A\u6708\u4E0A\u53471\u540D",-1)),Se={class:"right-data-wrap"},Ee={class:"progress-complete"},Me={class:"progress-box"},Ae={class:"flex"},Be={class:"gc-char"},Re=Y(()=>e("span",{class:"cp-char"},"\u672C\u6708\u5B66\u4E60\u5B8C\u6210\u7387",-1)),Fe={class:"progress"},Ve={class:"fire-icon",src:Q,alt:"fire"},Le={class:"per-char"},Ne={class:"data-box flex"},Oe={class:"data-detail-wrap"},Pe=Y(()=>e("span",{class:"data-char"},"\u6570\u636E\u6982\u89C8",-1)),Te={class:"data-item"},je={class:"num-char"},qe=Y(()=>e("div",{class:"char"},"\u5B66\u4E60\u4EBA\u6B21",-1)),Ge={class:"data-item"},Ke={class:"num-char"},Ue=Y(()=>e("div",{class:"char"},"\u5E74\u7EA7\u4EBA\u6570",-1)),ze=q('<div class="data-item" data-v-0738bdbe><div class="num-char" data-v-0738bdbe>0</div><div class="char" data-v-0738bdbe>\u4E0A\u5468\u6392\u540D</div></div><div class="data-item" data-v-0738bdbe><div class="num-char" data-v-0738bdbe>0</div><div class="char" data-v-0738bdbe>\u4E0A\u6708\u6392\u540D</div></div>',2),We={class:"data-item"},Qe={class:"num-char"},Xe=Y(()=>e("div",{class:"char"},"\u6BCF\u65E5\u4E00\u5B66",-1)),Ze={class:"data-item"},He={class:"num-char"},Je=Y(()=>e("div",{class:"char"},"\u6BCF\u5468\u4E00\u505A",-1)),et={class:"data-item"},tt={class:"num-char"},at=Y(()=>e("div",{class:"char nomar"},"\u6BCF\u6708\u4E00\u8BFE",-1)),st={class:"detail-char"},ot={class:"class-item-wrap"},ct={class:"flex"},lt={class:"class-sec"},nt={class:"class-char"},dt={class:"per-char"},it={class:"teacher-sec flex"},rt={class:"teacher-char"},ut=Y(()=>e("span",{class:"teacher-char"},"\u5B66\u4E60\u5B8C\u6210\u7387",-1)),_t={class:"progress-wrap"},mt={class:"count-sec flex"},vt={class:"count-tag"},ht={class:"count-tag"},pt={class:"medal-img",src:le,alt:""},yt={class:"medal-img",src:ne,alt:""},gt={class:"medal-img",src:de,alt:""},ft={class:"no-char"},$t=te("NO: "),wt={class:"no-num"},It={__name:"GradeClassRank",props:{completeItem:{type:Object},completeIndex:{type:Number,default:0},startDate:{type:String,default:""},endDate:{type:String,default:""},studyType:{type:String,default:""}},setup(t){const o=t,s=p([]),l=async h=>{const k={school_id:S().schoolInfo.id,limit:30,page:1,rank_mode:"class",start_date:o.startDate,end_date:o.endDate,study_type:o.studyType,year:h},x=await G(k);s.value=x},n=p(!1),d=h=>{n.value=!n.value,n.value&&l(h)},i=(h,k)=>{const x=ie().teacherList;for(const _ of x)if(_.year==h&&_.class_id==k)return _.name},I=h=>{const k=S().gradeList,_=new Date().getFullYear()-Number(h)+1;let y={};for(const A of k)A.id===_&&(y=A);return y},c=h=>Math.ceil(Number(h)*100);return(h,k)=>{const x=F("el-icon");return r(),u("div",$e,[e("div",we,[m(e("img",Ie,null,512),[[v,t.completeIndex==0]]),m(e("img",ke,null,512),[[v,t.completeIndex==1]]),m(e("img",Ce,null,512),[[v,t.completeIndex==2]]),m(e("div",De,[Ye,e("span",be,a(t.completeIndex+1),1)],512),[[v,t.completeIndex>2]]),xe]),e("div",Se,[e("div",Ee,[e("div",Me,[e("div",Ae,[e("span",Be,a(I(t.completeItem.year).name),1),Re]),e("div",Fe,[e("div",{class:"progress-active",style:O(`width: ${c(t.completeItem.parent_student_ratio)>=100?100:c(t.completeItem.parent_student_ratio)}%`)},null,4),m(e("img",Ve,null,512),[[v,c(t.completeItem.parent_student_ratio)>=100]])])]),e("span",Le,a(c(t.completeItem.parent_student_ratio))+"%",1)]),e("div",Ne,[e("div",Oe,[Pe,e("div",Te,[e("div",je,a(t.completeItem.complete_parent),1),qe]),e("div",Ge,[e("div",Ke,a(t.completeItem.student_num),1),Ue]),ze,e("div",We,[e("div",Qe,a(c(t.completeItem.daily_parent_ratio))+"% ",1),Xe]),e("div",Ze,[e("div",He,a(c(t.completeItem.weekly_parent_ratio))+"% ",1),Je]),e("div",et,[e("div",tt,a(c(t.completeItem.monthy_parent_ratio))+"% ",1),at])]),e("div",{class:"sw-btn",onClick:k[0]||(k[0]=_=>d(t.completeItem.year))},[e("span",st,a(n.value?"\u6536\u8D77":"\u67E5\u770B")+"\u5E74\u7EA7\u5404\u73ED\u8BE6\u60C5",1),w(x,null,{default:j(()=>[m(w(V(J),{class:"arr-icon"},null,512),[[v,n.value]]),m(w(V(ee),{class:"arr-icon"},null,512),[[v,!n.value]])]),_:1})])]),m(e("div",ot,[(r(!0),u(E,null,M(s.value,(_,y)=>(r(),u("div",{class:"class-item",key:y},[e("div",ct,[e("div",lt,[e("span",nt,a(_.class_id)+"\u73ED",1)]),e("span",dt,a(c(_.parent_student_ratio))+"%",1)]),e("div",it,[e("span",rt,"\u73ED\u4E3B\u4EFB\uFF1A"+a(i(_.year,_.class_id)),1),ut]),e("div",_t,[e("div",{class:"progress-item",style:O(`width: ${c(_.parent_student_ratio)}%`)},null,4)]),e("div",mt,[e("div",null,[e("div",vt,"\u5B66\u4E60\u4EBA\u6B21\uFF1A"+a(_.complete_parent),1),e("div",ht,"\u73ED\u7EA7\u4EBA\u6570\uFF1A"+a(_.student_num),1)]),m(e("img",pt,null,512),[[v,y==0]]),m(e("img",yt,null,512),[[v,y==1]]),m(e("img",gt,null,512),[[v,y==2]]),m(e("span",ft,[$t,e("span",wt,a(y+1),1)],512),[[v,y>2]])])]))),128))],512),[[v,n.value]])])])}}},kt=R(It,[["__scopeId","data-v-0738bdbe"]]);function Ct(){const t=p({}),o=p({}),s=async()=>{const d={school_id:S().getSchoolInfo.id,type:"term"},i=await re(d);t.value=i},l=async()=>{const d={school_id:S().getSchoolInfo.id},i=await ue(d);o.value=i};return s(),l(),{studyDashboardCompleteCountRef:t,studyDashboardCompleteDailyRef:o}}const Dt=ae({name:"CompletedAmountOverview",props:{dataSource:{type:Object,default:()=>({})},dataSourceAvg:{type:Object,default:()=>({})}},setup(t){const o=p({total:{title:"\u603B\u8BBF\u95EE\u91CF",icon:"overview_total_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u8BBF\u95EE\u91CF",num:0}},daily:{title:"\u6BCF\u65E5\u4E00\u5B66\u603B\u5B66\u4E60\u91CF",icon:"overview_daily_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u5B66\u4E60\u91CF",num:0}},weekly:{title:"\u6BCF\u5468\u4E00\u505A\u603B\u5B8C\u6210\u91CF",icon:"overview_weekly_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u5B8C\u6210\u91CF",num:0}},monthy:{title:"\u6BCF\u6708\u4E00\u8BFE\u603B\u5B66\u4E60\u91CF",icon:"overview_monthly_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u5B66\u4E60\u91CF",num:0}}}),s=p(t.dataSource),l=p(t.dataSourceAvg);return se(()=>{s.value=t.dataSource,l.value=t.dataSourceAvg,Object.keys(s.value).length>0&&(o.value.total.num=s.value.total_all,o.value.total.tag.num=s.value.all_today,o.value.total.averageDaily.num=Math.ceil(l.value.all_num/l.value.day_num),o.value.daily.num=s.value.total_daily,o.value.daily.tag.num=s.value.daily,o.value.daily.averageDaily.num=Math.ceil(l.value.daily/l.value.day_num),o.value.weekly.num=s.value.total_weekly,o.value.weekly.tag.num=s.value.weekly_today,o.value.weekly.averageDaily.num=Math.ceil(l.value.weekly/l.value.day_num),o.value.monthy.num=s.value.total_monthy,o.value.monthy.tag.num=s.value.monthy_today,o.value.monthy.averageDaily.num=Math.ceil(l.value.monthy/l.value.day_num))}),{overviewListRef:o,getImageUrl:_e}}});const Yt={class:"completed-amount-overview-container"},bt={class:"completed-amount-overview-ul flex"},xt={class:"flex"},St={class:"title-style"},Et={class:"flex-start align-end"},Mt={class:"total-num-style"},At={class:"tag-box flex-center"},Bt={class:"flex-start"},Rt={class:"average-daily-title-style"},Ft={class:"average-daily-num-style"};function Vt(t,o,s,l,n,d){const i=F("el-image"),I=F("el-card");return r(),u("div",Yt,[e("ul",bt,[(r(!0),u(E,null,M(t.overviewListRef,(c,h)=>(r(),u("li",{key:h,class:"completed-amount-overview-li"},[w(I,{class:"el-card-style","body-style":{padding:"0px"}},{default:j(()=>[e("header",xt,[e("p",St,a(c.title),1),w(i,{class:"header-icon-style",src:t.getImageUrl(c.icon+".png")},null,8,["src"])]),e("article",Et,[e("p",Mt,a(c.num),1),e("div",At,[e("p",null,a(c.tag.title),1),e("p",null,a(c.tag.num),1)])]),e("footer",Bt,[e("p",Rt,a(c.averageDaily.title),1),e("p",Ft,a(c.averageDaily.num),1)])]),_:2},1024)]))),128))])])}const Lt=R(Dt,[["render",Vt],["__scopeId","data-v-2b669cee"]]);const b=t=>(L("data-v-48552e86"),t=t(),N(),t),Nt={class:"grade-class-rank-container"},Ot={class:"rank-left"},Pt={class:"rank-img",src:K,alt:""},Tt={class:"rank-img",src:U,alt:""},jt={class:"rank-img",src:z,alt:""},qt={class:"rank-cic"},Gt=b(()=>e("img",{class:"six-img",src:W,alt:""},null,-1)),Kt={class:"rank-num"},Ut=b(()=>e("div",{class:"ranked-tag"},"\u8F83\u4E0A\u6708\u4E0A\u53471\u540D",-1)),zt={class:"right-data-wrap"},Wt={class:"progress-complete"},Qt={class:"progress-box"},Xt={class:"flex"},Zt={class:"gc-char"},Ht=b(()=>e("span",{class:"cp-char"},"\u672C\u6708\u5B66\u4E60\u5B8C\u6210\u7387",-1)),Jt={class:"progress"},ea={class:"fire-icon",src:Q,alt:"fire"},ta={class:"per-char"},aa={class:"data-box flex"},sa={class:"data-detail-wrap"},oa=b(()=>e("span",{class:"data-char"},"\u6570\u636E\u6982\u89C8",-1)),ca={class:"data-item"},la={class:"num-char"},na=b(()=>e("div",{class:"char"},"\u5B66\u4E60\u4EBA\u6B21",-1)),da={class:"data-item"},ia={class:"num-char"},ra=b(()=>e("div",{class:"char"},"\u73ED\u7EA7\u4EBA\u6570",-1)),ua=q('<div class="data-item" data-v-48552e86><div class="num-char" data-v-48552e86>0</div><div class="char" data-v-48552e86>\u4E0A\u5468\u6392\u540D</div></div><div class="data-item" data-v-48552e86><div class="num-char" data-v-48552e86>0</div><div class="char" data-v-48552e86>\u4E0A\u6708\u6392\u540D</div></div>',2),_a={class:"data-item"},ma={class:"num-char"},va=b(()=>e("div",{class:"char"},"\u6BCF\u65E5\u4E00\u5B66",-1)),ha={class:"data-item"},pa={class:"num-char"},ya=b(()=>e("div",{class:"char"},"\u6BCF\u5468\u4E00\u505A",-1)),ga={class:"data-item"},fa={class:"num-char"},$a=b(()=>e("div",{class:"char nomar"},"\u6BCF\u6708\u4E00\u8BFE",-1)),wa={__name:"ClassRankForComplete",props:{completeItem:{type:Object},completeIndex:{type:Number,default:0}},setup(t){const o=l=>{const n=S().gradeList,i=new Date().getFullYear()-Number(l)+1;let I={};for(const c of n)c.id===i&&(I=c);return I},s=l=>Math.ceil(Number(l)*100);return(l,n)=>(r(),u("div",Nt,[e("div",Ot,[m(e("img",Pt,null,512),[[v,t.completeIndex==0]]),m(e("img",Tt,null,512),[[v,t.completeIndex==1]]),m(e("img",jt,null,512),[[v,t.completeIndex==2]]),m(e("div",qt,[Gt,e("span",Kt,a(t.completeIndex+1),1)],512),[[v,t.completeIndex>2]]),Ut]),e("div",zt,[e("div",Wt,[e("div",Qt,[e("div",Xt,[e("span",Zt,a(o(t.completeItem.year).name)+"("+a(t.completeItem.class_id)+")\u73ED",1),Ht]),e("div",Jt,[e("div",{class:"progress-active",style:O(`width: ${s(t.completeItem.parent_student_ratio)>=100?100:s(t.completeItem.parent_student_ratio)}%`)},null,4),m(e("img",ea,null,512),[[v,s(t.completeItem.parent_student_ratio)>=100]])])]),e("span",ta,a(s(t.completeItem.parent_student_ratio))+"%",1)]),e("div",aa,[e("div",sa,[oa,e("div",ca,[e("div",la,a(t.completeItem.complete_parent),1),na]),e("div",da,[e("div",ia,a(t.completeItem.student_num),1),ra]),ua,e("div",_a,[e("div",ma,a(s(t.completeItem.daily_parent_ratio))+"% ",1),va]),e("div",ha,[e("div",pa,a(s(t.completeItem.weekly_parent_ratio))+"% ",1),ya]),e("div",ga,[e("div",fa,a(s(t.completeItem.monthy_parent_ratio))+"% ",1),$a])])])])]))}},Ia=R(wa,[["__scopeId","data-v-48552e86"]]);const Z=t=>(L("data-v-dad81d2d"),t=t(),N(),t),ka={class:"study-report-container"},Ca={class:"all-wrap"},Da={class:"sort-wrap"},Ya={class:"title-time"},ba=Z(()=>e("span",{class:"study-tit"},"\u5B66\u4E60\u5B8C\u6210\u699C",-1)),xa={class:"time-char"},Sa=Z(()=>e("span",{class:"o-char"},"\u5206\u7C7B\uFF1A",-1)),Ea=["onClick"],Ma={key:0,class:"date-picker-wrap"},Aa={key:1,class:"date-picker-wrap"},Ba={key:0,class:"data-wrap"},Ra={key:0},Fa={key:1},Va={__name:"studyReportForm",setup(t){const{studyDashboardCompleteCountRef:o,studyDashboardCompleteDailyRef:s}=Ct(),l=[{sortKey:1,sortItem:[{id:"grade",name:"\u5E74\u6BB5\u6392\u540D"},{id:"class",name:"\u73ED\u7EA7\u6392\u540D"}]},{sortKey:2,sortItem:[{id:"daily",name:"\u6BCF\u65E5\u4E00\u5B66"},{id:"weekly",name:"\u6BCF\u5468\u4E00\u505A"},{id:"monthy",name:"\u6BCF\u6708\u4E00\u8BFE"}]},{sortKey:3,sortItem:[{id:2,name:"\u6708\u699C"},{id:1,name:"\u5468\u699C"}]}],n=p(["grade","daily",2]),d=p(""),i=p(""),I=(f,C)=>{n.value[f-1]=C,f==3&&C==1&&(d.value=$().isoWeek(1).format("YYYY-MM-DD"),i.value=$(d.value).add(7,"day").format("YYYY-MM-DD")),f==3&&C==2&&(d.value=$().format("YYYY-MM-01"),i.value=$(d.value).add(1,"month").format("YYYY-MM-DD")),y()},c=p(""),h=p(""),k=f=>{d.value=$(f).add(1,"day").format("YYYY-MM-DD"),i.value=$(f).add(7,"day").format("YYYY-MM-DD"),y(),console.log(d.value)},x=f=>{d.value=$(f).format("YYYY-MM-01"),i.value=$(d.value).add(1,"month").format("YYYY-MM-DD"),y()},_=p([]),y=async()=>{const f={school_id:S().schoolInfo.id,limit:30,page:1,rank_mode:n.value[0],start_date:d.value,end_date:i.value,study_type:n.value[1]},C=await G(f);_.value=C},A=p("");return T(()=>{A.value=$().format("YYYY\u5E74MM\u6708DD\u65E5"),d.value=$().format("YYYY-MM-01"),i.value=$(d.value).add(1,"month").format("YYYY-MM-DD"),y()}),(f,C)=>{const P=F("el-date-picker");return r(),u("div",ka,[e("div",null,[w(Lt,{dataSource:V(o),dataSourceAvg:V(s)},null,8,["dataSource","dataSourceAvg"]),e("div",Ca,[w(fe)]),e("div",Da,[e("div",Ya,[ba,e("span",xa,"\u66F4\u65B0\u65F6\u95F4\uFF1A"+a(A.value),1)]),(r(),u(E,null,M(l,g=>e("div",{class:"sort-sec",key:g.sortKey},[Sa,(r(!0),u(E,null,M(g.sortItem,D=>(r(),u("div",{class:oe(["lab-item",n.value[g.sortKey-1]==D.id?"active":""]),onClick:La=>I(g.sortKey,D.id),key:D.id},a(D.name),11,Ea))),128))])),64)),n.value[2]==1?(r(),u("div",Ma,[w(P,{modelValue:c.value,"onUpdate:modelValue":C[0]||(C[0]=g=>c.value=g),onChange:k,type:"week",format:"YYYY \u7B2C ww \u5468",placeholder:"\u9009\u62E9\u5468"},null,8,["modelValue"])])):B("",!0),n.value[2]==2?(r(),u("div",Aa,[w(P,{modelValue:h.value,"onUpdate:modelValue":C[1]||(C[1]=g=>h.value=g),type:"month",placeholder:"\u9009\u62E9\u6708",onChange:x},null,8,["modelValue"])])):B("",!0)]),_.value&&_.value.length?(r(),u("div",Ba,[n.value[0]=="grade"?(r(),u("div",Ra,[(r(!0),u(E,null,M(_.value,(g,D)=>(r(),u("div",{class:"mar-wrap",key:D},[w(kt,{completeItem:g,completeIndex:D,startDate:d.value,endDate:i.value,studyType:n.value[1]},null,8,["completeItem","completeIndex","startDate","endDate","studyType"])]))),128))])):B("",!0),n.value[0]=="class"?(r(),u("div",Fa,[(r(!0),u(E,null,M(_.value,(g,D)=>(r(),u("div",{class:"mar-wrap",key:D},[w(Ia,{completeItem:g,completeIndex:D},null,8,["completeItem","completeIndex"])]))),128))])):B("",!0)])):B("",!0)])])}}},za=R(Va,[["__scopeId","data-v-dad81d2d"]]);export{za as default};
