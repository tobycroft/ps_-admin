import{_ as J,r as V,o as v,g as z,w as S,a as d,i as k,t as o,j as H,B as Q,h as e,d as oe,b as r,k as ne,v as X,c as m,C as _,D as p,F as N,f as U,n as G,$ as le,x as K,y as Z,I as j}from"./index.8c7dda5f.js";import{h as b}from"./moment.9709ab41.js";import{c as ce}from"./datacenter.49d1b4ef.js";import{u as W}from"./school.3e6309b7.js";import{b as x}from"./calcFunc.256754f5.js";import{h as de}from"./html2canvas.esm.3d083717.js";import"./request.ccb502ba.js";const ee="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAAVZJREFUSEut1T9Lw0AcxvHvZbAg6OtQcOjiVnByEVycBEGKJgGVtm/ByUE6WFFBqtTByc2lvgMnxakvQBy6VhwcWnOSnDFna5LT3E2B3H3u4Xf/BJ5sIDjCVpMMCNgUkefLOtCyYstIuVKwTXwCDnFP1hAcF0r+KxyKrtzD4cQUX54HtwLrbYjMVFgl30JwmYevLMDtLnTuwb/+6p0Jq+Q7OJzp+FoZ7nrwPoQwabcGN4+woUfIhRXu43Ae428t6L/C6in09uHhGSqHMAq06Y1ghW/jcBF+zpag34TpKXh6gcUD+NDR3BqPF1fDZ0rQrcNSEwKV7mczThwP82QVQSdvQbN3RdpoLXnqBH9OHEtjC1q8FLqQhf87cZJ8Yp9HvwrDacffChzivnSB9nelrMHqbkluRauwSq4eC+uwSt6A6JnTXpDcI2XYQeHl5GkyHGfUrSrnPgH1gneJOCLCfwAAAABJRU5ErkJggg==";const re={class:"sum_amount"},ie={__name:"TableForRank",props:{tableList:{type:Array,default:()=>[]},mode:{type:String,default:"student"},page:{type:Number,default:1},pageSize:{type:Number,default:50}},setup(s){const n={background:"#f6f8fa"};return($,A)=>{const l=V("el-table-column"),a=V("el-table");return v(),z(a,{data:s.tableList,style:{width:"100%"},"header-cell-style":n},{default:S(()=>[d(l,{label:"\u6392\u540D",width:"120",align:"center"},{default:S(c=>[k(o(s.page*s.pageSize+c.$index+1),1)]),_:1}),s.mode=="student"?(v(),z(l,{key:0,prop:"name",label:"\u5B66\u751F\u59D3\u540D",width:"200"})):H("",!0),s.mode=="student"?(v(),z(l,{key:1,prop:"wx_name",label:"\u5BB6\u957F\u59D3\u540D",width:"200"})):H("",!0),d(l,{label:"\u6240\u5728\u73ED\u7EA7",width:"200"},{default:S(({row:c})=>[k(o(Q(x)(c.year))+o(c.class)+"\u73ED ",1)]),_:1}),d(l,{prop:"teacher_name",label:"\u73ED\u4E3B\u4EFB\u59D3\u540D"}),d(l,{prop:"sum_amount",label:"\u65B0\u589E\u5B66\u5206",align:"center",width:"300"},{default:S(({row:c})=>[e("span",re,o(c.sum_amount),1)]),_:1})]),_:1},8,["data"])}}},ue=J(ie,[["__scopeId","data-v-63a47e8f"]]);const _e=oe({name:"Poster",props:{tableList:{type:Array,default:()=>[]},timeArr:{type:Array,default:()=>[]},mode:{type:String,default:"student"}},setup(s,n){const $=W(),A=r(),l=r(""),a=r([]),c=r("student"),t=r(""),u=r(""),C=[{id:"student",name:"\u5BB6\u957F"},{id:"class",name:"\u73ED\u7EA7"}];ne(()=>{A.value=$.getSchoolInfo,A.value.name&&(l.value=A.value.name),a.value=s.timeArr.concat([]),t.value=b(s.timeArr[0]).format("YYYY-MM-DD"),u.value=b(s.timeArr[1]).format("YYYY-MM-DD")});const D=()=>{n.emit("handleClose")},M=y=>{c.value=y,R()},I=(y,f)=>{y?(a.value[f]=b(a.value[f]).format("YYYY-MM-DD"),[t.value,u.value]=a.value,R()):a.value[f]=""},R=()=>{a.value[0]&&a.value[1]&&n.emit("handleSearch",c.value,a.value)},P=()=>{var y=document.querySelector("#posterImg");de(y,{useCORS:!0,allowTaint:!1,scale:5,dpi:300}).then(f=>{const L=f.toDataURL("image/png");T(L)})},T=y=>{let f=document.createElement("a"),L=new MouseEvent("click");f.download="poster",f.href=y,f.dispatchEvent(L)};return X(()=>{t.value=a.value[0],u.value=a.value[1]}),{handleClose:D,App_CalcCurrentGrade_ChineseNumber:x,projectNameRef:l,handleSelectSortItem:M,handleDate:I,downloadPoster:P,search:R,dateArr:a,sortArr:C,selectSortArrRef:c,start_date:t,end_date:u}}}),g=s=>(K("data-v-ff3377e8"),s=s(),Z(),s),pe={class:"poster-box"},ve={class:"poster-show-box"},he={class:"poster-box-left"},me={class:"poster-header"},fe={class:"header-content"},be={class:"school-name"},Ae={class:"time"},ge={class:"poster-content"},ye={class:"table"},Se={class:"table-th"},ke=g(()=>e("span",{class:"ranking"},"\u5E8F\u53F7",-1)),we={class:"student-name"},Ye={class:"parent-name"},$e=g(()=>e("span",{class:"class-name"},"\u6240\u5728\u73ED\u7EA7",-1)),Ce={class:"teacher-name"},De=g(()=>e("span",{class:"score"},"\u7D2F\u8BA1\u5B66\u5206",-1)),Re={class:"table-body"},Ve={class:"ranking-td"},Me={class:"class-name"},Ie={class:"score-td"},Le={class:"poster-box-right"},Be=g(()=>e("div",{class:"right-header"},[e("div",{class:"icon"}),e("div",{class:"title"},"\u597D\u5B66\u5BB6\u957F\u7EA2\u699C")],-1)),Ne={class:"check-box"},Ue={class:"choose-box"},Ee={class:"date-box"},Fe=g(()=>e("div",{class:"o-char"},"\u9009\u62E9\u65F6\u95F4",-1)),He={class:"date-picker-wrap"},Pe=g(()=>e("div",{class:"connect"},"-",-1)),Te={class:"sort-sec"},qe=g(()=>e("div",{class:"o-char"},"\u9009\u62E9\u5BF9\u8C61",-1)),ze=["onClick"],Qe={class:"posterImg",id:"posterImg"},Ge={class:"poster-header"},Je={class:"header-content"},Oe={class:"school-name"},je={class:"time"},Xe={class:"poster-content"},Ke={class:"table"},Ze={class:"table-th"},We=g(()=>e("span",{class:"ranking"},"\u5E8F\u53F7",-1)),xe={class:"student-name"},es={class:"parent-name"},ss=g(()=>e("span",{class:"class-name"},"\u6240\u5728\u73ED\u7EA7",-1)),ts={class:"teacher-name"},as=g(()=>e("span",{class:"score"},"\u7D2F\u8BA1\u5B66\u5206",-1)),os={class:"table-body"},ns={class:"ranking-td"},ls={class:"class-name"},cs={class:"score-td"};function ds(s,n,$,A,l,a){const c=V("el-date-picker");return v(),m("div",{class:"poster-wrap",onClick:n[5]||(n[5]=le((...t)=>s.handleClose&&s.handleClose(...t),["self"]))},[e("div",pe,[e("div",ve,[e("div",he,[e("div",me,[e("div",fe,[e("div",be,o(s.projectNameRef),1),e("div",Ae,"["+o(s.start_date)+"-"+o(s.end_date)+"]",1)])]),e("div",ge,[e("div",ye,[e("div",Se,[ke,_(e("span",we,"\u5B66\u751F\u59D3\u540D",512),[[p,s.selectSortArrRef=="student"]]),_(e("span",Ye,"\u5BB6\u957F\u59D3\u540D",512),[[p,s.selectSortArrRef=="student"]]),$e,_(e("span",Ce,"\u73ED\u4E3B\u4EFB\u59D3\u540D",512),[[p,s.selectSortArrRef=="class"]]),De]),e("div",Re,[(v(!0),m(N,null,U(s.tableList,(t,u)=>(v(),m("div",{class:"table-tr",key:u},[e("span",Ve,o(u+1),1),_(e("span",{class:"student-name"},o(t.name),513),[[p,s.selectSortArrRef=="student"]]),_(e("span",{class:"parent-name"},o(t.wx_name),513),[[p,s.selectSortArrRef=="student"]]),e("span",Me,o(s.App_CalcCurrentGrade_ChineseNumber(t.year))+o(t.class)+"\u73ED",1),_(e("span",{class:"teacher-name"},o(t.teacher_name),513),[[p,s.selectSortArrRef=="class"]]),e("span",Ie,o(t.sum_amount),1)]))),128))])])])]),e("div",Le,[Be,e("div",Ne,[e("div",Ue,[e("div",Ee,[Fe,e("div",He,[d(c,{modelValue:s.dateArr[0],"onUpdate:modelValue":n[0]||(n[0]=t=>s.dateArr[0]=t),type:"date",placeholder:"\u5F00\u59CB\u65E5\u671F",onChange:n[1]||(n[1]=t=>{s.handleDate(t,0)})},null,8,["modelValue"]),Pe,d(c,{modelValue:s.dateArr[1],"onUpdate:modelValue":n[2]||(n[2]=t=>s.dateArr[1]=t),type:"date",placeholder:"\u7ED3\u675F\u65E5\u671F",onChange:n[3]||(n[3]=t=>{s.handleDate(t,1)})},null,8,["modelValue"])])]),e("div",Te,[qe,(v(!0),m(N,null,U(s.sortArr,(t,u)=>(v(),m("div",{class:G(["lab-item",s.selectSortArrRef==t.id?"active":""]),onClick:C=>s.handleSelectSortItem(t.id),key:u},o(t.name),11,ze))),128))])]),e("div",{class:"btn-box",onClick:n[4]||(n[4]=(...t)=>s.downloadPoster&&s.downloadPoster(...t))},"\u4E0B\u8F7D\u56FE\u7247")])])])]),e("div",Qe,[e("div",Ge,[e("div",Je,[e("div",Oe,o(s.projectNameRef),1),e("div",je,"["+o(s.start_date)+"-"+o(s.end_date)+"]",1)])]),e("div",Xe,[e("div",Ke,[e("div",Ze,[We,_(e("span",xe,"\u5B66\u751F\u59D3\u540D",512),[[p,s.selectSortArrRef=="student"]]),_(e("span",es,"\u5BB6\u957F\u59D3\u540D",512),[[p,s.selectSortArrRef=="student"]]),ss,_(e("span",ts,"\u73ED\u4E3B\u4EFB\u59D3\u540D",512),[[p,s.selectSortArrRef=="class"]]),as]),e("div",os,[(v(!0),m(N,null,U(s.tableList,(t,u)=>(v(),m("div",{class:"table-tr",key:u},[e("span",ns,o(u+1),1),_(e("span",{class:"student-name"},o(t.name),513),[[p,s.selectSortArrRef=="student"]]),_(e("span",{class:"parent-name"},o(t.wx_name),513),[[p,s.selectSortArrRef=="student"]]),e("span",ls,o(s.App_CalcCurrentGrade_ChineseNumber(t.year))+o(t.class)+"\u73ED",1),_(e("span",{class:"teacher-name"},o(t.teacher_name),513),[[p,s.selectSortArrRef=="class"]]),e("span",cs,o(t.sum_amount),1)]))),128))])])])])])}const rs=J(_e,[["render",ds],["__scopeId","data-v-ff3377e8"]]);const Y=s=>(K("data-v-3ed8e638"),s=s(),Z(),s),is={class:"study-report-container"},us={key:0,class:"pre-wrap"},_s={class:"sort-wrap"},ps=Y(()=>e("div",{class:"title-time"},[e("span",{class:"study-tit"},"\u5B66\u5206\u8868\u5F70\u67E5\u8BE2")],-1)),vs={class:"check-box"},hs={class:"choose-box"},ms={class:"sort-sec"},fs=Y(()=>e("span",{class:"o-char"},"\u8868\u5F70\u5BF9\u8C61\uFF1A",-1)),bs=["onClick"],As={src:ee,alt:""},gs={class:"date-box"},ys=Y(()=>e("span",{class:"o-char"},"\u9009\u62E9\u65F6\u95F4\uFF1A",-1)),Ss={class:"date-picker-wrap"},ks=Y(()=>e("div",{class:"connect"},"-",-1)),ws={class:"btn-box"},Ys=k("\u91CD\u7F6E"),$s=k("\u67E5\u8BE2"),Cs={key:1,class:"suf-wrap"},Ds={class:"sort-wrap"},Rs=Y(()=>e("div",{class:"title-time"},[e("span",{class:"study-tit"},"\u5B66\u5206\u8868\u5F70\u67E5\u8BE2")],-1)),Vs={class:"check-box"},Ms={class:"choose-box"},Is={class:"sort-sec"},Ls=Y(()=>e("span",{class:"o-char"},"\u8868\u5F70\u5BF9\u8C61\uFF1A",-1)),Bs=["onClick"],Ns={src:ee,alt:""},Us={class:"date-box"},Es=Y(()=>e("span",{class:"o-char"},"\u9009\u62E9\u65F6\u95F4\uFF1A",-1)),Fs={class:"date-picker-wrap"},Hs=Y(()=>e("div",{class:"connect"},"-",-1)),Ps={class:"btn-box"},Ts=k("\u91CD\u7F6E"),qs=k("\u67E5\u8BE2"),zs={class:"poster-btn"},Qs=k("\u751F\u6210\u6D77\u62A5"),Gs={class:"data-wrap"},Js={class:"flex-start",style:{margin:"18px 0 0 0"}},Os={class:"flex"},js={class:"record-char"},Xs={__name:"creditRanking2",setup(s){const n=[{id:"student",name:"\u5BB6\u957F"},{id:"class",name:"\u73ED\u7EA7"}];r(!0);const $=r(!1),A=r("student"),l=r("student"),a=r([]),c=r(""),t=r(""),u=r(0),C=r(50),D=r(1),M=r([]),I=r(!1),R=w=>{l.value=w},P=()=>{I.value=!0},T=()=>{I.value=!1},y=()=>{c.value=b(a.value[0]).format("YYYY-MM-DD"),t.value=b(a.value[1]).format("YYYY-MM-DD"),E(),$.value=!0},f=()=>{A.value=l.value,c.value=b(a.value[0]).format("YYYY-MM-DD"),t.value=b(a.value[1]).format("YYYY-MM-DD"),E()},L=(w,h)=>{l.value=w,[c.value,t.value]=h,E()},O=()=>{a.value[0]=b().format("YYYY-MM-DD"),a.value[1]=b().format("YYYY-MM-DD"),c.value="",t.value="",D.value=1,l.value="student",A.value="student"},se=w=>{D.value=w,E()},E=async()=>{const w={coin_id:1,school_id:W().schoolInfo.id,limit:C.value,page:D.value,mode:l.value,start_date:c.value,end_date:t.value,study_type:""},h=await ce(w);M.value=h.data,u.value=h.total};return X(()=>{a.value[0]=b().format("YYYY-MM-DD"),a.value[1]=b().format("YYYY-MM-DD")}),(w,h)=>{const F=V("el-date-picker"),B=V("el-button"),te=V("el-pagination");return v(),m("div",is,[$.value?H("",!0):(v(),m("div",us,[e("div",_s,[ps,e("div",vs,[e("div",hs,[e("div",ms,[fs,(v(),m(N,null,U(n,(i,q)=>e("div",{class:G(["lab-item",l.value==i.id?"active":""]),onClick:ae=>R(i.id),key:q},[k(o(i.name)+" ",1),_(e("img",As,null,512),[[p,l.value==i.id]])],10,bs)),64))]),e("div",gs,[ys,e("div",Ss,[d(F,{modelValue:a.value[0],"onUpdate:modelValue":h[0]||(h[0]=i=>a.value[0]=i),type:"date",placeholder:"\u5F00\u59CB\u65E5\u671F"},null,8,["modelValue"]),ks,d(F,{modelValue:a.value[1],"onUpdate:modelValue":h[1]||(h[1]=i=>a.value[1]=i),type:"date",placeholder:"\u7ED3\u675F\u65E5\u671F"},null,8,["modelValue"])])])]),e("div",ws,[d(B,{onClick:O},{default:S(()=>[Ys]),_:1}),d(B,{type:"primary",icon:Q(j),onClick:y},{default:S(()=>[$s]),_:1},8,["icon"])])])])])),$.value?(v(),m("div",Cs,[e("div",Ds,[Rs,e("div",Vs,[e("div",Ms,[e("div",Is,[Ls,(v(),m(N,null,U(n,(i,q)=>e("div",{class:G(["lab-item",l.value==i.id?"active":""]),onClick:ae=>R(i.id),key:q},[k(o(i.name)+" ",1),_(e("img",Ns,null,512),[[p,l.value==i.id]])],10,Bs)),64))]),e("div",Us,[Es,e("div",Fs,[d(F,{modelValue:a.value[0],"onUpdate:modelValue":h[2]||(h[2]=i=>a.value[0]=i),type:"date",placeholder:"\u5F00\u59CB\u65E5\u671F"},null,8,["modelValue"]),Hs,d(F,{modelValue:a.value[1],"onUpdate:modelValue":h[3]||(h[3]=i=>a.value[1]=i),type:"date",placeholder:"\u7ED3\u675F\u65E5\u671F"},null,8,["modelValue"])])])]),e("div",Ps,[d(B,{onClick:O},{default:S(()=>[Ts]),_:1}),d(B,{type:"primary",icon:Q(j),onClick:f},{default:S(()=>[qs]),_:1},8,["icon"])]),e("div",zs,[d(B,{type:"primary",onClick:P},{default:S(()=>[Qs]),_:1})])])]),e("div",Gs,[d(ue,{tableList:M.value,mode:A.value,page:D.value-1,pageSize:C.value},null,8,["tableList","mode","page","pageSize"])]),e("div",Js,[e("div",Os,[e("span",js,"\u5171"+o(u.value)+"\u6761\u8BB0\u5F55",1),_(d(te,{background:"","page-size":C.value,"pager-count":5,layout:"prev, pager, next",total:u.value,onCurrentChange:se},null,8,["page-size","total"]),[[p,C.value]])])])])):H("",!0),_(d(rs,{tableList:M.value,onHandleClose:T,mode:A.value,timeArr:a.value,onHandleSearch:L},null,8,["tableList","mode","timeArr"]),[[p,I.value]])])}}},at=J(Xs,[["__scopeId","data-v-3ed8e638"]]);export{at as default};
