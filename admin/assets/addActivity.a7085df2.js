import{_ as C,V as S,b as y,I as N,v as R,u as U,r as l,o as E,c as P,a,w as d,h as r,i as _,x as B,y as G}from"./index.7c6bf0e2.js";import{u as p}from"./school.2813aabf.js";import{h as b}from"./moment.9709ab41.js";import{a as L,b as T,c as j}from"./activity.d76792cc.js";import{b as z}from"./notice.9faa074f.js";const F=i=>(B("data-v-b275e644"),i=i(),G(),i),H={class:"notice-add-view-container"},J=F(()=>r("div",{class:"card-header"},[r("span",null,"\u7F16\u8F91\u6D3B\u52A8")],-1)),K={class:"flex-center",style:{"padding-top":"20px"}},O={class:"flex",style:{width:"560px"}},Q=_("- "),W=_("\u7ACB\u5373\u4E0B\u53D1\u63D0\u9192"),X=_("\u91CD\u7F6E"),Z=_("\u5B8C\u6210"),$={__name:"addActivity",setup(i){const e=S({title:"",content:"",start_date:"",end_date:"",address:""}),c=y(0),A=async()=>{const o={id:c.value},t=await L(o);!t||(e.title=t.title,e.content=t.content,e.address=t.address,e.start_date=t.start_date,e.end_date=t.end_date)},m=N();R(()=>{m.query.id&&(c.value=m.query.id,A())});const w=async()=>{const o={school_id:p().schoolInfo.id,grade_id:0,class_id:0,slogan:"",title:e.title,content:e.content,discription:"",location:e.address,address:e.address,location_x:0,location_y:0,location_area:0,img:"",bg_img:"",head_img:"",show_date:b().format("YYYY-MM-DD"),start_date:e.start_date,end_date:e.end_date};return await T(o)},x=async()=>{const o={id:c.value,school_id:p().schoolInfo.id,grade_id:0,class_id:0,slogan:"",title:e.title,content:e.content,discription:"",location:e.address,address:e.address,location_x:0,location_y:0,location_area:0,img:"",bg_img:"",head_img:"",show_date:b().format("YYYY-MM-DD"),start_date:e.start_date,end_date:e.end_date};return await j(o)},V=async o=>{const t={receiver:"school",type:"activity",year:0,class_id:0,combi_id:o,title:e.title,content:e.content,school_id:p().schoolInfo.id,teacher_id:e.teacher_id||0};await z(t)},f=y(!1),g=o=>{f.value=o},Y=()=>{e.title="",e.content="",e.address="",e.start_date="",e.end_date=""},I=U(),k=async()=>{if(c.value)await x();else{const o=await w();f.value&&await V(o)}I.push({path:"/activityAddSuccess"})};return(o,t)=>{const u=l("el-input"),n=l("el-form-item"),h=l("el-date-picker"),q=l("el-checkbox"),v=l("el-button"),M=l("el-form"),D=l("el-card");return E(),P("div",H,[a(D,{class:"box-card"},{header:d(()=>[J]),default:d(()=>[r("div",K,[a(M,{"label-position":"left","label-width":"100px",model:e,style:{width:"560px"}},{default:d(()=>[a(n,{label:"\u6D3B\u52A8\u6807\u9898\uFF1A"},{default:d(()=>[a(u,{modelValue:e.title,"onUpdate:modelValue":t[0]||(t[0]=s=>e.title=s),placeholder:"\u8BF7\u8F93\u5165\u6D3B\u52A8\u6807\u9898"},null,8,["modelValue"])]),_:1}),a(n,{label:"\u6D3B\u52A8\u65F6\u95F4\uFF1A"},{default:d(()=>[r("div",O,[a(h,{modelValue:e.start_date,"onUpdate:modelValue":t[1]||(t[1]=s=>e.start_date=s),type:"datetime","value-format":"YYYY-MM-DD",placeholder:"\u8BF7\u9009\u62E9\u6D3B\u52A8\u5F00\u59CB\u65F6\u95F4"},null,8,["modelValue"]),Q,a(h,{modelValue:e.end_date,"onUpdate:modelValue":t[2]||(t[2]=s=>e.end_date=s),"value-format":"YYYY-MM-DD",type:"datetime",placeholder:"\u8BF7\u9009\u62E9\u6D3B\u52A8\u7ED3\u675F\u65F6\u95F4"},null,8,["modelValue"])])]),_:1}),a(n,{label:"\u6D3B\u52A8\u5730\u70B9\uFF1A"},{default:d(()=>[a(u,{modelValue:e.address,"onUpdate:modelValue":t[3]||(t[3]=s=>e.address=s),placeholder:"\u8BF7\u8F93\u5165\u6D3B\u52A8\u5730\u70B9"},null,8,["modelValue"])]),_:1}),a(n,{label:"\u6D3B\u52A8\u5185\u5BB9\uFF1A"},{default:d(()=>[a(u,{type:"textarea",rows:4,modelValue:e.content,"onUpdate:modelValue":t[4]||(t[4]=s=>e.content=s)},null,8,["modelValue"])]),_:1}),a(n,null,{default:d(()=>[a(q,{onChange:g},{default:d(()=>[W]),_:1})]),_:1}),a(n,null,{default:d(()=>[a(v,{onClick:Y},{default:d(()=>[X]),_:1}),a(v,{type:"primary",onClick:k},{default:d(()=>[Z]),_:1})]),_:1})]),_:1},8,["model"])])]),_:1})])}}},se=C($,[["__scopeId","data-v-b275e644"],["__file","E:/work/parents_school_institution_pc/src/views/activity/addActivity/addActivity.vue"]]);export{se as default};
