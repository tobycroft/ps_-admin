import{h as s}from"./moment.9709ab41.js";import{c as T}from"./datacenter.0540f15f.js";import{u as $}from"./school.540d18cf.js";import{b as q}from"./handleView.c41e48c4.js";import{_ as V,r as Y,o as i,g as z,w as g,a as l,i as P,t as h,B as U,h as o,b as t,v as W,c as _,F as I,f as R,j as S,n as j,x as E,y as G}from"./index.383e0bd5.js";import"./request.f471e7fa.js";const H={class:"sum_amount"},J={__name:"TableForRank",props:{tableList:{type:Array,default:()=>[]}},setup(u){const b={background:"#f6f8fa"};return(r,p)=>{const a=Y("el-table-column"),m=Y("el-table");return i(),z(m,{data:u.tableList,style:{width:"100%"},"header-cell-style":b},{default:g(()=>[l(a,{label:"\u6392\u540D",width:"100",type:"index"}),l(a,{prop:"name",label:"\u5B66\u751F\u59D3\u540D",width:"200"}),l(a,{prop:"wx_name",label:"\u5BB6\u957F\u59D3\u540D",width:"200"}),l(a,{label:"\u6240\u5728\u73ED\u7EA7",width:"200"},{default:g(({row:c})=>[P(h(U(q)(c.year))+"\u5E74\u7EA7"+h(c.class)+"\u73ED ",1)]),_:1}),l(a,{prop:"teacher_name",label:"\u73ED\u4E3B\u4EFB\u59D3\u540D",width:"480"}),l(a,{prop:"sum_amount",label:"\u7D2F\u8BA1\u5B66\u5206",fixed:"right",align:"center",width:"300"},{default:g(({row:c})=>[o("span",H,h(c.sum_amount),1)]),_:1})]),_:1},8,["data"])}}},O=V(J,[["__scopeId","data-v-ec3b1e2d"]]);const L=u=>(E("data-v-892e6c95"),u=u(),G(),u),Q={class:"study-report-container"},X={class:"sort-wrap"},Z=L(()=>o("div",{class:"title-time"},[o("span",{class:"study-tit"},"\u5B66\u5206\u6392\u884C\u699C")],-1)),ee=L(()=>o("span",{class:"o-char"},"\u5206\u7C7B\uFF1A",-1)),te=["onClick"],ae={key:0,class:"date-picker-wrap"},oe={key:1,class:"date-picker-wrap"},se={class:"data-wrap"},le={class:"flex-start",style:{margin:"18px 0 0 0"}},ne={class:"flex"},re={class:"record-char"},ce={__name:"creditRanking",setup(u){const b=[{sortKey:1,sortItem:[{id:"",name:"\u7EFC\u5408"},{id:"daily",name:"\u6BCF\u65E5\u4E00\u5B66"},{id:"weekly",name:"\u6BCF\u5468\u4E00\u505A"},{id:"monthy",name:"\u6BCF\u6708\u4E00\u8BFE"}]},{sortKey:2,sortItem:[{id:2,name:"\u6708\u699C"},{id:1,name:"\u5468\u699C"}]}],r=t(["",2]),p=t(""),a=t(""),m=t(""),c=t(""),f=t("");t(""),t([]);const B=(e,n)=>{r.value[e-1]=n,v()},w=t(""),M=t(""),A=e=>{c.value=s(e).add(1,"day").format("YYYY-MM-DD"),f.value=s(e).add(7,"day").format("YYYY-MM-DD"),v()},F=e=>{p.value=s(e).format("YYYY-MM-01"),e?m.value=s(e).format("M"):m.value="",a.value=s(p.value).add(1,"month").format("YYYY-MM-DD"),v()},k=t(0),x=t(1),K=e=>{x.value=e,v()},D=t([]),v=async()=>{const e={coin_id:1,school_id:$().schoolInfo.id,limit:10,page:x.value,start_date:r.value[1]==2?p.value:c.value,end_date:r.value[1]==2?a.value:f.value,study_type:r.value[0]},n=await T(e);D.value=n.data,k.value=n.total};return W(()=>{m.value=s().month(),a.value=s().format("YYYY-MM-01"),p.value=s(a.value).subtract(1,"month").format("YYYY-MM-DD"),f.value=s().isoWeekday(0).format("YYYY-MM-DD"),c.value=s(f.value).subtract(6,"day").format("YYYY-MM-DD"),v()}),(e,n)=>{const C=Y("el-date-picker"),N=Y("el-pagination");return i(),_("div",Q,[o("div",null,[o("div",X,[Z,(i(),_(I,null,R(b,d=>o("div",{class:"sort-sec",key:d.sortKey},[ee,(i(!0),_(I,null,R(d.sortItem,y=>(i(),_("div",{class:j(["lab-item",r.value[d.sortKey-1]==y.id?"active":""]),onClick:de=>B(d.sortKey,y.id),key:y.id},h(y.name),11,te))),128))])),64)),r.value[1]==1?(i(),_("div",ae,[l(C,{modelValue:w.value,"onUpdate:modelValue":n[0]||(n[0]=d=>w.value=d),onChange:A,type:"week",format:"YYYY \u7B2C ww \u5468",placeholder:"\u9009\u62E9\u5468"},null,8,["modelValue"])])):S("",!0),r.value[1]==2?(i(),_("div",oe,[l(C,{modelValue:M.value,"onUpdate:modelValue":n[1]||(n[1]=d=>M.value=d),type:"month",placeholder:"\u9009\u62E9\u6708",onChange:F},null,8,["modelValue"])])):S("",!0)]),o("div",se,[l(O,{tableList:D.value},null,8,["tableList"])]),o("div",le,[o("div",ne,[o("span",re,"\u5171"+h(k.value)+"\u6761\u8BB0\u5F55",1),l(N,{background:"","page-size":10,"pager-count":5,layout:"prev, pager, next",total:k.value,onCurrentChange:K},null,8,["total"])])])])])}}},he=V(ce,[["__scopeId","data-v-892e6c95"]]);export{he as default};
