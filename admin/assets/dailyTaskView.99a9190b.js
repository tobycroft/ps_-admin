import{_ as R,b as u,v as G,r as w,o,c,h as s,a as p,w as h,n as Y,F as g,f as S,B as $,g as M,j as K,i as j,t as n,C as T,D as F,x as O,y as P}from"./index.5b3a681f.js";import{_ as U,a as W}from"./edit_icon.ad516265.js";import{S as z,_ as J}from"./StudyCalendar.416b395f.js";import{u as B}from"./school.2f952714.js";import{r as Q,d as X}from"./study.44c6408c.js";import{h as m}from"./moment.9709ab41.js";import{g as Z}from"./ak.02252990.js";import{E as ss}from"./EveryDayDetail.fc7082c6.js";import"./week_theme_tag.86d76f8c.js";const l=v=>(O("data-v-d31a648d"),v=v(),P(),v),ts={style:{display:"flex","justify-content":"space-between"}},es={class:"box-card"},as={class:"card-header"},os=l(()=>s("span",{style:{"white-space":"nowrap"}},"\u6240\u5C5E\u5E74\u7EA7\uFF1A",-1)),ns={class:"grade-btn-wrap"},ds=j("\u5168\u90E8"),ls={class:"task-wrap"},cs={class:"date-char"},is={class:"date"},rs={class:"week"},_s={class:"add-wrap"},us=["src"],ps=l(()=>s("span",null,"\u70B9\u51FB\u6DFB\u52A0\u5185\u5BB9",-1)),hs={class:"type"},vs={class:"type yellow"},ys={class:"date-char"},ms={class:"date"},ks={class:"week"},fs={class:"tag-wrap"},ws={class:"content"},gs={class:"flex"},Ss=["onClick"],bs=l(()=>s("img",{class:"icon",src:W,alt:""},null,-1)),Cs=l(()=>s("span",{class:"char"},"\u5220\u9664",-1)),Ds=[bs,Cs],Is=l(()=>s("div",{class:"btn"},[s("img",{class:"icon",src:U,alt:""}),s("span",{class:"char"},"\u7F16\u8F91")],-1)),xs=["onClick"],Vs=l(()=>s("img",{class:"icon",src:J,alt:""},null,-1)),Ys=l(()=>s("span",{class:"char blue"},"\u67E5\u770B",-1)),$s=[Vs,Ys],Ms={__name:"dailyTaskView",setup(v){const q=B().gradeList,i=u(m().format("YYYY-MM-DD HH:mm:ss")),r=u(null),_=u([]),k=async()=>{const e={type:"daily",date:i.value,grade_id:r.value},a=await Q(e);_.value=a.filter(d=>!d.is_fobid)};G(()=>{k()});const A=e=>{i.value=m(e).format("YYYY-MM-DD HH:mm:ss"),k()},b=e=>{r.value=e,k()},C=e=>m(e).format("MM-DD"),D=e=>{const a=m(e).isoWeekday();return["","\u5468\u4E00","\u5468\u4E8C","\u5468\u4E09","\u5468\u56DB","\u5468\u4E94","\u5468\u516D","\u5468\u65E5"][a]},E=async(e,a)=>{const d={school_id:B().schoolInfo.id,study_id:e,fobid:!0};await X(d),_.value.splice(a,1)},H={konwStore:"/knowStore?type=daily",customKnow:"/customKnow?type=daily",addContent:"/createTask?type=daily",remindSetting:"/remindSetting"},f=u(!1),I=u(0),L=e=>{I.value=e,f.value=!0};return(e,a)=>{const d=w("el-button"),x=w("router-link"),N=w("el-drawer");return o(),c("div",null,[s("div",ts,[p(z,{onEmitDate:A,pathObj:H}),s("div",es,[s("div",as,[os,s("div",ns,[p(d,{class:Y(["button",{active:r.value==null}]),text:"",onClick:a[0]||(a[0]=t=>b(null))},{default:h(()=>[ds]),_:1},8,["class"]),(o(!0),c(g,null,S($(q),t=>(o(),M(d,{onClick:V=>b(t.id),class:Y(["button",{active:r.value==t.id}]),text:"",key:t.id},{default:h(()=>[j(n(t.name),1)]),_:2},1032,["onClick","class"]))),128))])]),s("div",ls,[!_.value||!_.value.length?(o(),M(x,{key:0,to:`/addContent?grade=${r.value}&date=${i.value}&type=daily`,class:"no-task-status"},{default:h(()=>[s("div",cs,[s("span",is,n(C(i.value)),1),s("span",rs,n(D(i.value)),1)]),s("div",_s,[s("img",{class:"add-img",src:$(Z)("content_add_icon.png"),alt:"\u6DFB\u52A0"},null,8,us),ps])]),_:1},8,["to"])):K("",!0),(o(!0),c(g,null,S(_.value,(t,V)=>(o(),c("div",{class:"task-item",key:t.id},[T(s("div",hs,"\u77E5\u8BC6\u5E93",512),[[F,t.is_custom===0]]),T(s("div",vs,"\u81EA\u5B9A\u4E49",512),[[F,t.is_custom==1]]),s("div",ys,[s("span",ms,n(C(t.show_date)),1),s("span",ks,n(D(t.show_date)),1)]),s("h3",null,n(t.title),1),s("div",fs,[(o(!0),c(g,null,S(t.common_tag,y=>(o(),c("div",{class:"yellow tag",key:y.id},n(y.name),1))),128))]),s("p",ws,n(t.slogan),1),s("div",gs,[s("div",{class:"btn",onClick:y=>E(t.study_id,V)},Ds,8,Ss),p(x,{to:`/createTask?type=daily&id=${t.id}&study_id=${t.study_id}`},{default:h(()=>[Is]),_:2},1032,["to"]),s("div",{class:"btn",onClick:y=>L(t.id)},$s,8,xs)])]))),128))])])]),p(N,{modelValue:f.value,"onUpdate:modelValue":a[1]||(a[1]=t=>f.value=t),"with-header":!1},{default:h(()=>[p(ss,{lookStudyId:I.value},null,8,["lookStudyId"])]),_:1},8,["modelValue"])])}}},Ns=R(Ms,[["__scopeId","data-v-d31a648d"]]);export{Ns as default};
