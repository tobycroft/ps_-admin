import{_ as V,u as se,b as h,v as z,o as c,c as n,h as t,t as a,x as P,y as L,r as j,C as s,D as l,n as K,B as F,P as w,j as v,a as T,w as le,Y as oe,Z as ce,F as B,f as R,i as ne,d as ie,k as de,g as re}from"./index.e312668c.js";import{a as ue,b as W}from"./datacenter.40a2f085.js";import{u as U}from"./school.2bc75e1f.js";import{_ as S,a as me,b as _e,c as he}from"./medal3.a026bfe8.js";import{u as ye}from"./teacher.fc4634a8.js";import{h as Z}from"./handleView.50242d16.js";import{s as ve,A as pe}from"./study.cf6397f3.js";import{h as $}from"./moment.9709ab41.js";import{g as ge}from"./ak.02252990.js";import{_ as fe}from"./nodata_status.b4bc20a4.js";import"./request.1668cb5f.js";const H=e=>(P("data-v-4ce2ce80"),e=e(),L(),e),ke={class:"all-complete-box flex"},Ie={class:"left-box"},$e={class:"num"},we=H(()=>t("span",{class:"per-char"},"%",-1)),xe=H(()=>t("span",{class:"per-char"},"\u5168\u6821\u7D2F\u8BA1\u5B8C\u6210\u6CE8\u518C\u7387",-1)),Ce={__name:"PerAllComplete",setup(e){const o=se(),r=()=>{o.push({path:"/CompletionRate"})},d=h(0),f=async()=>{const u={school_id:U().schoolInfo.id},m=await ue(u);if(m){const y=m.parent_count||0,k=m.student_should_count||0;k?d.value=Math.ceil(y/k*100):d.value=100}};return z(()=>{f()}),(u,m)=>(c(),n("div",ke,[t("div",Ie,[t("span",$e,a(d.value),1),we,xe]),t("div",{class:"look-char",onClick:r},"\u67E5\u770B\u8BE6\u60C5")]))}},De=V(Ce,[["__scopeId","data-v-4ce2ce80"]]),J="/admin/images/rank1.png",Q="/admin/images/rank2.png",X="/admin/images/rank3.png",ee="/admin/images/six_border.png";const A=e=>(P("data-v-b3cb282b"),e=e(),L(),e),be={class:"grade-class-rank-container"},Te={class:"rank-left"},Ye={class:"rank-img",src:J,alt:""},Me={class:"rank-img",src:Q,alt:""},Se={class:"rank-img",src:X,alt:""},Ae={class:"rank-cic"},Ee=A(()=>t("img",{class:"six-img",src:ee,alt:""},null,-1)),Be={class:"rank-num"},Re={class:"right-data-wrap"},Fe={class:"progress-complete"},Ve={class:"progress-box"},Ne={class:"flex"},Ue={class:"gc-char"},Pe={class:"cp-char"},Le={key:0,class:"progress"},Oe={class:"fire-icon",src:S,alt:"fire"},je={key:1,class:"progress"},Ke={class:"fire-icon",src:S,alt:"fire"},qe={class:"progress"},Ge={class:"fire-icon",src:S,alt:"fire"},ze={class:"progress"},We={class:"fire-icon",src:S,alt:"fire"},Ze={key:0,class:"per-char"},He={key:1,class:"per-char"},Je={key:2,class:"per-char"},Qe={key:3,class:"per-char"},Xe={class:"data-box flex"},et={class:"data-detail-wrap"},tt=A(()=>t("span",{class:"data-char"},"\u6570\u636E\u6982\u89C8",-1)),at={class:"data-item"},st=A(()=>t("div",{class:"char"},"\u5B66\u4E60\u4EBA\u6B21",-1)),lt={class:"data-item"},ot={class:"num-char"},ct=A(()=>t("div",{class:"char"},"\u5E74\u7EA7\u4EBA\u6570",-1)),nt={class:"data-item"},it={class:"num-char"},dt={class:"char"},rt={class:"data-item"},ut={class:"num-char"},mt=A(()=>t("div",{class:"char"},"\u6BCF\u65E5\u4E00\u5B66",-1)),_t={class:"data-item"},ht={class:"num-char"},yt=A(()=>t("div",{class:"char"},"\u6BCF\u5468\u4E00\u505A",-1)),vt={class:"data-item"},pt={class:"num-char"},gt=A(()=>t("div",{class:"char nomar"},"\u6BCF\u6708\u4E00\u8BFE",-1)),ft={class:"detail-char"},kt={class:"class-item-wrap"},It={class:"flex"},$t={class:"class-sec"},wt={class:"class-char"},xt={class:"teacher-sec flex"},Ct={class:"teacher-char"},Dt=A(()=>t("span",{class:"teacher-char"},"\u5B66\u4E60\u5B8C\u6210\u7387",-1)),bt={class:"progress-wrap"},Tt={class:"progress-wrap"},Yt={class:"progress-wrap"},Mt={class:"progress-wrap"},St={class:"count-sec flex"},At={class:"flex"},Et={class:"count-tag"},Bt={class:"medal-img",src:me,alt:""},Rt={class:"medal-img",src:_e,alt:""},Ft={class:"medal-img",src:he,alt:""},Vt={class:"no-char"},Nt=ne("NO: "),Ut={class:"no-num"},Pt={__name:"GradeClassRank",props:{completeItem:{type:Object},completeIndex:{type:Number,default:0},startDate:{type:String,default:""},endDate:{type:String,default:""},studyType:{type:String,default:""},rankMode:{type:Number,default:1}},setup(e,{expose:o}){const r=e,d=h([]),f=async p=>{const g={school_id:U().schoolInfo.id,limit:30,page:1,rank_mode:"class",start_date:r.startDate,end_date:r.endDate,study_type:r.studyType,year:p},D=await W(g);d.value=D};o({doSth:()=>{console.log("\u5B50\u7EC4\u4EF6\u7684 doSth \u65B9\u6CD5\u6267\u884C\u4E86\uFF01"+str)}});const m=h(!1),y=p=>{m.value=!m.value,m.value&&f(p)},k=(p,g)=>{const D=ye().teacherList;for(const _ of D)if(_.year==p&&_.class_id==g)return _.name},i=p=>Math.ceil(Number(p)*100),C=(p,g)=>({isUp:p-g>0,isShow:p-g!=0,numAbs:Math.abs(p-g)});return(p,g)=>{const D=j("el-icon");return c(),n("div",be,[t("div",Te,[s(t("img",Ye,null,512),[[l,e.completeIndex==0]]),s(t("img",Me,null,512),[[l,e.completeIndex==1]]),s(t("img",Se,null,512),[[l,e.completeIndex==2]]),s(t("div",Ae,[Ee,t("span",Be,a(e.completeIndex+1),1)],512),[[l,e.completeIndex>2]]),s(t("div",{class:K(["ranked-tag",C(e.completeItem.rank_index_last,e.completeItem.rank_index).isUp?"":"green"])}," \u8F83\u4E0A"+a(e.rankMode==1?"\u5468":"\u6708")+a(C(e.completeItem.rank_index_last,e.completeItem.rank_index).isUp?"\u4E0A\u5347":"\u4E0B\u964D")+a(C(e.completeItem.rank_index_last,e.completeItem.rank_index).numAbs)+"\u540D ",3),[[l,C(e.completeItem.rank_index_last,e.completeItem.rank_index).isShow]])]),t("div",Re,[t("div",Fe,[t("div",Ve,[t("div",Ne,[t("span",Ue,a(F(Z)(e.completeItem.year).name),1),t("span",Pe,"\u672C"+a(e.rankMode==1?"\u5468":"\u6708")+"\u5B66\u4E60\u5B8C\u6210\u7387",1)]),e.studyType=="all"?(c(),n("div",Le,[t("div",{class:"progress-active",style:w(`width: ${i(e.completeItem.parent_student_ratio)>=100?100:i(e.completeItem.parent_student_ratio)}%`)},null,4),s(t("img",Oe,null,512),[[l,i(e.completeItem.parent_student_ratio)>=100]])])):v("",!0),e.studyType=="daily"?(c(),n("div",je,[t("div",{class:"progress-active",style:w(`width: ${i(e.completeItem.daily_parent_ratio)>=100?100:i(e.completeItem.daily_parent_ratio)}%`)},null,4),s(t("img",Ke,null,512),[[l,i(e.completeItem.daily_parent_ratio)>=100]])])):v("",!0),s(t("div",qe,[t("div",{class:"progress-active",style:w(`width: ${i(e.completeItem.weekly_parent_ratio)>=100?100:i(e.completeItem.weekly_parent_ratio)}%`)},null,4),s(t("img",Ge,null,512),[[l,i(e.completeItem.weekly_parent_ratio)>=100]])],512),[[l,e.studyType=="weekly"]]),s(t("div",ze,[t("div",{class:"progress-active",style:w(`width: ${i(e.completeItem.monthy_parent_ratio)>=100?100:i(e.completeItem.monthy_parent_ratio)}%`)},null,4),s(t("img",We,null,512),[[l,i(e.completeItem.monthy_parent_ratio)>=100]])],512),[[l,e.studyType=="monthy"]])]),e.studyType=="all"?(c(),n("span",Ze,a(i(e.completeItem.parent_student_ratio))+"%",1)):v("",!0),e.studyType=="daily"?(c(),n("span",He,a(i(e.completeItem.daily_parent_ratio))+"%",1)):v("",!0),e.studyType=="weekly"?(c(),n("span",Je,a(i(e.completeItem.weekly_parent_ratio))+"%",1)):v("",!0),e.studyType=="monthy"?(c(),n("span",Qe,a(i(e.completeItem.monthy_parent_ratio))+"%",1)):v("",!0)]),t("div",Xe,[t("div",et,[tt,t("div",at,[s(t("div",{class:"num-char"},a(e.completeItem.complete_parent),513),[[l,e.studyType=="all"]]),s(t("div",{class:"num-char"},a(e.completeItem.daily_parent_num),513),[[l,e.studyType=="daily"]]),s(t("div",{class:"num-char"},a(e.completeItem.weekly_parent_num),513),[[l,e.studyType=="weekly"]]),s(t("div",{class:"num-char"},a(e.completeItem.monthy_parent_num),513),[[l,e.studyType=="monthy"]]),st]),t("div",lt,[t("div",ot,a(e.completeItem.student_num),1),ct]),t("div",nt,[t("div",it,a(e.completeItem.rank_index_last),1),t("div",dt,a(e.rankMode==1?"\u4E0A\u5468\u6392\u540D":"\u4E0A\u6708\u6392\u540D"),1)]),t("div",rt,[t("div",ut,a(i(e.completeItem.daily_parent_ratio))+"% ",1),mt]),t("div",_t,[t("div",ht,a(i(e.completeItem.weekly_parent_ratio))+"% ",1),yt]),t("div",vt,[t("div",pt,a(i(e.completeItem.monthy_parent_ratio))+"% ",1),gt])]),t("div",{class:"sw-btn",onClick:g[0]||(g[0]=_=>y(e.completeItem.year))},[t("span",ft,a(m.value?"\u6536\u8D77":"\u67E5\u770B")+"\u5E74\u7EA7\u5404\u73ED\u8BE6\u60C5",1),T(D,null,{default:le(()=>[s(T(F(oe),{class:"arr-icon"},null,512),[[l,m.value]]),s(T(F(ce),{class:"arr-icon"},null,512),[[l,!m.value]])]),_:1})])]),s(t("div",kt,[(c(!0),n(B,null,R(d.value,(_,Y)=>(c(),n("div",{class:"class-item",key:Y},[t("div",It,[t("div",$t,[t("span",wt,a(_.class_id)+"\u73ED",1)]),s(t("span",{class:"per-char"},a(i(_.parent_student_ratio))+"%",513),[[l,e.studyType=="all"]]),s(t("span",{class:"per-char"},a(i(_.daily_parent_ratio))+"%",513),[[l,e.studyType=="daily"]]),s(t("span",{class:"per-char"},a(i(_.weekly_parent_ratio))+"%",513),[[l,e.studyType=="weekly"]]),s(t("span",{class:"per-char"},a(i(_.monthy_parent_ratio))+"%",513),[[l,e.studyType=="monthy"]])]),t("div",xt,[t("span",Ct,"\u73ED\u4E3B\u4EFB\uFF1A"+a(k(_.year,_.class_id)),1),Dt]),s(t("div",bt,[t("div",{class:"progress-item",style:w(`width: ${i(_.parent_student_ratio)}%`)},null,4)],512),[[l,e.studyType=="all"]]),s(t("div",Tt,[t("div",{class:"progress-item",style:w(`width: ${i(_.daily_parent_ratio)}%`)},null,4)],512),[[l,e.studyType=="daily"]]),s(t("div",Yt,[t("div",{class:"progress-item",style:w(`width: ${i(_.weekly_parent_ratio)}%`)},null,4)],512),[[l,e.studyType=="weekly"]]),s(t("div",Mt,[t("div",{class:"progress-item",style:w(`width: ${i(_.monthy_parent_ratio)}%`)},null,4)],512),[[l,e.studyType=="monthy"]]),t("div",St,[t("div",At,[s(t("div",{class:"count-tag"},"\u5B66\u4E60\u4EBA\u6B21\uFF1A"+a(_.complete_parent),513),[[l,e.studyType=="all"]]),s(t("div",{class:"count-tag"},"\u5B66\u4E60\u4EBA\u6B21\uFF1A"+a(_.daily_parent_num),513),[[l,e.studyType=="daily"]]),s(t("div",{class:"count-tag"},"\u5B66\u4E60\u4EBA\u6B21\uFF1A"+a(_.weekly_parent_num),513),[[l,e.studyType=="weekly"]]),s(t("div",{class:"count-tag"},"\u5B66\u4E60\u4EBA\u6B21\uFF1A"+a(_.monthy_parent_num),513),[[l,e.studyType=="monthy"]]),t("div",Et,"\u73ED\u7EA7\u4EBA\u6570\uFF1A"+a(_.student_num),1)]),s(t("img",Bt,null,512),[[l,Y==0]]),s(t("img",Rt,null,512),[[l,Y==1]]),s(t("img",Ft,null,512),[[l,Y==2]]),s(t("span",Vt,[Nt,t("span",Ut,a(Y+1),1)],512),[[l,Y>2]])])]))),128))],512),[[l,m.value]])])])}}},Lt=V(Pt,[["__scopeId","data-v-b3cb282b"]]);function Ot(){const e=h({}),o=h({}),r=async()=>{const u={school_id:U().getSchoolInfo.id,type:"term"},m=await ve(u);e.value=m},d=async()=>{const u={school_id:U().getSchoolInfo.id},m=await pe(u);o.value=m};return r(),d(),{studyDashboardCompleteCountRef:e,studyDashboardCompleteDailyRef:o}}const jt=ie({name:"CompletedAmountOverview",props:{dataSource:{type:Object,default:()=>({})},dataSourceAvg:{type:Object,default:()=>({})}},setup(e){const o=h({total:{title:"\u603B\u8BBF\u95EE\u91CF",icon:"overview_total_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u8BBF\u95EE\u91CF",num:0}},daily:{title:"\u6BCF\u65E5\u4E00\u5B66\u603B\u5B66\u4E60\u91CF",icon:"overview_daily_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u5B66\u4E60\u91CF",num:0}},weekly:{title:"\u6BCF\u5468\u4E00\u505A\u603B\u5B8C\u6210\u91CF",icon:"overview_weekly_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u5B8C\u6210\u91CF",num:0}},monthy:{title:"\u6BCF\u6708\u4E00\u8BFE\u603B\u5B66\u4E60\u91CF",icon:"overview_monthly_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u5B66\u4E60\u91CF",num:0}}}),r=h(e.dataSource),d=h(e.dataSourceAvg);return de(()=>{r.value=e.dataSource,d.value=e.dataSourceAvg,Object.keys(r.value).length>0&&(o.value.total.num=r.value.total_all,o.value.total.tag.num=r.value.all_today,o.value.total.averageDaily.num=Math.ceil(d.value.all_num/d.value.day_num),o.value.daily.num=r.value.total_daily,o.value.daily.tag.num=r.value.daily,o.value.daily.averageDaily.num=Math.ceil(d.value.daily/d.value.day_num),o.value.weekly.num=r.value.total_weekly,o.value.weekly.tag.num=r.value.weekly_today,o.value.weekly.averageDaily.num=Math.ceil(d.value.weekly/d.value.day_num),o.value.monthy.num=r.value.total_monthy,o.value.monthy.tag.num=r.value.monthy_today,o.value.monthy.averageDaily.num=Math.ceil(d.value.monthy/d.value.day_num))}),{overviewListRef:o,getImageUrl:ge}}});const Kt={class:"completed-amount-overview-container"},qt={class:"completed-amount-overview-ul flex"},Gt={class:"el-card-style","body-style":{padding:"0px"}},zt={class:"flex"},Wt={class:"title-style"},Zt={class:"flex-start align-end"},Ht={class:"total-num-style"},Jt={class:"tag-box flex-center"},Qt={class:"flex-start"},Xt={class:"average-daily-title-style"},ea={class:"average-daily-num-style"};function ta(e,o,r,d,f,u){const m=j("el-image");return c(),n("div",Kt,[t("ul",qt,[(c(!0),n(B,null,R(e.overviewListRef,(y,k)=>(c(),n("li",{key:k,class:"completed-amount-overview-li"},[t("div",Gt,[t("header",zt,[t("p",Wt,a(y.title),1),T(m,{class:"header-icon-style",src:e.getImageUrl(y.icon+".png")},null,8,["src"])]),t("article",Zt,[t("p",Ht,a(y.num),1),t("div",Jt,[t("p",null,a(y.tag.title),1),t("p",null,a(y.tag.num),1)])]),t("footer",Qt,[t("p",Xt,a(y.averageDaily.title),1),t("p",ea,a(y.averageDaily.num),1)])])]))),128))])])}const aa=V(jt,[["render",ta],["__scopeId","data-v-7331e030"]]);const E=e=>(P("data-v-e276eaa3"),e=e(),L(),e),sa={class:"grade-class-rank-container"},la={class:"rank-left"},oa={class:"rank-img",src:J,alt:""},ca={class:"rank-img",src:Q,alt:""},na={class:"rank-img",src:X,alt:""},ia={class:"rank-cic"},da=E(()=>t("img",{class:"six-img",src:ee,alt:""},null,-1)),ra={class:"rank-num"},ua={class:"right-data-wrap"},ma={class:"progress-complete"},_a={class:"progress-box"},ha={class:"flex"},ya={class:"gc-char"},va={class:"cp-char"},pa={key:0,class:"progress"},ga={class:"fire-icon",src:S,alt:"fire"},fa={key:1,class:"progress"},ka={class:"fire-icon",src:S,alt:"fire"},Ia={class:"progress"},$a={class:"fire-icon",src:S,alt:"fire"},wa={class:"progress"},xa={class:"fire-icon",src:S,alt:"fire"},Ca={key:0,class:"per-char"},Da={key:1,class:"per-char"},ba={key:2,class:"per-char"},Ta={key:3,class:"per-char"},Ya={class:"data-box flex"},Ma={class:"data-detail-wrap"},Sa=E(()=>t("span",{class:"data-char"},"\u6570\u636E\u6982\u89C8",-1)),Aa={class:"data-item"},Ea=E(()=>t("div",{class:"char"},"\u5B66\u4E60\u4EBA\u6B21",-1)),Ba={class:"data-item"},Ra={class:"num-char"},Fa=E(()=>t("div",{class:"char"},"\u73ED\u7EA7\u4EBA\u6570",-1)),Va={class:"data-item"},Na={class:"num-char"},Ua={class:"char"},Pa={class:"data-item"},La={class:"num-char"},Oa=E(()=>t("div",{class:"char"},"\u6BCF\u65E5\u4E00\u5B66",-1)),ja={class:"data-item"},Ka={class:"num-char"},qa=E(()=>t("div",{class:"char"},"\u6BCF\u5468\u4E00\u505A",-1)),Ga={class:"data-item"},za={class:"num-char"},Wa=E(()=>t("div",{class:"char nomar"},"\u6BCF\u6708\u4E00\u8BFE",-1)),Za={__name:"ClassRankForComplete",props:{completeItem:{type:Object},completeIndex:{type:Number,default:0},rankMode:{type:Number,default:1},studyType:{type:String,default:""}},setup(e){const o=d=>Math.ceil(Number(d)*100),r=(d,f)=>({isUp:d-f>0,isShow:d-f!=0,numAbs:Math.abs(d-f)});return(d,f)=>(c(),n("div",sa,[t("div",la,[s(t("img",oa,null,512),[[l,e.completeIndex==0]]),s(t("img",ca,null,512),[[l,e.completeIndex==1]]),s(t("img",na,null,512),[[l,e.completeIndex==2]]),s(t("div",ia,[da,t("span",ra,a(e.completeIndex+1),1)],512),[[l,e.completeIndex>2]]),s(t("div",{class:K(["ranked-tag",r(e.completeItem.rank_index_last,e.completeItem.rank_index).isUp?"":"green"])}," \u8F83\u4E0A"+a(e.rankMode==1?"\u5468":"\u6708")+a(r(e.completeItem.rank_index_last,e.completeItem.rank_index).isUp?"\u4E0A\u5347":"\u4E0B\u964D")+a(r(e.completeItem.rank_index_last,e.completeItem.rank_index).numAbs)+"\u540D ",3),[[l,r(e.completeItem.rank_index_last,e.completeItem.rank_index).isShow]])]),t("div",ua,[t("div",ma,[t("div",_a,[t("div",ha,[t("span",ya,a(F(Z)(e.completeItem.year).name)+"("+a(e.completeItem.class_id)+")\u73ED",1),t("span",va,"\u672C"+a(e.rankMode==1?"\u5468":"\u6708")+"\u5B66\u4E60\u5B8C\u6210\u7387",1)]),e.studyType=="all"?(c(),n("div",pa,[t("div",{class:"progress-active",style:w(`width: ${o(e.completeItem.parent_student_ratio)>=100?100:o(e.completeItem.parent_student_ratio)}%`)},null,4),s(t("img",ga,null,512),[[l,o(e.completeItem.parent_student_ratio)>=100]])])):v("",!0),e.studyType=="daily"?(c(),n("div",fa,[t("div",{class:"progress-active",style:w(`width: ${o(e.completeItem.daily_parent_ratio)>=100?100:o(e.completeItem.daily_parent_ratio)}%`)},null,4),s(t("img",ka,null,512),[[l,o(e.completeItem.daily_parent_ratio)>=100]])])):v("",!0),s(t("div",Ia,[t("div",{class:"progress-active",style:w(`width: ${o(e.completeItem.weekly_parent_ratio)>=100?100:o(e.completeItem.weekly_parent_ratio)}%`)},null,4),s(t("img",$a,null,512),[[l,o(e.completeItem.weekly_parent_ratio)>=100]])],512),[[l,e.studyType=="weekly"]]),s(t("div",wa,[t("div",{class:"progress-active",style:w(`width: ${o(e.completeItem.monthy_parent_ratio)>=100?100:o(e.completeItem.monthy_parent_ratio)}%`)},null,4),s(t("img",xa,null,512),[[l,o(e.completeItem.monthy_parent_ratio)>=100]])],512),[[l,e.studyType=="monthy"]])]),e.studyType=="all"?(c(),n("span",Ca,a(o(e.completeItem.parent_student_ratio))+"%",1)):v("",!0),e.studyType=="daily"?(c(),n("span",Da,a(o(e.completeItem.daily_parent_ratio))+"%",1)):v("",!0),e.studyType=="weekly"?(c(),n("span",ba,a(o(e.completeItem.weekly_parent_ratio))+"%",1)):v("",!0),e.studyType=="monthy"?(c(),n("span",Ta,a(o(e.completeItem.monthy_parent_ratio))+"%",1)):v("",!0)]),t("div",Ya,[t("div",Ma,[Sa,t("div",Aa,[s(t("div",{class:"num-char"},a(e.completeItem.complete_parent),513),[[l,e.studyType=="all"]]),s(t("div",{class:"num-char"},a(e.completeItem.daily_parent_num),513),[[l,e.studyType=="daily"]]),s(t("div",{class:"num-char"},a(e.completeItem.weekly_parent_num),513),[[l,e.studyType=="weekly"]]),s(t("div",{class:"num-char"},a(e.completeItem.monthy_parent_num),513),[[l,e.studyType=="monthy"]]),Ea]),t("div",Ba,[t("div",Ra,a(e.completeItem.student_num),1),Fa]),t("div",Va,[t("div",Na,a(e.completeItem.rank_index_last),1),t("div",Ua,a(e.rankMode==1?"\u4E0A\u5468\u6392\u540D":"\u4E0A\u6708\u6392\u540D"),1)]),t("div",Pa,[t("div",La,a(o(e.completeItem.daily_parent_ratio))+"% ",1),Oa]),t("div",ja,[t("div",Ka,a(o(e.completeItem.weekly_parent_ratio))+"% ",1),qa]),t("div",Ga,[t("div",za,a(o(e.completeItem.monthy_parent_ratio))+"% ",1),Wa])])])])]))}},Ha=V(Za,[["__scopeId","data-v-e276eaa3"]]);const Ja={},te=e=>(P("data-v-14029ae3"),e=e(),L(),e),Qa={class:"nodata-status-container"},Xa=te(()=>t("img",{class:"nodata-img",src:fe,alt:""},null,-1)),es=te(()=>t("span",{class:"nodata-char"},"\u6682\u65E0\u6570\u636E\u5185\u5BB9\uFF0C\u770B\u770B\u5176\u4ED6\u7684\u5427~",-1)),ts=[Xa,es];function as(e,o){return c(),n("div",Qa,ts)}const ss=V(Ja,[["render",as],["__scopeId","data-v-14029ae3"]]);const ae=e=>(P("data-v-326d9a97"),e=e(),L(),e),ls={class:"study-report-container"},os={class:"all-wrap"},cs={class:"sort-wrap"},ns={class:"title-time"},is=ae(()=>t("span",{class:"study-tit"},"\u5B66\u4E60\u5B8C\u6210\u699C",-1)),ds={class:"time-char"},rs=ae(()=>t("span",{class:"o-char"},"\u5206\u7C7B\uFF1A",-1)),us=["onClick"],ms={key:0,class:"date-picker-wrap"},_s={key:1,class:"date-picker-wrap"},hs={key:0,class:"data-wrap"},ys={key:0},vs={key:1},ps={__name:"studyReportForm",setup(e){const{studyDashboardCompleteCountRef:o,studyDashboardCompleteDailyRef:r}=Ot(),d=[{sortKey:1,sortItem:[{id:"grade",name:"\u5E74\u6BB5\u6392\u540D"},{id:"class",name:"\u73ED\u7EA7\u6392\u540D"}]},{sortKey:2,sortItem:[{id:"all",name:"\u7EFC\u5408"},{id:"daily",name:"\u6BCF\u65E5\u4E00\u5B66"},{id:"weekly",name:"\u6BCF\u5468\u4E00\u505A"},{id:"monthy",name:"\u6BCF\u6708\u4E00\u8BFE"}]},{sortKey:3,sortItem:[{id:2,name:"\u6708\u699C"},{id:1,name:"\u5468\u699C"}]}],f=h(null),u=h(["class","daily",1]),m=h(""),y=h(""),k=h(""),i=h(""),C=h("");h("");const p=(x,M)=>{u.value[x-1]=M,O()},g=h(""),D=h(""),_=x=>{i.value=$(x).add(1,"day").format("YYYY-MM-DD"),C.value=$(x).add(7,"day").format("YYYY-MM-DD"),O()},Y=x=>{m.value=$(x).format("YYYY-MM-01"),x?k.value=$(x).format("M"):k.value="",y.value=$(m.value).add(1,"month").format("YYYY-MM-DD"),O()},N=h([]),O=async()=>{const x={school_id:U().schoolInfo.id,limit:30,page:1,rank_mode:u.value[0],start_date:u.value[2]==2?m.value:i.value,end_date:u.value[2]==2?y.value:C.value,study_type:u.value[1]},M=await W(x);N.value=M},q=h("");return z(()=>{q.value=$().format("YYYY\u5E74MM\u6708DD\u65E5"),k.value=$().month(),y.value=$().format("YYYY-MM-01"),m.value=$(y.value).subtract(1,"month").format("YYYY-MM-DD"),C.value=$().isoWeekday(0).format("YYYY-MM-DD"),i.value=$(C.value).subtract(6,"day").format("YYYY-MM-DD"),g.value=i.value,D.value=$().subtract(1,"month").format("YYYY-MM"),O()}),(x,M)=>{const G=j("el-date-picker");return c(),n("div",ls,[t("div",null,[T(aa,{dataSource:F(o),dataSourceAvg:F(r)},null,8,["dataSource","dataSourceAvg"]),t("div",os,[T(De)]),t("div",cs,[t("div",ns,[is,t("span",ds,"\u66F4\u65B0\u65F6\u95F4\uFF1A"+a(q.value),1)]),(c(),n(B,null,R(d,I=>t("div",{class:"sort-sec",key:I.sortKey},[rs,(c(!0),n(B,null,R(I.sortItem,b=>(c(),n("div",{class:K(["lab-item",u.value[I.sortKey-1]==b.id?"active":""]),onClick:gs=>p(I.sortKey,b.id),key:b.id},a(b.name),11,us))),128))])),64)),u.value[2]==1?(c(),n("div",ms,[T(G,{modelValue:g.value,"onUpdate:modelValue":M[0]||(M[0]=I=>g.value=I),onChange:_,type:"week",format:"YYYY \u7B2C ww \u5468",placeholder:"\u9009\u62E9\u5468"},null,8,["modelValue"])])):v("",!0),u.value[2]==2?(c(),n("div",_s,[T(G,{modelValue:D.value,"onUpdate:modelValue":M[1]||(M[1]=I=>D.value=I),type:"month",placeholder:"\u9009\u62E9\u6708",onChange:Y},null,8,["modelValue"]),s(t("div",{class:"ranking_list_name"},a(k.value)+"\u6708\u6392\u884C\u699C",513),[[l,k.value]])])):v("",!0)]),N.value&&N.value.length?(c(),n("div",hs,[u.value[0]=="grade"?(c(),n("div",ys,[(c(!0),n(B,null,R(N.value,(I,b)=>(c(),n("div",{class:"mar-wrap",key:b},[T(Lt,{ref_for:!0,ref_key:"childRef",ref:f,completeItem:I,completeIndex:b,startDate:u.value[2]==2?m.value:i.value,endDate:u.value[2]==2?y.value:C.value,studyType:u.value[1],rankMode:u.value[2]},null,8,["completeItem","completeIndex","startDate","endDate","studyType","rankMode"])]))),128))])):v("",!0),u.value[0]=="class"?(c(),n("div",vs,[(c(!0),n(B,null,R(N.value,(I,b)=>(c(),n("div",{class:"mar-wrap",key:b},[T(Ha,{completeItem:I,completeIndex:b,rankMode:u.value[2],studyType:u.value[1]},null,8,["completeItem","completeIndex","rankMode","studyType"])]))),128))])):v("",!0)])):(c(),re(ss,{key:1}))])])}}},Ms=V(ps,[["__scopeId","data-v-326d9a97"]]);export{Ms as default};
