import{_ as Z,b as _,H as B,v as H,u as M,r as d,o as h,c as f,h as t,t as o,C as Y,F as j,f as E,a as c,w as l,E as F,g as L,x as V,y as $,i as G,D as z}from"./index.40cdeb8f.js";import{_ as J}from"./avatar_icon.0a04787c.js";import{N as K}from"./nodata-status.b6c8555e.js";import{a as O,d as Q,e as U}from"./activity.7c042fe9.js";import{u as g}from"./school.c54e930e.js";import{b as W}from"./notice.3b440653.js";import{h as X}from"./moment.9709ab41.js";import"./nodata_status.bd52272b.js";const tt="/admin/icons/position_icon.png",et="/admin/icons/colck_icon.png";const n=r=>(V("data-v-9db2d2da"),r=r(),$(),r),st={class:"root"},at={class:"active-box"},ot={class:"active-content"},ct={class:"adress"},it=n(()=>t("img",{class:"icon",src:tt,alt:""},null,-1)),nt={class:"time"},lt=n(()=>t("img",{class:"icon",src:et,alt:""},null,-1)),dt=n(()=>t("div",{class:"line"},null,-1)),_t=n(()=>t("div",{class:"t-char"},"\u62A5\u540D\u4FE1\u606F",-1)),rt={class:"join-box"},ut=n(()=>t("div",{class:"join-num"},[t("span",{class:"num"},"0"),t("span",{class:"char"},"\u62A5\u540D\u4EBA\u6570")],-1)),pt={class:"join-people flex-center"},vt={class:"char"},ht={class:"avatar-wrap"},mt={class:"avatar",src:J,alt:""},ft=n(()=>t("div",{class:"line2"},null,-1)),gt={class:"flex"},yt=n(()=>t("div",{class:"btn-active white"},"\u5220\u9664\u6D3B\u52A8",-1)),bt=G("\u7F16\u8F91\u6D3B\u52A8"),xt=n(()=>t("div",{class:"card-header"},[t("span",{class:"header-title"},"\u62A5\u540D\u5BB6\u957F\u5217\u8868")],-1)),wt={key:0},At=["src"],It={class:"username-char"},kt={class:"username-char"},Dt={class:"flex-end",style:{"margin-top":"24px"}},qt={class:"flex"},Rt={class:"record-char"},St={__name:"activityDetail",setup(r){const x=e=>X(e).utc().format("YYYY-MM-DD HH:mm:ss"),u=_(0),s=_({location_area:1e3,img:'\u56FE\u7247\u6CA1\u6709\u4F20\\"\\"',bg_img:'\u56FE\u7247\u6CA1\u6709\u4F20\\"\\"',school_id:1,grade_id:1,location:"\u6D3B\u52A8\u5730\u70B9",address:"\u6D3B\u52A8\u5730\u5740",location_y:0,show_date:"2022-11-08T00:00:00Z",change_date:"2022-11-07T18:04:34Z",date:"2022-11-07T18:04:34Z",count:0,slogan:"\u6D3B\u52A8\u6807\u8BED",content:"\u6D3B\u52A8\u5185\u5BB9\u5BCC\u6587\u672C",location_x:0,start_date:"2022-11-08T00:00:00Z",end_date:"2022-11-08T00:00:00Z",head_img:'\u56FE\u7247\u6CA1\u6709\u4F20\\"\\"',id:1,class_id:1,title:"\u6D3B\u52A8\u6807\u9898",discription:"\u6D3B\u52A8\u8BF4\u660E",is_show:1}),w=async()=>{const e={id:u.value},a=await O(e);!a||(s.value=a)},m=_(0),y=_(1),p=_([]),A=async()=>{const e={activity_id:u.value,school_id:g().schoolInfo.id,limit:10,page:y.value},a=await Q(e);m.value=a.total,p.value=a.data},b=B();H(()=>{b.query.id&&(u.value=b.query.id,w(),A())});const I=async e=>{const a={receiver:"school",type:"activity",year:0,class_id:0,combi_id:e,title:s.title,content:s.content,school_id:g().schoolInfo.id,teacher_id:0};await W(a),F.success("\u901A\u77E5\u6210\u529F!")},k=M(),D=async()=>{const e={id:u.value,school_id:g().schoolInfo.id};await U(e),k.go(-1)},q=e=>{y.value=e},R={background:"#f6f8fa",color:"#333333","font-weight":400};return(e,a)=>{const S=d("el-popconfirm"),C=d("router-link"),v=d("el-table-column"),N=d("el-table"),T=d("el-pagination"),P=d("el-card");return h(),f("div",st,[t("div",at,[t("h1",null,o(s.value.title),1),t("p",ot,o(s.value.content),1),t("div",ct,[it,t("span",null,o(s.value.address),1)]),t("div",nt,[lt,t("span",null,o(s.value.start_date?x(s.value.start_date):""),1)]),dt,_t,t("div",rt,[ut,t("div",pt,[Y(t("span",vt,"\u6682\u65E0\u5BB6\u957F\u62A5\u540D",512),[[z,!1]]),t("div",ht,[(h(),f(j,null,E(4,i=>t("img",mt)),64))])])]),ft,t("div",gt,[c(S,{title:"\u5220\u9664\u540E\u5C06\u4E0D\u53EF\u6062\u590D\uFF0C\u786E\u8BA4\u662F\u5426\u5220\u9664?",onConfirm:D},{reference:l(()=>[yt]),_:1}),t("div",{class:"btn-active white",onClick:a[0]||(a[0]=i=>I(s.value.id))},"\u518D\u6B21\u63D0\u9192"),c(C,{to:`/addActivity?id=${s.value.id}`,class:"btn-active"},{default:l(()=>[bt]),_:1},8,["to"])])]),c(P,{class:"box-card"},{header:l(()=>[xt]),default:l(()=>[p.value&&p.value.length?(h(),f("div",wt,[c(N,{data:p.value,style:{width:"100%"},"header-cell-style":R},{default:l(()=>[c(v,{label:"\u5BB6\u957F\u4FE1\u606F",align:"center"},{default:l(({row:i})=>[t("img",{class:"avatar",src:i.wx_img,alt:""},null,8,At),t("span",It,o(i.wx_name),1)]),_:1}),c(v,{label:"\u5B66\u751F\u4FE1\u606F",align:"center"},{default:l(({row:i})=>[t("span",kt,o(i.wx_name)+"|"+o(i.year+"\u7EA7")+o(i.class+"\u73ED"),1)]),_:1}),c(v,{prop:"phone",label:"\u8054\u7CFB\u7535\u8BDD"}),c(v,{prop:"change_date",label:"\u62A5\u540D\u65F6\u95F4"})]),_:1},8,["data"]),t("div",Dt,[t("div",qt,[t("span",Rt,"\u5171"+o(m.value)+"\u6761\u8BB0\u5F55",1),c(T,{"page-size":8,"pager-count":5,layout:"prev, pager, next",total:m.value,onCurrentChange:q},null,8,["total"])])])])):(h(),L(K,{key:1}))]),_:1})])}}},Yt=Z(St,[["__scopeId","data-v-9db2d2da"]]);export{Yt as default};
