import{_ as M,u as H,b as p,v as T,o as r,c as u,h as e,t as a,x as V,y as L,r as B,C as m,D as v,Q as N,a as $,w as j,B as O,Z as J,$ as ee,F as R,f as S,j as x,X as G,i as te,d as ae,k as se,n as oe}from"./index.7c6bf0e2.js";import{a as ce,b as q}from"./datacenter.abf05f9b.js";import{u as E}from"./school.2813aabf.js";import{_ as K,a as U,b as z,c as W}from"./six_border.441dd958.js";import{_ as Q,a as le,b as ne,c as de}from"./medal3.4b0e1b53.js";import{u as ie}from"./teacher.f373246f.js";import{s as re,z as ue}from"./study.eaef53a3.js";import{h as w}from"./moment.9709ab41.js";import{g as _e}from"./ak.02252990.js";const X=t=>(V("data-v-e5a14ba4"),t=t(),L(),t),me={class:"all-complete-box flex"},ve={class:"left-box"},he={class:"num"},pe=X(()=>e("span",{class:"per-char"},"%",-1)),ye=X(()=>e("span",{class:"per-char"},"\u5168\u6821\u7D2F\u8BA1\u5B8C\u6210\u6CE8\u518C\u7387",-1)),fe={__name:"PerAllComplete",setup(t){const o=H(),s=()=>{o.push({path:"/CompletionRate"})},l=p(0),n=async()=>{const d={school_id:E().schoolInfo.id},i=await ce(d);if(i){const I=i.parent_count||0,c=i.student_should_count||0;c?l.value=Math.ceil(I/c*100):l.value=100}};return T(()=>{n()}),(d,i)=>(r(),u("div",me,[e("div",ve,[e("span",he,a(l.value),1),pe,ye]),e("div",{class:"look-char",onClick:s},"\u67E5\u770B\u8BE6\u60C5")]))}},ge=M(fe,[["__scopeId","data-v-e5a14ba4"],["__file","E:/work/parents_school_institution_pc/src/views/dataCenterOfArea/studyReportForm/components/PerAllComplete.vue"]]);const Y=t=>(V("data-v-f73dd4e0"),t=t(),L(),t),we={class:"grade-class-rank-container"},$e={class:"rank-left"},Ie={class:"rank-img",src:K,alt:""},ke={class:"rank-img",src:U,alt:""},Ce={class:"rank-img",src:z,alt:""},De={class:"rank-cic"},Ye=Y(()=>e("img",{class:"six-img",src:W,alt:""},null,-1)),xe={class:"rank-num"},be=Y(()=>e("div",{class:"ranked-tag"},"\u8F83\u4E0A\u6708\u4E0A\u53471\u540D",-1)),Ae={class:"right-data-wrap"},Ee={class:"progress-complete"},Re={class:"progress-box"},Se={class:"flex"},Fe={class:"gc-char"},Me=Y(()=>e("span",{class:"cp-char"},"\u672C\u6708\u5B66\u4E60\u5B8C\u6210\u7387",-1)),Be={class:"progress"},Oe={class:"fire-icon",src:Q,alt:"fire"},Ve={class:"per-char"},Le={class:"data-box flex"},Ne={class:"data-detail-wrap"},Pe=Y(()=>e("span",{class:"data-char"},"\u6570\u636E\u6982\u89C8",-1)),Te={class:"data-item"},je={class:"num-char"},Ge=Y(()=>e("div",{class:"char"},"\u5B66\u4E60\u4EBA\u6B21",-1)),qe={class:"data-item"},Ke={class:"num-char"},Ue=Y(()=>e("div",{class:"char"},"\u5E74\u7EA7\u4EBA\u6570",-1)),ze=G('<div class="data-item" data-v-f73dd4e0><div class="num-char" data-v-f73dd4e0>0</div><div class="char" data-v-f73dd4e0>\u4E0A\u5468\u6392\u540D</div></div><div class="data-item" data-v-f73dd4e0><div class="num-char" data-v-f73dd4e0>0</div><div class="char" data-v-f73dd4e0>\u4E0A\u6708\u6392\u540D</div></div>',2),We={class:"data-item"},Qe={class:"num-char"},Xe=Y(()=>e("div",{class:"char"},"\u6BCF\u65E5\u4E00\u5B66",-1)),Ze={class:"data-item"},He={class:"num-char"},Je=Y(()=>e("div",{class:"char"},"\u6BCF\u5468\u4E00\u505A",-1)),et={class:"data-item"},tt={class:"num-char"},at=Y(()=>e("div",{class:"char nomar"},"\u6BCF\u6708\u4E00\u8BFE",-1)),st={class:"detail-char"},ot={class:"class-item-wrap"},ct={class:"flex"},lt={class:"class-sec"},nt={class:"class-char"},dt={class:"per-char"},it={class:"teacher-sec flex"},rt={class:"teacher-char"},ut=Y(()=>e("span",{class:"teacher-char"},"\u5B66\u4E60\u5B8C\u6210\u7387",-1)),_t={class:"progress-wrap"},mt={class:"count-sec flex"},vt={class:"flex"},ht={class:"count-tag"},pt={class:"count-tag"},yt={class:"medal-img",src:le,alt:""},ft={class:"medal-img",src:ne,alt:""},gt={class:"medal-img",src:de,alt:""},wt={class:"no-char"},$t=te("NO: "),It={class:"no-num"},kt={__name:"GradeClassRank",props:{completeItem:{type:Object},completeIndex:{type:Number,default:0},startDate:{type:String,default:""},endDate:{type:String,default:""},studyType:{type:String,default:""}},setup(t){const o=t,s=p([]),l=async h=>{const k={school_id:E().schoolInfo.id,limit:30,page:1,rank_mode:"class",start_date:o.startDate,end_date:o.endDate,study_type:o.studyType,year:h},A=await q(k);s.value=A},n=p(!1),d=h=>{n.value=!n.value,n.value&&l(h)},i=(h,k)=>{const A=ie().teacherList;for(const _ of A)if(_.year==h&&_.class_id==k)return _.name},I=h=>{const k=E().gradeList,_=new Date().getFullYear()-Number(h)+1;let y={};for(const F of k)F.id===_&&(y=F);return y},c=h=>Math.ceil(Number(h)*100);return(h,k)=>{const A=B("el-icon");return r(),u("div",we,[e("div",$e,[m(e("img",Ie,null,512),[[v,t.completeIndex==0]]),m(e("img",ke,null,512),[[v,t.completeIndex==1]]),m(e("img",Ce,null,512),[[v,t.completeIndex==2]]),m(e("div",De,[Ye,e("span",xe,a(t.completeIndex+1),1)],512),[[v,t.completeIndex>2]]),be]),e("div",Ae,[e("div",Ee,[e("div",Re,[e("div",Se,[e("span",Fe,a(I(t.completeItem.year).name),1),Me]),e("div",Be,[e("div",{class:"progress-active",style:N(`width: ${c(t.completeItem.parent_student_ratio)>=100?100:c(t.completeItem.parent_student_ratio)}%`)},null,4),m(e("img",Oe,null,512),[[v,c(t.completeItem.parent_student_ratio)>=100]])])]),e("span",Ve,a(c(t.completeItem.parent_student_ratio))+"%",1)]),e("div",Le,[e("div",Ne,[Pe,e("div",Te,[e("div",je,a(t.completeItem.complete_parent),1),Ge]),e("div",qe,[e("div",Ke,a(t.completeItem.student_num),1),Ue]),ze,e("div",We,[e("div",Qe,a(c(t.completeItem.daily_parent_ratio))+"% ",1),Xe]),e("div",Ze,[e("div",He,a(c(t.completeItem.weekly_parent_ratio))+"% ",1),Je]),e("div",et,[e("div",tt,a(c(t.completeItem.monthy_parent_ratio))+"% ",1),at])]),e("div",{class:"sw-btn",onClick:k[0]||(k[0]=_=>d(t.completeItem.year))},[e("span",st,a(n.value?"\u6536\u8D77":"\u67E5\u770B")+"\u5E74\u7EA7\u5404\u73ED\u8BE6\u60C5",1),$(A,null,{default:j(()=>[m($(O(J),{class:"arr-icon"},null,512),[[v,n.value]]),m($(O(ee),{class:"arr-icon"},null,512),[[v,!n.value]])]),_:1})])]),m(e("div",ot,[(r(!0),u(R,null,S(s.value,(_,y)=>(r(),u("div",{class:"class-item",key:y},[e("div",ct,[e("div",lt,[e("span",nt,a(_.class_id)+"\u73ED",1),x(' <span class="rank-char"> \u5E76\u5217\u7B2C\u4E00 </span> ')]),e("span",dt,a(c(_.parent_student_ratio))+"%",1)]),e("div",it,[e("span",rt,"\u73ED\u4E3B\u4EFB\uFF1A"+a(i(_.year,_.class_id)),1),ut]),e("div",_t,[e("div",{class:"progress-item",style:N(`width: ${c(_.parent_student_ratio)}%`)},null,4)]),e("div",mt,[e("div",vt,[e("div",ht,"\u5B66\u4E60\u4EBA\u6B21\uFF1A"+a(_.complete_parent),1),e("div",pt,"\u73ED\u7EA7\u4EBA\u6570\uFF1A"+a(_.student_num),1)]),m(e("img",yt,null,512),[[v,y==0]]),m(e("img",ft,null,512),[[v,y==1]]),m(e("img",gt,null,512),[[v,y==2]]),m(e("span",wt,[$t,e("span",It,a(y+1),1)],512),[[v,y>2]])])]))),128))],512),[[v,n.value]])])])}}},Ct=M(kt,[["__scopeId","data-v-f73dd4e0"],["__file","E:/work/parents_school_institution_pc/src/views/dataCenterOfArea/studyReportForm/components/GradeClassRank.vue"]]);function Dt(){const t=p({}),o=p({}),s=async()=>{const d={school_id:E().getSchoolInfo.id,type:"term"},i=await re(d);t.value=i},l=async()=>{const d={school_id:E().getSchoolInfo.id},i=await ue(d);o.value=i};return s(),l(),{studyDashboardCompleteCountRef:t,studyDashboardCompleteDailyRef:o}}const Yt=ae({name:"CompletedAmountOverview",props:{dataSource:{type:Object,default:()=>({})},dataSourceAvg:{type:Object,default:()=>({})}},setup(t){const o=p({total:{title:"\u603B\u8BBF\u95EE\u91CF",icon:"overview_total_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u8BBF\u95EE\u91CF",num:0}},daily:{title:"\u6BCF\u65E5\u4E00\u5B66\u603B\u5B66\u4E60\u91CF",icon:"overview_daily_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u5B66\u4E60\u91CF",num:0}},weekly:{title:"\u6BCF\u5468\u4E00\u505A\u603B\u5B8C\u6210\u91CF",icon:"overview_weekly_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u5B8C\u6210\u91CF",num:0}},monthy:{title:"\u6BCF\u6708\u4E00\u8BFE\u603B\u5B66\u4E60\u91CF",icon:"overview_monthly_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u5B66\u4E60\u91CF",num:0}}}),s=p(t.dataSource),l=p(t.dataSourceAvg);return se(()=>{s.value=t.dataSource,l.value=t.dataSourceAvg,Object.keys(s.value).length>0&&(o.value.total.num=s.value.total_all,o.value.total.tag.num=s.value.all_today,o.value.total.averageDaily.num=Math.ceil(l.value.all_num/l.value.day_num),o.value.daily.num=s.value.total_daily,o.value.daily.tag.num=s.value.daily,o.value.daily.averageDaily.num=Math.ceil(l.value.daily/l.value.day_num),o.value.weekly.num=s.value.total_weekly,o.value.weekly.tag.num=s.value.weekly_today,o.value.weekly.averageDaily.num=Math.ceil(l.value.weekly/l.value.day_num),o.value.monthy.num=s.value.total_monthy,o.value.monthy.tag.num=s.value.monthy_today,o.value.monthy.averageDaily.num=Math.ceil(l.value.monthy/l.value.day_num))}),{overviewListRef:o,getImageUrl:_e}}});const xt={class:"completed-amount-overview-container"},bt={class:"completed-amount-overview-ul flex"},At={class:"flex"},Et={class:"title-style"},Rt={class:"flex-start align-end"},St={class:"total-num-style"},Ft={class:"tag-box flex-center"},Mt={class:"flex-start"},Bt={class:"average-daily-title-style"},Ot={class:"average-daily-num-style"};function Vt(t,o,s,l,n,d){const i=B("el-image"),I=B("el-card");return r(),u("div",xt,[e("ul",bt,[(r(!0),u(R,null,S(t.overviewListRef,(c,h)=>(r(),u("li",{key:h,class:"completed-amount-overview-li"},[$(I,{class:"el-card-style","body-style":{padding:"0px"}},{default:j(()=>[e("header",At,[e("p",Et,a(c.title),1),$(i,{class:"header-icon-style",src:t.getImageUrl(c.icon+".png")},null,8,["src"])]),e("article",Rt,[e("p",St,a(c.num),1),e("div",Ft,[e("p",null,a(c.tag.title),1),e("p",null,a(c.tag.num),1)])]),e("footer",Mt,[e("p",Bt,a(c.averageDaily.title),1),e("p",Ot,a(c.averageDaily.num),1)])]),_:2},1024)]))),128))])])}const Lt=M(Yt,[["render",Vt],["__scopeId","data-v-2f931371"],["__file","E:/work/parents_school_institution_pc/src/views/dataCenterOfArea/studyReportForm/components/CompletedAmountOverview/CompletedAmountOverview.vue"]]);const b=t=>(V("data-v-c4c37515"),t=t(),L(),t),Nt={class:"grade-class-rank-container"},Pt={class:"rank-left"},Tt={class:"rank-img",src:K,alt:""},jt={class:"rank-img",src:U,alt:""},Gt={class:"rank-img",src:z,alt:""},qt={class:"rank-cic"},Kt=b(()=>e("img",{class:"six-img",src:W,alt:""},null,-1)),Ut={class:"rank-num"},zt=b(()=>e("div",{class:"ranked-tag"},"\u8F83\u4E0A\u6708\u4E0A\u53471\u540D",-1)),Wt={class:"right-data-wrap"},Qt={class:"progress-complete"},Xt={class:"progress-box"},Zt={class:"flex"},Ht={class:"gc-char"},Jt=b(()=>e("span",{class:"cp-char"},"\u672C\u6708\u5B66\u4E60\u5B8C\u6210\u7387",-1)),ea={class:"progress"},ta={class:"fire-icon",src:Q,alt:"fire"},aa={class:"per-char"},sa={class:"data-box flex"},oa={class:"data-detail-wrap"},ca=b(()=>e("span",{class:"data-char"},"\u6570\u636E\u6982\u89C8",-1)),la={class:"data-item"},na={class:"num-char"},da=b(()=>e("div",{class:"char"},"\u5B66\u4E60\u4EBA\u6B21",-1)),ia={class:"data-item"},ra={class:"num-char"},ua=b(()=>e("div",{class:"char"},"\u73ED\u7EA7\u4EBA\u6570",-1)),_a=G('<div class="data-item" data-v-c4c37515><div class="num-char" data-v-c4c37515>0</div><div class="char" data-v-c4c37515>\u4E0A\u5468\u6392\u540D</div></div><div class="data-item" data-v-c4c37515><div class="num-char" data-v-c4c37515>0</div><div class="char" data-v-c4c37515>\u4E0A\u6708\u6392\u540D</div></div>',2),ma={class:"data-item"},va={class:"num-char"},ha=b(()=>e("div",{class:"char"},"\u6BCF\u65E5\u4E00\u5B66",-1)),pa={class:"data-item"},ya={class:"num-char"},fa=b(()=>e("div",{class:"char"},"\u6BCF\u5468\u4E00\u505A",-1)),ga={class:"data-item"},wa={class:"num-char"},$a=b(()=>e("div",{class:"char nomar"},"\u6BCF\u6708\u4E00\u8BFE",-1)),Ia={__name:"ClassRankForComplete",props:{completeItem:{type:Object},completeIndex:{type:Number,default:0}},setup(t){const o=l=>{const n=E().gradeList,i=new Date().getFullYear()-Number(l)+1;let I={};for(const c of n)c.id===i&&(I=c);return I},s=l=>Math.ceil(Number(l)*100);return(l,n)=>(r(),u("div",Nt,[e("div",Pt,[m(e("img",Tt,null,512),[[v,t.completeIndex==0]]),m(e("img",jt,null,512),[[v,t.completeIndex==1]]),m(e("img",Gt,null,512),[[v,t.completeIndex==2]]),m(e("div",qt,[Kt,e("span",Ut,a(t.completeIndex+1),1)],512),[[v,t.completeIndex>2]]),zt]),e("div",Wt,[e("div",Qt,[e("div",Xt,[e("div",Zt,[e("span",Ht,a(o(t.completeItem.year).name)+"("+a(t.completeItem.class_id)+")\u73ED",1),Jt]),e("div",ea,[e("div",{class:"progress-active",style:N(`width: ${s(t.completeItem.parent_student_ratio)>=100?100:s(t.completeItem.parent_student_ratio)}%`)},null,4),m(e("img",ta,null,512),[[v,s(t.completeItem.parent_student_ratio)>=100]])])]),e("span",aa,a(s(t.completeItem.parent_student_ratio))+"%",1)]),e("div",sa,[e("div",oa,[ca,e("div",la,[e("div",na,a(t.completeItem.complete_parent),1),da]),e("div",ia,[e("div",ra,a(t.completeItem.student_num),1),ua]),_a,e("div",ma,[e("div",va,a(s(t.completeItem.daily_parent_ratio))+"% ",1),ha]),e("div",pa,[e("div",ya,a(s(t.completeItem.weekly_parent_ratio))+"% ",1),fa]),e("div",ga,[e("div",wa,a(s(t.completeItem.monthy_parent_ratio))+"% ",1),$a])])])])]))}},ka=M(Ia,[["__scopeId","data-v-c4c37515"],["__file","E:/work/parents_school_institution_pc/src/views/dataCenterOfArea/studyReportForm/components/ClassRankForComplete.vue"]]);const Z=t=>(V("data-v-985ed7fb"),t=t(),L(),t),Ca={class:"study-report-container"},Da={class:"all-wrap"},Ya={class:"sort-wrap"},xa={class:"title-time"},ba=Z(()=>e("span",{class:"study-tit"},"\u5B66\u4E60\u5B8C\u6210\u699C",-1)),Aa={class:"time-char"},Ea=Z(()=>e("span",{class:"o-char"},"\u5206\u7C7B\uFF1A",-1)),Ra=["onClick"],Sa={key:0,class:"date-picker-wrap"},Fa={key:1,class:"date-picker-wrap"},Ma={key:0,class:"data-wrap"},Ba={key:0},Oa={key:1},Va={__name:"studyReportFormOfArea",setup(t){const{studyDashboardCompleteCountRef:o,studyDashboardCompleteDailyRef:s}=Dt(),l=[{sortKey:1,sortItem:[{id:"grade",name:"\u5E74\u6BB5\u6392\u540D"},{id:"class",name:"\u73ED\u7EA7\u6392\u540D"}]},{sortKey:2,sortItem:[{id:"daily",name:"\u6BCF\u65E5\u4E00\u5B66"},{id:"weekly",name:"\u6BCF\u5468\u4E00\u505A"},{id:"monthy",name:"\u6BCF\u6708\u4E00\u8BFE"}]},{sortKey:3,sortItem:[{id:2,name:"\u6708\u699C"},{id:1,name:"\u5468\u699C"}]}],n=p(["grade","daily",2]),d=p(""),i=p(""),I=(g,C)=>{n.value[g-1]=C,g==3&&C==1&&(d.value=w().isoWeek(1).format("YYYY-MM-DD"),i.value=w(d.value).add(7,"day").format("YYYY-MM-DD")),g==3&&C==2&&(d.value=w().format("YYYY-MM-01"),i.value=w(d.value).add(1,"month").format("YYYY-MM-DD")),y()},c=p(""),h=p(""),k=g=>{d.value=w(g).add(1,"day").format("YYYY-MM-DD"),i.value=w(g).add(7,"day").format("YYYY-MM-DD"),y(),console.log(d.value)},A=g=>{d.value=w(g).format("YYYY-MM-01"),i.value=w(d.value).add(1,"month").format("YYYY-MM-DD"),y()},_=p([]),y=async()=>{const g={school_id:E().schoolInfo.id,limit:30,page:1,rank_mode:n.value[0],start_date:d.value,end_date:i.value,study_type:n.value[1]},C=await q(g);_.value=C},F=p("");return T(()=>{F.value=w().format("YYYY\u5E74MM\u6708DD\u65E5"),d.value=w().format("YYYY-MM-01"),i.value=w(d.value).add(1,"month").format("YYYY-MM-DD"),y()}),(g,C)=>{const P=B("el-date-picker");return r(),u("div",Ca,[e("div",null,[x(" <FourDataView></FourDataView> "),x(" \u5B8C\u6210\u91CF\u6982\u89C8 "),$(Lt,{dataSource:O(o),dataSourceAvg:O(s)},null,8,["dataSource","dataSourceAvg"]),e("div",Da,[$(ge)]),e("div",Ya,[e("div",xa,[ba,e("span",Aa,"\u66F4\u65B0\u65F6\u95F4\uFF1A"+a(F.value),1)]),(r(),u(R,null,S(l,f=>e("div",{class:"sort-sec",key:f.sortKey},[Ea,(r(!0),u(R,null,S(f.sortItem,D=>(r(),u("div",{class:oe(["lab-item",n.value[f.sortKey-1]==D.id?"active":""]),onClick:La=>I(f.sortKey,D.id),key:D.id},a(D.name),11,Ra))),128))])),64)),n.value[2]==1?(r(),u("div",Sa,[x(` <el-date-picker v-model="value1" style="width:400px;" type="daterange" align="right"\r
                        range-separator="~" start-placeholder="\u5468\u5F00\u59CB\u65E5\u671F" end-placeholder="\u5468\u7ED3\u675F\u65E5\u671F">\r
                    </el-date-picker> `),$(P,{modelValue:c.value,"onUpdate:modelValue":C[0]||(C[0]=f=>c.value=f),onChange:k,type:"week",format:"YYYY \u7B2C ww \u5468",placeholder:"\u9009\u62E9\u5468"},null,8,["modelValue"])])):x("v-if",!0),n.value[2]==2?(r(),u("div",Fa,[$(P,{modelValue:h.value,"onUpdate:modelValue":C[1]||(C[1]=f=>h.value=f),type:"month",placeholder:"\u9009\u62E9\u6708",onChange:A},null,8,["modelValue"])])):x("v-if",!0)]),_.value&&_.value.length?(r(),u("div",Ma,[n.value[0]=="grade"?(r(),u("div",Ba,[(r(!0),u(R,null,S(_.value,(f,D)=>(r(),u("div",{class:"mar-wrap",key:D},[$(Ct,{completeItem:f,completeIndex:D,startDate:d.value,endDate:i.value,studyType:n.value[1]},null,8,["completeItem","completeIndex","startDate","endDate","studyType"])]))),128))])):x("v-if",!0),n.value[0]=="class"?(r(),u("div",Oa,[(r(!0),u(R,null,S(_.value,(f,D)=>(r(),u("div",{class:"mar-wrap",key:D},[$(ka,{completeItem:f,completeIndex:D},null,8,["completeItem","completeIndex"])]))),128))])):x("v-if",!0)])):x("v-if",!0)])])}}},Wa=M(Va,[["__scopeId","data-v-985ed7fb"],["__file","E:/work/parents_school_institution_pc/src/views/dataCenterOfArea/studyReportForm/studyReportFormOfArea.vue"]]);export{Wa as default};
