import{h as o}from"./moment.9709ab41.js";import{c as q}from"./datacenter.1e85d4ff.js";import{u as z}from"./school.ec2888e9.js";import{b as P}from"./calcFunc.c66249ac.js";import{_ as B,r as b,o as c,g as C,w as Y,a as i,i as R,t as m,j as g,B as U,h as s,b as t,v as W,c as _,F as V,f as L,n as j,x as E,y as G}from"./index.01f4bbb8.js";import"./request.2b2b7e20.js";const H={class:"sum_amount"},J={__name:"TableForRank",props:{tableList:{type:Array,default:()=>[]},mode:{type:String,default:"student"},page:{type:Number,default:1}},setup(r){const k={background:"#f6f8fa"};return(l,p)=>{const n=b("el-table-column"),v=b("el-table");return c(),C(v,{data:r.tableList,style:{width:"100%"},"header-cell-style":k},{default:Y(()=>[i(n,{label:"\u6392\u540D",width:"100"},{default:Y(a=>[R(m(r.page*10+a.$index+1),1)]),_:1}),r.mode=="student"?(c(),C(n,{key:0,prop:"name",label:"\u5B66\u751F\u59D3\u540D",width:"200"})):g("",!0),r.mode=="student"?(c(),C(n,{key:1,prop:"wx_name",label:"\u5BB6\u957F\u59D3\u540D",width:"200"})):g("",!0),i(n,{label:"\u6240\u5728\u73ED\u7EA7",width:"200"},{default:Y(({row:a})=>[R(m(U(P)(a.year))+m(a.class)+"\u73ED ",1)]),_:1}),i(n,{prop:"sum_amount",label:"\u65B0\u589E\u5B66\u5206",fixed:"right",align:"center",width:"300"},{default:Y(({row:a})=>[s("span",H,m(a.sum_amount),1)]),_:1})]),_:1},8,["data"])}}},O=B(J,[["__scopeId","data-v-1aba184e"]]);const K=r=>(E("data-v-928621be"),r=r(),G(),r),Q={class:"study-report-container"},X={class:"sort-wrap"},Z=K(()=>s("div",{class:"title-time"},[s("span",{class:"study-tit"},"\u5B66\u5206\u6392\u884C\u699C")],-1)),ee=K(()=>s("span",{class:"o-char"},"\u5206\u7C7B\uFF1A",-1)),te=["onClick"],ae={key:0,class:"date-picker-wrap"},oe={key:1,class:"date-picker-wrap"},se={class:"data-wrap"},le={class:"flex-start",style:{margin:"18px 0 0 0"}},ne={class:"flex"},re={class:"record-char"},de={__name:"creditRanking",setup(r){const k=[{sortKey:1,sortItem:[{id:"",name:"\u7EFC\u5408"},{id:"daily",name:"\u6BCF\u65E5\u4E00\u5B66"},{id:"weekly",name:"\u6BCF\u5468\u4E00\u505A"},{id:"monthy",name:"\u6BCF\u6708\u4E00\u8BFE"}]},{sortKey:2,sortItem:[{id:2,name:"\u6708\u699C"},{id:1,name:"\u5468\u699C"}]},{sortKey:3,sortItem:[{id:"student",name:"\u5BB6\u957F\u6392\u540D"},{id:"class",name:"\u73ED\u7EA7\u6392\u540D"}]}],l=t(["",2,"student"]),p=t(""),n=t(""),v=t(""),a=t(""),f=t("");t(""),t([]);const N=(e,d)=>{l.value[e-1]=d,h()},M=t(""),w=t(""),A=e=>{a.value=o(e).add(1,"day").format("YYYY-MM-DD"),f.value=o(e).add(7,"day").format("YYYY-MM-DD"),h()},F=e=>{p.value=o(e).format("YYYY-MM-01"),e?v.value=o(e).format("M"):v.value="",n.value=o(p.value).add(1,"month").format("YYYY-MM-DD"),h()},x=t(0),D=t(1),T=e=>{D.value=e,h()},I=t([]),h=async()=>{const e={coin_id:1,school_id:z().schoolInfo.id,limit:10,page:D.value,mode:l.value[2],start_date:l.value[1]==2?p.value:a.value,end_date:l.value[1]==2?n.value:f.value,study_type:l.value[0]},d=await q(e);I.value=d.data,x.value=d.total};return W(()=>{v.value=o().month(),n.value=o().format("YYYY-MM-01"),p.value=o(n.value).subtract(1,"month").format("YYYY-MM-DD"),f.value=o().isoWeekday(0).format("YYYY-MM-DD"),a.value=o(f.value).subtract(6,"day").format("YYYY-MM-DD"),M.value=a.value,w.value=o().subtract(1,"month").format("YYYY-MM"),h()}),(e,d)=>{const S=b("el-date-picker"),$=b("el-pagination");return c(),_("div",Q,[s("div",null,[s("div",X,[Z,(c(),_(V,null,L(k,u=>s("div",{class:"sort-sec",key:u.sortKey},[ee,(c(!0),_(V,null,L(u.sortItem,y=>(c(),_("div",{class:j(["lab-item",l.value[u.sortKey-1]==y.id?"active":""]),onClick:ce=>N(u.sortKey,y.id),key:y.id},m(y.name),11,te))),128))])),64)),l.value[1]==1?(c(),_("div",ae,[i(S,{modelValue:M.value,"onUpdate:modelValue":d[0]||(d[0]=u=>M.value=u),onChange:A,type:"week",format:"YYYY \u7B2C ww \u5468",placeholder:"\u9009\u62E9\u5468"},null,8,["modelValue"])])):g("",!0),l.value[1]==2?(c(),_("div",oe,[i(S,{modelValue:w.value,"onUpdate:modelValue":d[1]||(d[1]=u=>w.value=u),type:"month",placeholder:"\u9009\u62E9\u6708",onChange:F},null,8,["modelValue"])])):g("",!0)]),s("div",se,[i(O,{tableList:I.value,mode:l.value[2],page:D.value-1},null,8,["tableList","mode","page"])]),s("div",le,[s("div",ne,[s("span",re,"\u5171"+m(x.value)+"\u6761\u8BB0\u5F55",1),i($,{background:"","page-size":10,"pager-count":5,layout:"prev, pager, next",total:x.value,onCurrentChange:T},null,8,["total"])])])])])}}},he=B(de,[["__scopeId","data-v-928621be"]]);export{he as default};
