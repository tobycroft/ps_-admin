import{_ as N,b as h,v as R,r as b,o as n,c as r,h as e,a as p,w as v,n as Y,F as C,f as D,B as T,g as F,j as G,i as j,t as c,C as B,D as W,x as K,y as O}from"./index.459154b7.js";import{_ as P,a as U}from"./edit_icon.ad516265.js";import{S as z,_ as J}from"./StudyCalendar.a591ff6f.js";import{u as I}from"./school.390e835c.js";import{r as Q,d as X}from"./study.687f9d58.js";import{h as l}from"./moment.9709ab41.js";import{g as Z}from"./ak.02252990.js";import{E as ee}from"./EveryWeekDetail.cfb1c933.js";import"./request.0caaa926.js";import"./week_theme_tag.ff8a4cfb.js";const d=y=>(K("data-v-c39278c6"),y=y(),O(),y),te={style:{display:"flex","justify-content":"space-between"}},se={class:"box-card"},oe={class:"card-header"},ae=d(()=>e("span",{style:{"white-space":"nowrap"}},"\u6240\u5C5E\u5E74\u7EA7\uFF1A",-1)),ne={class:"grade-btn-wrap"},ce=j("\u5168\u90E8"),le={class:"task-wrap"},de={class:"date-char"},re={class:"date"},ie={class:"week"},_e={class:"add-wrap"},ue=["src"],he=d(()=>e("span",null,"\u70B9\u51FB\u6DFB\u52A0\u5185\u5BB9",-1)),pe={class:"type"},ve={class:"type yellow"},ye={class:"date-char"},me={class:"date"},ke={class:"week"},we={class:"tag-wrap"},fe={class:"content"},ge={class:"flex"},Se=["onClick"],be=d(()=>e("img",{class:"icon",src:U,alt:""},null,-1)),Ce=d(()=>e("span",{class:"char"},"\u5220\u9664",-1)),De=[be,Ce],Ie=d(()=>e("div",{class:"btn"},[e("img",{class:"icon",src:P,alt:""}),e("span",{class:"char"},"\u7F16\u8F91")],-1)),xe=["onClick"],Ve=d(()=>e("img",{class:"icon",src:J,alt:""},null,-1)),Me=d(()=>e("span",{class:"char blue"},"\u67E5\u770B",-1)),$e=[Ve,Me],Ye={__name:"weeklyTaskView",setup(y){const q=I().gradeList,i=h(l().format("YYYY-MM-DD HH:mm:ss")),_=h(null),u=h([]),f=async()=>{const s={type:"weekly",date:i.value,school_id:I().schoolInfo.id,grade_id:_.value},o=await Q(s);u.value=o.filter(a=>!a.is_fobid)};R(()=>{f()});const A=s=>{i.value=l(s).format("YYYY-MM-DD HH:mm:ss"),f()},x=s=>{_.value=s,f()},V=s=>{const o=l(s).format("MM/DD"),a=l(s).add(6,"day").format("MM/DD");return o+" - "+a},M=s=>{const o=l(s).date(),a=l(s).year(),m=l(s).month()+1,k=l(`${a}-${m}-01`).isoWeekday();console.log("firstWeekday",k);const t=Math.ceil((o+k)/7);return["","\u7B2C\u4E00\u5468","\u7B2C\u4E8C\u5468","\u7B2C\u4E09\u5468","\u7B2C\u56DB\u5468","\u7B2C\u4E94\u5468","\u7B2C\u4E00\u5468"][t]},E=async(s,o)=>{const a={school_id:I().schoolInfo.id,study_id:s,fobid:!0};await X(a),u.value.splice(o,1)},H={konwStore:"/knowStore?type=weekly",customKnow:"/customKnow?type=weekly",addContent:"/createTask?type=weekly",remindSetting:"/remindSetting"},g=h(!1),$=h(0),L=s=>{$.value=s,g.value=!0};return(s,o)=>{const a=b("el-button"),m=b("router-link"),k=b("el-drawer");return n(),r("div",null,[e("div",te,[p(z,{onEmitDate:A,pathObj:H}),e("div",se,[e("div",oe,[ae,e("div",ne,[p(a,{class:Y(["button",{active:_.value==null}]),text:"",onClick:o[0]||(o[0]=t=>x(null))},{default:v(()=>[ce]),_:1},8,["class"]),(n(!0),r(C,null,D(T(q),t=>(n(),F(a,{onClick:S=>x(t.id),class:Y(["button",{active:_.value==t.id}]),text:"",key:t.id},{default:v(()=>[j(c(t.name),1)]),_:2},1032,["onClick","class"]))),128))])]),e("div",le,[!u.value||!u.value.length?(n(),F(m,{key:0,to:`/addContent?grade=${_.value}&date=${i.value}&type=weekly`,class:"no-task-status"},{default:v(()=>[e("div",de,[e("span",re,c(V(i.value)),1),e("span",ie,c(M(i.value)),1)]),e("div",_e,[e("img",{class:"add-img",src:T(Z)("content_add_icon.png"),alt:"\u6DFB\u52A0"},null,8,ue),he])]),_:1},8,["to"])):G("",!0),(n(!0),r(C,null,D(u.value,(t,S)=>(n(),r("div",{class:"task-item",key:t.id},[B(e("div",pe,"\u77E5\u8BC6\u5E93",512),[[W,t.is_custom===0]]),B(e("div",ve,"\u81EA\u5B9A\u4E49",512),[[W,t.is_custom==1]]),e("div",ye,[e("span",me,c(V(t.show_date)),1),e("span",ke,c(M(t.show_date)),1)]),e("h3",null,c(t.title),1),e("div",we,[(n(!0),r(C,null,D(t.common_tag,w=>(n(),r("div",{class:"yellow tag",key:w.id},c(w.name),1))),128))]),e("p",fe,c(t.slogan),1),e("div",ge,[e("div",{class:"btn",onClick:w=>E(t.id,S)},De,8,Se),p(m,{to:`/createTask?type=weekly&id=${t.id}&study_id=${t.study_id}`},{default:v(()=>[Ie]),_:2},1032,["to"]),e("div",{class:"btn",onClick:w=>L(t.id)},$e,8,xe)])]))),128))])])]),p(k,{modelValue:g.value,"onUpdate:modelValue":o[1]||(o[1]=t=>g.value=t),"with-header":!1},{default:v(()=>[p(ee,{lookStudyId:$.value},null,8,["lookStudyId"])]),_:1},8,["modelValue"])])}}},Ne=N(Ye,[["__scopeId","data-v-c39278c6"]]);export{Ne as default};
