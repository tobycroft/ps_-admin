import{h as o}from"./moment.9709ab41.js";import{c as T}from"./datacenter.73092ee7.js";import{u as $}from"./school.8bb1d4d5.js";import{b as q}from"./calcFunc.cc5fbb15.js";import{_ as V,r as y,o as u,g as z,w as M,a as l,i as P,t as h,B as U,h as s,b as t,v as W,c as _,F as I,f as R,j as S,n as j,x as E,y as G}from"./index.df39f28b.js";import"./request.2b6cb426.js";const H={class:"sum_amount"},J={__name:"TableForRank",props:{tableList:{type:Array,default:()=>[]}},setup(i){const k={background:"#f6f8fa"};return(c,m)=>{const a=y("el-table-column"),p=y("el-table");return u(),z(p,{data:i.tableList,style:{width:"100%"},"header-cell-style":k},{default:M(()=>[l(a,{label:"\u6392\u540D",width:"100",type:"index"}),l(a,{prop:"name",label:"\u5B66\u751F\u59D3\u540D",width:"200"}),l(a,{prop:"wx_name",label:"\u5BB6\u957F\u59D3\u540D",width:"200"}),l(a,{label:"\u6240\u5728\u73ED\u7EA7",width:"200"},{default:M(({row:n})=>[P(h(U(q)(n.year))+"-"+h(n.class)+"\u73ED ",1)]),_:1}),l(a,{prop:"teacher_name",label:"\u73ED\u4E3B\u4EFB\u59D3\u540D",width:"480"}),l(a,{prop:"sum_amount",label:"\u65B0\u589E\u5B66\u5206",fixed:"right",align:"center",width:"300"},{default:M(({row:n})=>[s("span",H,h(n.sum_amount),1)]),_:1})]),_:1},8,["data"])}}},O=V(J,[["__scopeId","data-v-7fc663ae"]]);const L=i=>(E("data-v-f59d4f90"),i=i(),G(),i),Q={class:"study-report-container"},X={class:"sort-wrap"},Z=L(()=>s("div",{class:"title-time"},[s("span",{class:"study-tit"},"\u5B66\u5206\u6392\u884C\u699C")],-1)),ee=L(()=>s("span",{class:"o-char"},"\u5206\u7C7B\uFF1A",-1)),te=["onClick"],ae={key:0,class:"date-picker-wrap"},oe={key:1,class:"date-picker-wrap"},se={class:"data-wrap"},le={class:"flex-start",style:{margin:"18px 0 0 0"}},ne={class:"flex"},re={class:"record-char"},ce={__name:"creditRanking",setup(i){const k=[{sortKey:1,sortItem:[{id:"",name:"\u7EFC\u5408"},{id:"daily",name:"\u6BCF\u65E5\u4E00\u5B66"},{id:"weekly",name:"\u6BCF\u5468\u4E00\u505A"},{id:"monthy",name:"\u6BCF\u6708\u4E00\u8BFE"}]},{sortKey:2,sortItem:[{id:2,name:"\u6708\u699C"},{id:1,name:"\u5468\u699C"}]}],c=t(["",2]),m=t(""),a=t(""),p=t(""),n=t(""),f=t("");t(""),t([]);const B=(e,r)=>{c.value[e-1]=r,v()},b=t(""),g=t(""),A=e=>{n.value=o(e).add(1,"day").format("YYYY-MM-DD"),f.value=o(e).add(7,"day").format("YYYY-MM-DD"),v()},F=e=>{m.value=o(e).format("YYYY-MM-01"),e?p.value=o(e).format("M"):p.value="",a.value=o(m.value).add(1,"month").format("YYYY-MM-DD"),v()},w=t(0),x=t(1),K=e=>{x.value=e,v()},D=t([]),v=async()=>{const e={coin_id:1,school_id:$().schoolInfo.id,limit:10,page:x.value,start_date:c.value[1]==2?m.value:n.value,end_date:c.value[1]==2?a.value:f.value,study_type:c.value[0]},r=await T(e);D.value=r.data,w.value=r.total};return W(()=>{p.value=o().month(),a.value=o().format("YYYY-MM-01"),m.value=o(a.value).subtract(1,"month").format("YYYY-MM-DD"),f.value=o().isoWeekday(0).format("YYYY-MM-DD"),n.value=o(f.value).subtract(6,"day").format("YYYY-MM-DD"),b.value=n.value,g.value=o().subtract(1,"month").format("YYYY-MM"),v()}),(e,r)=>{const C=y("el-date-picker"),N=y("el-pagination");return u(),_("div",Q,[s("div",null,[s("div",X,[Z,(u(),_(I,null,R(k,d=>s("div",{class:"sort-sec",key:d.sortKey},[ee,(u(!0),_(I,null,R(d.sortItem,Y=>(u(),_("div",{class:j(["lab-item",c.value[d.sortKey-1]==Y.id?"active":""]),onClick:de=>B(d.sortKey,Y.id),key:Y.id},h(Y.name),11,te))),128))])),64)),c.value[1]==1?(u(),_("div",ae,[l(C,{modelValue:b.value,"onUpdate:modelValue":r[0]||(r[0]=d=>b.value=d),onChange:A,type:"week",format:"YYYY \u7B2C ww \u5468",placeholder:"\u9009\u62E9\u5468"},null,8,["modelValue"])])):S("",!0),c.value[1]==2?(u(),_("div",oe,[l(C,{modelValue:g.value,"onUpdate:modelValue":r[1]||(r[1]=d=>g.value=d),type:"month",placeholder:"\u9009\u62E9\u6708",onChange:F},null,8,["modelValue"])])):S("",!0)]),s("div",se,[l(O,{tableList:D.value},null,8,["tableList"])]),s("div",le,[s("div",ne,[s("span",re,"\u5171"+h(w.value)+"\u6761\u8BB0\u5F55",1),l(N,{background:"","page-size":10,"pager-count":5,layout:"prev, pager, next",total:w.value,onCurrentChange:K},null,8,["total"])])])])])}}},he=V(ce,[["__scopeId","data-v-f59d4f90"]]);export{he as default};
