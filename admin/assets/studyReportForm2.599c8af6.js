import{_ as M,u as J,b as d,v as q,o,c as l,h as e,t as s,x as L,y as N,r as P,B as x,j as v,a as C,w as X,C as R,D as B,Y as ee,Z as te,F as b,f as Y,P as ae,d as se,k as oe,T as le,g as T,n as ce,Q as ne}from"./index.4d67c40e.js";import{a as re,b as z}from"./datacenter.2bfee966.js";import{u as A}from"./school.b8a58005.js";import{u as K}from"./teacher.a9f48236.js";import{h as G}from"./handleView.1fe4a9fc.js";import{s as ue,z as de}from"./study.0a4c9648.js";import{h as m}from"./moment.9709ab41.js";import{g as ie}from"./ak.cc808f0c.js";import{_ as _e}from"./nodata_status.b4bc20a4.js";import"./request.53008289.js";const U=t=>(L("data-v-4ce2ce80"),t=t(),N(),t),me={class:"all-complete-box flex"},ve={class:"left-box"},he={class:"num"},pe=U(()=>e("span",{class:"per-char"},"%",-1)),ye=U(()=>e("span",{class:"per-char"},"\u5168\u6821\u7D2F\u8BA1\u5B8C\u6210\u6CE8\u518C\u7387",-1)),fe={__name:"PerAllComplete",setup(t){const c=J(),r=()=>{c.push({path:"/CompletionRate"})},n=d(0),k=async()=>{const h={school_id:A().schoolInfo.id},a=await re(h);if(a){const i=a.parent_count||0,f=a.student_should_count||0;f?n.value=Math.ceil(i/f*100):n.value=100}};return q(()=>{k()}),(h,a)=>(o(),l("div",me,[e("div",ve,[e("span",he,s(n.value),1),pe,ye]),e("div",{class:"look-char",onClick:r},"\u67E5\u770B\u8BE6\u60C5")]))}},ge=M(fe,[["__scopeId","data-v-4ce2ce80"]]);const F=t=>(L("data-v-cc89336b"),t=t(),N(),t),ke={class:"grade-class-rank-container"},we={class:"right-data-wrap"},Ie={class:"progress-complete"},$e={class:"progress-box"},Ce={class:"flex"},De={class:"gc-char"},be={class:"cp-char-box"},Ye={key:0,class:"cp-char"},xe={key:1,class:"cp-char"},Me={key:2,class:"cp-char"},Se={key:0,class:"per-char gold"},Ee={key:1,class:"per-char silver"},Re={key:2,class:"per-char copper"},Be={class:"data-box flex"},Ae={class:"data-detail-wrap"},Fe=F(()=>e("span",{class:"data-char"},"\u6570\u636E\u6982\u89C8",-1)),Ve={class:"data-item"},Le={class:"num-char"},Ne=F(()=>e("div",{class:"char"},"\u5B66\u4E60\u4EBA\u6B21",-1)),Pe={class:"data-item"},Oe={class:"num-char"},je=F(()=>e("div",{class:"char"},"\u5E74\u7EA7\u4EBA\u6570",-1)),Te={class:"data-item"},qe={class:"num-char"},ze=F(()=>e("div",{class:"char"},"\u6BCF\u65E5\u4E00\u5B66",-1)),Ke={class:"data-item"},Ge={class:"num-char"},Ue=F(()=>e("div",{class:"char"},"\u6BCF\u5468\u4E00\u505A",-1)),We={class:"detail-char"},Qe={class:"class-item-wrap"},Ze={class:"flex"},He={class:"class-sec"},Je={class:"class-char"},Xe={key:0,class:"per-char gold"},et={key:1,class:"per-char silver"},tt={key:2,class:"per-char copper"},at={class:"teacher-sec flex"},st={class:"teacher-char"},ot={class:"teacher-char"},lt={class:"progress-wrap"},ct={class:"count-sec flex"},nt={class:"count-tag"},rt={class:"count-tag"},ut={__name:"GradeClassRank2",props:{completeItem:{type:Object},completeIndex:{type:Number,default:0},startDate:{type:String,default:""},endDate:{type:String,default:""},filter:{type:String,default:""},rankMode:{type:Number,default:1},currentMonth:{type:Number,default:1}},setup(t,{expose:c}){const r=t,n=d([]),k=async _=>{const p={school_id:A().schoolInfo.id,limit:30,page:1,rank_mode:"class",start_date:r.startDate,end_date:r.endDate,study_type:"all",filter:r.filter,year:_},D=await z(p);n.value=D},h=()=>{a.value=!1},a=d(!1),i=_=>{a.value=!a.value,a.value&&k(_)},f=(_,p)=>{const D=K().teacherList;for(const u of D)if(u.year==_&&u.class_id==p)return u.name},w=_=>Math.ceil(Number(_)*100);return c({doSth:h}),(_,p)=>{const D=P("el-icon");return o(),l("div",ke,[e("div",we,[e("div",Ie,[e("div",$e,[e("div",Ce,[e("span",De,s(x(G)(t.completeItem.year).name),1)]),e("div",be,[t.completeItem.rate=="\u91D1\u699C"?(o(),l("span",Ye,s(t.currentMonth)+"\u6708\u5B66\u4E60\u5B8C\u6210\u7387\u5927\u4E8E60% ",1)):v("",!0),t.completeItem.rate=="\u94F6\u699C"?(o(),l("span",xe,s(t.currentMonth)+"\u6708\u5B66\u4E60\u5B8C\u6210\u7387\u5927\u4E8E40%",1)):v("",!0),t.completeItem.rate=="\u94DC\u699C"?(o(),l("span",Me,s(t.currentMonth)+"\u6708\u5B66\u4E60\u5B8C\u6210\u7387\u5927\u4E8E20%",1)):v("",!0)])]),t.completeItem.rate=="\u91D1\u699C"?(o(),l("span",Se,s(t.completeItem.rate),1)):v("",!0),t.completeItem.rate=="\u94F6\u699C"?(o(),l("span",Ee,s(t.completeItem.rate),1)):v("",!0),t.completeItem.rate=="\u94DC\u699C"?(o(),l("span",Re,s(t.completeItem.rate),1)):v("",!0)]),e("div",Be,[e("div",Ae,[Fe,e("div",Ve,[e("div",Le,s(t.completeItem.all),1),Ne]),e("div",Pe,[e("div",Oe,s(t.completeItem.student_count),1),je]),e("div",Te,[e("div",qe,s(w(t.completeItem.daily_percent))+"% ",1),ze]),e("div",Ke,[e("div",Ge,s(w(t.completeItem.weekly_percent))+"% ",1),Ue])]),e("div",{class:"sw-btn",onClick:p[0]||(p[0]=u=>i(t.completeItem.year))},[e("span",We,s(a.value?"\u6536\u8D77":"\u67E5\u770B")+"\u5E74\u7EA7\u5404\u73ED\u8BE6\u60C5",1),C(D,null,{default:X(()=>[R(C(x(ee),{class:"arr-icon"},null,512),[[B,a.value]]),R(C(x(te),{class:"arr-icon"},null,512),[[B,!a.value]])]),_:1})])]),R(e("div",Qe,[(o(!0),l(b,null,Y(n.value,(u,S)=>(o(),l("div",{class:"class-item",key:S},[e("div",Ze,[e("div",He,[e("span",Je,s(u.class_id)+"\u73ED",1)]),u.rate=="\u91D1\u699C"?(o(),l("span",Xe,s(u.rate),1)):v("",!0),u.rate=="\u94F6\u699C"?(o(),l("span",et,s(u.rate),1)):v("",!0),u.rate=="\u94DC\u699C"?(o(),l("span",tt,s(u.rate),1)):v("",!0)]),e("div",at,[e("span",st,"\u73ED\u4E3B\u4EFB\uFF1A"+s(f(u.year,u.class_id)),1),e("span",ot,"\u5B66\u4E60\u5B8C\u6210\u7387"+s(w(u.all_percent))+"%",1)]),e("div",lt,[e("div",{class:"progress-item",style:ae(`width: ${w(u.all_percent)}%`)},null,4)]),e("div",ct,[e("div",nt,"\u5B66\u4E60\u4EBA\u6B21\uFF1A"+s(u.all),1),e("div",rt,"\u73ED\u7EA7\u4EBA\u6570\uFF1A"+s(u.student_count),1)])]))),128))],512),[[B,a.value]])])])}}},dt=M(ut,[["__scopeId","data-v-cc89336b"]]);function it(){const t=d({}),c=d({}),r=async()=>{const h={school_id:A().getSchoolInfo.id,type:"term"},a=await ue(h);t.value=a},n=async()=>{const h={school_id:A().getSchoolInfo.id},a=await de(h);c.value=a};return r(),n(),{studyDashboardCompleteCountRef:t,studyDashboardCompleteDailyRef:c}}const _t=se({name:"CompletedAmountOverview",props:{dataSource:{type:Object,default:()=>({})},dataSourceAvg:{type:Object,default:()=>({})}},setup(t){const c=d({total:{title:"\u603B\u8BBF\u95EE\u91CF",icon:"overview_total_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u8BBF\u95EE\u91CF",num:0}},daily:{title:"\u6BCF\u65E5\u4E00\u5B66\u603B\u5B66\u4E60\u91CF",icon:"overview_daily_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u5B66\u4E60\u91CF",num:0}},weekly:{title:"\u6BCF\u5468\u4E00\u505A\u603B\u5B8C\u6210\u91CF",icon:"overview_weekly_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u5B8C\u6210\u91CF",num:0}},monthy:{title:"\u6BCF\u6708\u4E00\u8BFE\u603B\u5B66\u4E60\u91CF",icon:"overview_monthly_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u5B66\u4E60\u91CF",num:0}}}),r=d(t.dataSource),n=d(t.dataSourceAvg);return oe(()=>{r.value=t.dataSource,n.value=t.dataSourceAvg,Object.keys(r.value).length>0&&(c.value.total.num=r.value.total_all,c.value.total.tag.num=r.value.all_today,c.value.total.averageDaily.num=Math.ceil(n.value.all_num/n.value.day_num),c.value.daily.num=r.value.total_daily,c.value.daily.tag.num=r.value.daily,c.value.daily.averageDaily.num=Math.ceil(n.value.daily/n.value.day_num),c.value.weekly.num=r.value.total_weekly,c.value.weekly.tag.num=r.value.weekly_today,c.value.weekly.averageDaily.num=Math.ceil(n.value.weekly/n.value.day_num),c.value.monthy.num=r.value.total_monthy,c.value.monthy.tag.num=r.value.monthy_today,c.value.monthy.averageDaily.num=Math.ceil(n.value.monthy/n.value.day_num))}),{overviewListRef:c,getImageUrl:ie}}});const mt={class:"completed-amount-overview-container"},vt={class:"completed-amount-overview-ul flex"},ht={class:"el-card-style","body-style":{padding:"0px"}},pt={class:"flex"},yt={class:"title-style"},ft={class:"flex-start align-end"},gt={class:"total-num-style"},kt={class:"tag-box flex-center"},wt={class:"flex-start"},It={class:"average-daily-title-style"},$t={class:"average-daily-num-style"};function Ct(t,c,r,n,k,h){const a=P("el-image");return o(),l("div",mt,[e("ul",vt,[(o(!0),l(b,null,Y(t.overviewListRef,(i,f)=>(o(),l("li",{key:f,class:"completed-amount-overview-li"},[e("div",ht,[e("header",pt,[e("p",yt,s(i.title),1),C(a,{class:"header-icon-style",src:t.getImageUrl(i.icon+".png")},null,8,["src"])]),e("article",ft,[e("p",gt,s(i.num),1),e("div",kt,[e("p",null,s(i.tag.title),1),e("p",null,s(i.tag.num),1)])]),e("footer",wt,[e("p",It,s(i.averageDaily.title),1),e("p",$t,s(i.averageDaily.num),1)])])]))),128))])])}const Dt=M(_t,[["render",Ct],["__scopeId","data-v-7331e030"]]);const bt={class:"class-item"},Yt={class:"flex"},xt={class:"class-sec"},Mt={class:"class-char"},St={key:0,class:"per-char gold"},Et={key:1,class:"per-char silver"},Rt={key:2,class:"per-char copper"},Bt={class:"teacher-sec flex"},At={class:"teacher-char"},Ft={class:"teacher-char"},Vt={class:"count-sec flex"},Lt={class:"count-tag"},Nt={class:"count-tag"},Pt={__name:"ClassRankForComplete2",props:{completeItem:{type:Object,default:()=>{}}},setup(t){const c=(n,k)=>{const h=K().teacherList;for(const a of h)if(a.year==n&&a.class_id==k)return a.name},r=n=>Math.ceil(Number(n)*100);return(n,k)=>(o(),l("div",bt,[e("div",Yt,[e("div",xt,[e("span",Mt,s(x(G)(t.completeItem.year).name)+" "+s(t.completeItem.class_id)+"\u73ED ",1)]),t.completeItem.rate=="\u91D1\u699C"?(o(),l("span",St,s(t.completeItem.rate),1)):v("",!0),t.completeItem.rate=="\u94F6\u699C"?(o(),l("span",Et,s(t.completeItem.rate),1)):v("",!0),t.completeItem.rate=="\u94DC\u699C"?(o(),l("span",Rt,s(t.completeItem.rate),1)):v("",!0)]),e("div",Bt,[e("span",At,"\u73ED\u4E3B\u4EFB\uFF1A"+s(c(t.completeItem.year,t.completeItem.class_id)),1),e("span",Ft,"\u5B66\u4E60\u5B8C\u6210\u7387"+s(r(t.completeItem.all_percent))+"%",1)]),e("div",Vt,[e("div",Lt,"\u5B66\u4E60\u4EBA\u6B21\uFF1A"+s(t.completeItem.all),1),e("div",Nt,"\u73ED\u7EA7\u4EBA\u6570\uFF1A"+s(t.completeItem.student_count),1)])]))}},Ot=M(Pt,[["__scopeId","data-v-15655eb5"]]);const jt={},W=t=>(L("data-v-14029ae3"),t=t(),N(),t),Tt={class:"nodata-status-container"},qt=W(()=>e("img",{class:"nodata-img",src:_e,alt:""},null,-1)),zt=W(()=>e("span",{class:"nodata-char"},"\u6682\u65E0\u6570\u636E\u5185\u5BB9\uFF0C\u770B\u770B\u5176\u4ED6\u7684\u5427~",-1)),Kt=[qt,zt];function Gt(t,c){return o(),l("div",Tt,Kt)}const Ut=M(jt,[["render",Gt],["__scopeId","data-v-14029ae3"]]);const Q=t=>(L("data-v-b952a83b"),t=t(),N(),t),Wt={class:"study-report-container"},Qt={class:"all-wrap"},Zt={class:"sort-wrap"},Ht={class:"title-time"},Jt=Q(()=>e("span",{class:"study-tit"},"\u5B66\u4E60\u5B8C\u6210\u699C",-1)),Xt={class:"time-char"},ea=Q(()=>e("span",{class:"o-char"},"\u5206\u7C7B\uFF1A",-1)),ta=["onClick"],aa={key:0,class:"date-picker-wrap"},sa={class:"ranking_list_name"},oa={key:1,class:"date-picker-wrap"},la={class:"ranking_list_name"},ca={key:0,class:"data-wrap"},na={key:0},ra={key:1},ua={class:"class-item-wrap"},da={__name:"studyReportForm2",setup(t){const{studyDashboardCompleteCountRef:c,studyDashboardCompleteDailyRef:r}=it(),n=[{sortKey:1,sortItem:[{id:"",name:"\u5168\u90E8"},{id:"\u91D1\u699C",name:"\u91D1\u699C"},{id:"\u94F6\u699C",name:"\u94F6\u699C"},{id:"\u94DC\u699C",name:"\u94DC\u699C"}]},{sortKey:2,sortItem:[{id:1,name:"\u5468\u5B66\u52E4"},{id:2,name:"\u6708\u5B66\u52E4"}]}],{proxy:k}=le(),h=()=>{k.$refs.gradeRef.map(y=>{y.doSth()})},a=d(["",1,"grade"]),i=d(""),f=d(""),w=d(""),_=d(""),p=d("");d("");const D=(y,I)=>{I===""?a.value[2]="grade":["\u91D1\u699C","\u94F6\u699C","\u94DC\u699C"].includes(I)&&(a.value[2]="class"),a.value[y-1]=I,V(),ne(()=>{h()})},u=d(""),S=d(""),Z=y=>{m.locale("zh-cn",{week:{dow:1}}),_.value=m(y).add(1,"day").format("YYYY-MM-DD"),p.value=m(y).add(7,"day").format("YYYY-MM-DD"),V()},H=y=>{i.value=m(y).format("YYYY-MM-01"),y?w.value=m(y).format("M"):w.value="",f.value=m(i.value).add(1,"month").format("YYYY-MM-DD"),V()},E=d([]),V=async()=>{const y={school_id:A().schoolInfo.id,limit:30,page:1,rank_mode:a.value[2],start_date:a.value[1]==2?i.value:_.value,end_date:a.value[1]==2?f.value:p.value,study_type:"all",filter:a.value[0]},I=await z(y);E.value=I},O=d("");return q(()=>{m.locale("zh-cn",{week:{dow:1}}),O.value=m().format("YYYY\u5E74MM\u6708DD\u65E5"),w.value=m().month(),f.value=m().format("YYYY-MM-01"),i.value=m(f.value).subtract(1,"month").format("YYYY-MM-DD"),p.value=m().isoWeekday(0).format("YYYY-MM-DD"),_.value=m(p.value).subtract(6,"day").format("YYYY-MM-DD"),u.value=_.value,S.value=m().subtract(1,"month").format("YYYY-MM"),V()}),(y,I)=>{const j=P("el-date-picker");return o(),l("div",Wt,[e("div",null,[C(Dt,{dataSource:x(c),dataSourceAvg:x(r)},null,8,["dataSource","dataSourceAvg"]),e("div",Qt,[C(ge)]),e("div",Zt,[e("div",Ht,[Jt,e("span",Xt,"\u66F4\u65B0\u65F6\u95F4\uFF1A"+s(O.value),1)]),(o(),l(b,null,Y(n,g=>e("div",{class:"sort-sec",key:g.sortKey},[ea,(o(!0),l(b,null,Y(g.sortItem,$=>(o(),l("div",{class:ce(["lab-item",a.value[g.sortKey-1]==$.id?"active":""]),onClick:ia=>D(g.sortKey,$.id),key:$.id},s($.name),11,ta))),128))])),64)),a.value[1]==1?(o(),l("div",aa,[R(e("div",sa," \u9009\u62E9\u65F6\u95F4\uFF1A ",512),[[B,w.value]]),C(j,{modelValue:u.value,"onUpdate:modelValue":I[0]||(I[0]=g=>u.value=g),onChange:Z,type:"week","picker-options":{firstDayOfWeek:1},format:`${_.value} - ${p.value}`,placeholder:"\u9009\u62E9\u65F6\u95F4"},null,8,["modelValue","format"])])):v("",!0),a.value[1]==2?(o(),l("div",oa,[R(e("div",la," \u9009\u62E9\u6708\u4EFD\uFF1A ",512),[[B,w.value]]),C(j,{modelValue:S.value,"onUpdate:modelValue":I[1]||(I[1]=g=>S.value=g),type:"month",placeholder:"\u9009\u62E9\u6708",onChange:H},null,8,["modelValue"])])):v("",!0)]),E.value&&E.value.length?(o(),l("div",ca,[a.value[0]===""?(o(),l("div",na,[(o(!0),l(b,null,Y(E.value,(g,$)=>(o(),l("div",{class:"mar-wrap",key:$},[C(dt,{ref_for:!0,ref:"gradeRef",completeItem:g,completeIndex:$,startDate:a.value[1]==2?i.value:_.value,endDate:a.value[1]==2?f.value:p.value,filter:a.value[0],rankMode:a.value[2],currentMonth:w.value},null,8,["completeItem","completeIndex","startDate","endDate","filter","rankMode","currentMonth"])]))),128))])):(o(),l("div",ra,[e("div",ua,[(o(!0),l(b,null,Y(E.value,(g,$)=>(o(),T(Ot,{completeItem:g,key:$},null,8,["completeItem"]))),128))])]))])):(o(),T(Ut,{key:1}))])])}}},Ia=M(da,[["__scopeId","data-v-b952a83b"]]);export{Ia as default};
