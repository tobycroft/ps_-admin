import{g as j,a as K}from"./ak.70a0bce5.js";import{d as D,r as c,k as F,_ as P,b as u,o as C,c as f,g as _,F as L,f as T,e as s,w as g,t as h,s as B,v as O,x as M,n as X,j as z,i as E,h as Q,u as J}from"./index.2bef03c3.js";import{i as N,C as k,D as q}from"./CustomCard.4a74f462.js";import{h as R}from"./moment.9709ab41.js";import{u as w,r as Z}from"./school.a4b24b87.js";import{u as ee,f as ae,a as ne}from"./family.c3267cf8.js";import{a as te,d as oe,b as se,e as ie,f as re,g as le,s as ce,h as ue}from"./study.e0c81c67.js";const de=D({name:"CompletedAmountOverview",props:{dataSource:{type:Object,default:()=>({})},dataSourceAvg:{type:Object,default:()=>({})}},setup(e){const a=c({total:{title:"\u603B\u8BBF\u95EE\u91CF",icon:"overview_total_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u8BBF\u95EE\u91CF",num:0}},daily:{title:"\u6BCF\u65E5\u4E00\u5B66\u603B\u5B66\u4E60\u91CF",icon:"overview_daily_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u5B66\u4E60\u91CF",num:0}},weekly:{title:"\u6BCF\u5468\u4E00\u505A\u603B\u5B8C\u6210\u91CF",icon:"overview_weekly_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u5B8C\u6210\u91CF",num:0}},monthy:{title:"\u6BCF\u6708\u4E00\u8BFE\u603B\u5B66\u4E60\u91CF",icon:"overview_monthly_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u5B66\u4E60\u91CF",num:0}}}),n=c(e.dataSource),t=c(e.dataSourceAvg);return F(()=>{n.value=e.dataSource,t.value=e.dataSourceAvg,Object.keys(n.value).length>0&&(a.value.total.num=n.value.daily+n.value.weekly+n.value.monthy,a.value.total.tag.num=n.value.all_today,a.value.total.averageDaily.num=Math.ceil(t.value.all_num/t.value.day_num),a.value.daily.num=n.value.daily,a.value.daily.tag.num=n.value.daily,a.value.daily.averageDaily.num=Math.ceil(t.value.daily/t.value.day_num),a.value.weekly.num=n.value.weekly,a.value.weekly.tag.num=n.value.weekly_today,a.value.weekly.averageDaily.num=Math.ceil(t.value.weekly/t.value.day_num),a.value.monthy.num=n.value.monthy,a.value.monthy.tag.num=n.value.monthy_today,a.value.monthy.averageDaily.num=Math.ceil(t.value.monthy/t.value.day_num))}),{overviewListRef:a,getImageUrl:j}}});const _e={class:"completed-amount-overview-container"},pe={class:"completed-amount-overview-ul flex"},me={class:"flex"},ge={class:"title-style"},Ce={class:"flex-start align-end"},ye={class:"total-num-style"},fe={class:"tag-box flex-center"},ve={class:"flex-start"},he={class:"average-daily-title-style"},Pe={class:"average-daily-num-style"};function De(e,a,n,t,l,i){const o=u("el-image"),r=u("el-card");return C(),f("div",_e,[_("ul",pe,[(C(!0),f(L,null,T(e.overviewListRef,(d,y)=>(C(),f("li",{key:y,class:"completed-amount-overview-li"},[s(r,{class:"el-card-style","body-style":{padding:"0px"}},{default:g(()=>[_("header",me,[_("p",ge,h(d.title),1),s(o,{class:"header-icon-style",src:e.getImageUrl(d.icon+".png")},null,8,["src"])]),_("article",Ce,[_("p",ye,h(d.num),1),_("div",fe,[_("p",null,h(d.tag.title),1),_("p",null,h(d.tag.num),1)])]),_("footer",ve,[_("p",he,h(d.averageDaily.title),1),_("p",Pe,h(d.averageDaily.num),1)])]),_:2},1024)]))),128))])])}const Ae=P(de,[["render",De],["__scopeId","data-v-13e0d649"]]),be=D({name:"LearningTrend",props:{echartsData:{type:[Array,Object],default:()=>[]},dateType:{type:String,defualt:""}},setup(e){const a=c(),n=c(),t=c(["01\u65E5","02\u65E5","03\u65E5","04\u65E5","05\u65E5","06\u65E5"]),l=c([1e3,2e3,3e3,4e3,5e3,6e3]),i=(o,r)=>{const d=[];o.forEach(A=>{A.type===r&&d.push(A)});const y=new Set(d),v=Array.from(y),m=[],p=[];return Array.isArray(v)&&v.forEach(A=>{A.dates&&m.push(A.dates),A.count&&p.push(A.count)}),{xAxisData:m,seriesData:p}};return B(()=>{const o=document.getElementById("LearningTrendChart"),r=N(o);F(()=>{a.value=e.echartsData,n.value=e.dateType;const d=i(a.value,n.value);t.value=d.xAxisData,l.value=d.seriesData;const y=c({xAxis:{type:"category",data:t.value},yAxis:{type:"value"},grid:{top:"5%",left:"5%"},series:[{data:l.value,type:"bar",barWidth:"24",itemStyle:{borderRadius:0,color:"#1890FF"}}]});y.value&&r.setOption(y.value)})}),{}}});const U=e=>(O("data-v-f659322c"),e=e(),M(),e),Ee={class:"learning-trend-container"},Re=U(()=>_("header",null,[_("p",{class:"title-style"},"\u5B66\u4E60\u8D8B\u52BF")],-1)),Fe=U(()=>_("article",null,[_("div",{id:"LearningTrendChart",class:"learning-trend-chart"})],-1)),Se=[Re,Fe];function we(e,a,n,t,l,i){return C(),f("div",Ee,Se)}const ke=P(be,[["render",we],["__scopeId","data-v-f659322c"]]);function I(){const e=(t,l)=>{const i=w().classList;console.log("calssList :>> ",i,Array.isArray(i));let o={id:-1,name:"\u5F02\u5E38\u6570\u636E"};return Array.isArray(i)&&(o=i[l]),`${a(t)}(${o?o.name:""})`},a=t=>{const l=w().gradeList;let i={id:-1,name:"\u5F02\u5E38\u6570\u636E"};if(Array.isArray(l))return i=l[parseInt(R().format("YYYY"))-t],i.name};return{getGradeClassName:e,getGraderName:a,getParentsName:t=>`${ee().getFamilyRoleList[t].name}`}}const Ie=D({name:"CustomStudyRanking",props:{listData:{type:[Array,Object],defualt:()=>[]}},setup(e){const a=c(),n=l=>{const i=[];for(const o of l)i.push({name:I().getGradeClassName(o.year,o.class),num:`${o.count}\u4EBA`});return i},t=c([{name:"\u4E00\u5E74\u7EA7\uFF082\uFF09\u73ED",num:"120\u4EBA"},{name:"\u4E00\u5E74\u7EA7\uFF082\uFF09\u73ED",num:"120\u4EBA"},{name:"\u4E00\u5E74\u7EA7\uFF082\uFF09\u73ED",num:"120\u4EBA"},{name:"\u4E00\u5E74\u7EA7\uFF082\uFF09\u73ED",num:"120\u4EBA"},{name:"\u4E00\u5E74\u7EA7\uFF082\uFF09\u73ED",num:"120\u4EBA"},{name:"\u4E00\u5E74\u7EA7\uFF082\uFF09\u73ED",num:"120\u4EBA"},{name:"\u4E00\u5E74\u7EA7\uFF082\uFF09\u73ED",num:"120\u4EBA"}]);return F(()=>{if(a.value=e.listData,a.value!==void 0&&a.value.data){t.value=n(a.value.data);return}t.value=[],console.log("StudyRankingListRef.value :>> ",t.value)}),{StudyRankingListRef:t}}});const $e={class:"custom-study-ranking-container"},Le={key:0,class:"study-ranking-ul"},Te={class:"left-box-style flex-start"},Oe={class:"study-ranking-name-style"},Me={class:"study-ranking-num-style"};function Be(e,a,n,t,l,i){return C(),f("div",$e,[e.StudyRankingListRef.length>0?(C(),f("ul",Le,[(C(!0),f(L,null,T(e.StudyRankingListRef,(o,r)=>(C(),f("li",{key:r,class:"study-ranking-li flex"},[_("div",Te,[_("p",{class:X(["study-ranking-sort-style",{"top-three-sort-style":r<=2,"top-other-sort-style":r>2}])},h(r+1),3),_("p",Oe,h(o.name),1)]),_("p",Me,h(o.num),1)]))),128))])):z("",!0)])}const W=P(Ie,[["render",Be],["__scopeId","data-v-684f5e50"]]),Ge=D({name:"StudyRanking",components:{CustomStudyRanking:W},props:{listData:{type:[Array,Object],defualt:()=>[]}},setup(e){const a=c();return F(()=>{a.value=e.listData}),{listDataRef:a}}});const Ne=e=>(O("data-v-2ed10ece"),e=e(),M(),e),Ue={class:"study-ranking-container"},We=Ne(()=>_("header",null,[_("p",{class:"title-style"},"\u73ED\u7EA7\u5B66\u4E60\u4EBA\u6570\u6392\u540D")],-1));function xe(e,a,n,t,l,i){const o=u("CustomStudyRanking");return C(),f("div",Ue,[We,_("article",null,[s(o,{listData:e.listDataRef},null,8,["listData"])])])}const Ve=P(Ge,[["render",xe],["__scopeId","data-v-2ed10ece"]]);function Ye(){const e=c("daily"),a=c("2022-08-19"),n=c("2022-08-19"),t=()=>{a.value=R().format("YYYY-MM-DD"),n.value=R().format("YYYY-MM-DD")},l=()=>{const m=R().weekday()===0?7:R().weekday();a.value=R().subtract(m-1,"days").format("YYYY-MM-DD"),n.value=R().add(7-m,"days").format("YYYY-MM-DD")},i=()=>{const m=R().format("YYYY"),p=R().format("MM");a.value=R([m,0,1]).month(parseInt(p)-1).format("YYYY-MM-DD"),n.value=R([m,0,31]).month(parseInt(p)-1).format("YYYY-MM-DD")},o=m=>{if(typeof m.paneName=="string")switch(e.value=m.paneName,e.value){case"daily":t();break;case"weekly":l();break;case"monthy":i();break}d(a.value,n.value),v(e.value)},r=c(),d=async(m,p)=>{const S=await te({start_date:m,end_date:p});r.value=Array.isArray(S)?S:[S]},y=c(),v=async m=>{const A=await oe({limit:7,page:1,type:m,school_id:1});y.value=A};return B(()=>{d(a.value,n.value),v(e.value)}),{activeTypeRef:e,changeActiveType:o,studyDashboardCompleteListRef:r,studyDashboardRankClassRef:y}}const He=D({name:"OverviewChart",components:{LearningTrend:ke,StudyRanking:Ve},setup(){return{...Ye()}}});const je={class:"overview-chart-container"},Ke={class:"flex"};function Xe(e,a,n,t,l,i){const o=u("el-tab-pane"),r=u("el-tabs"),d=u("LearningTrend"),y=u("StudyRanking"),v=u("el-card");return C(),f("div",je,[s(v,{class:"el-card-style","body-style":{padding:"0px"}},{default:g(()=>[_("header",null,[s(r,{modelValue:e.activeTypeRef,"onUpdate:modelValue":a[0]||(a[0]=m=>e.activeTypeRef=m),class:"demo-tabs",onTabClick:e.changeActiveType},{default:g(()=>[s(o,{label:"\u6BCF\u65E5\u4E00\u5B66",name:"daily"}),s(o,{label:"\u6BCF\u5468\u4E00\u505A",name:"weekly"}),s(o,{label:"\u6BCF\u6708\u4E00\u8BFE",name:"monthy"})]),_:1},8,["modelValue","onTabClick"])]),_("article",Ke,[s(d,{echartsData:e.studyDashboardCompleteListRef,dateType:e.activeTypeRef},null,8,["echartsData","dateType"]),s(y,{listData:e.studyDashboardRankClassRef},null,8,["listData"])])]),_:1})])}const ze=P(He,[["render",Xe],["__scopeId","data-v-5d5589b3"]]),Qe=D({name:"CustomPagination",props:{total:{type:Number,default:0},page:{type:Number,defualt:1},limit:{type:Number,defualt:10}},setup(e,a){const n=c(0),t=c(1),l=c(10),i=o=>{t.value=o,a.emit("change",t.value)};return F(()=>{n.value=e.total,e.page&&(t.value=e.page),e.limit&&(l.value=e.limit)}),{totalRef:n,pageRef:t,limitRef:l,changePage:i}}});const Je={class:"custom-pagination-container flex-start"},qe={class:"demonstration"};function Ze(e,a,n,t,l,i){const o=u("el-pagination");return C(),f("div",Je,[_("div",qe,"\u5171"+h(e.totalRef)+"\u6761\u8BB0\u5F55",1),s(o,{small:"",background:"",layout:"prev, pager, next",total:e.totalRef,"current-page":e.pageRef,onCurrentChange:e.changePage},null,8,["total","current-page","onCurrentChange"])])}const G=P(Qe,[["render",Ze],["__scopeId","data-v-2802132b"]]);function ea(){const e=c("daily"),a=c(1),n=c(10),t=c(0),l=d=>{a.value=d,console.log("pageRef.value :>> ",a.value)},i=c(),o=d=>{e.value=d.val},r=async d=>{const y={limit:`${n.value}`,page:`${a.value}`,type:d},v=await se(y);i.value=v.data,typeof v.total=="number"&&(t.value=v.total)};return F(()=>{const d=e.value;typeof d=="string"&&r(d)}),{hotConentList:i,changeTabs:o,paramTypeRef:e,changePage:l,pageRef:a,limitRef:n,totalRef:t}}const aa=D({name:"HotRanking",components:{CustomPagination:G},setup(){return{headerCellStyle:{color:"#606266","background-color":"#F6F8FA"},...ea()}}});const na=e=>(O("data-v-2ae22518"),e=e(),M(),e),ta={class:"hot-ranking-container"},oa={class:"flex"},sa=na(()=>_("p",{class:"title-style"},"\u70ED\u95E8\u5185\u5BB9\u6392\u884C",-1)),ia=E("\u6BCF\u65E5\u4E00\u5B66"),ra=E("\u6BCF\u5468\u4E00\u505A"),la=E("\u6BCF\u6708\u4E00\u8BFE"),ca={class:"flex-end"};function ua(e,a,n,t,l,i){const o=u("el-radio-button"),r=u("el-radio-group"),d=u("el-table-column"),y=u("el-table"),v=u("CustomPagination"),m=u("el-card");return C(),f("div",ta,[s(m,{class:"el-card-style","body-style":{padding:"0px"}},{default:g(()=>[_("header",oa,[sa,s(r,{class:"el-radio-group-style",modelValue:e.paramTypeRef,"onUpdate:modelValue":a[0]||(a[0]=p=>e.paramTypeRef=p),style:{"margin-bottom":"30px"}},{default:g(()=>[s(o,{label:"daily"},{default:g(()=>[ia]),_:1}),s(o,{label:"weekly"},{default:g(()=>[ra]),_:1}),s(o,{label:"monthy"},{default:g(()=>[la]),_:1})]),_:1},8,["modelValue"])]),_("article",null,[s(y,{data:e.hotConentList,style:{width:"100%"},"header-cell-style":e.headerCellStyle},{default:g(()=>[s(d,{type:"index",label:"\u6392\u540D",width:"60",align:"center"}),s(d,{prop:"title",label:"\u5185\u5BB9\u6807\u9898"}),s(d,{prop:"count",label:"\u5B8C\u6210\u91CF",width:"110",align:"center"})]),_:1},8,["data","header-cell-style"])]),_("footer",ca,[s(v,{total:e.totalRef,page:e.pageRef,limit:e.limitRef,onChangePage:e.changePage},null,8,["total","page","limit","onChangePage"])])]),_:1})])}const da=P(aa,[["render",ua],["__scopeId","data-v-2ae22518"]]);function _a(){const e=w().schoolInfo,a=c("grade"),n=c(),t=async l=>{const i=e.id,r=await ie({type:l,school_id:i});console.log("res_\u5B66\u4E60\u6392\u884C :>> ",r),n.value=r,console.log("studyDashboardRankClassTypeRef.value :>> ",n.value)};return F(()=>{t(a.value)}),{tabPositionRef:a,studyDashboardRankClassTypeRef:n}}const pa=D({name:"LearningRanking",components:{CustomPagination:G},setup(){return{headerCellStyle:{color:"#606266","background-color":"#F6F8FA"},..._a(),...I()}}});const ma=e=>(O("data-v-975a9dfe"),e=e(),M(),e),ga={class:"learning-ranking-container"},Ca={class:"flex"},ya=ma(()=>_("p",{class:"title-style"},"\u5B66\u4E60\u6392\u884C",-1)),fa=E("\u5E74\u7EA7\u6392\u884C"),va=E("\u73ED\u7EA7\u6392\u884C"),ha={class:"flex-end"};function Pa(e,a,n,t,l,i){const o=u("el-radio-button"),r=u("el-radio-group"),d=u("el-table-column"),y=u("el-table"),v=u("CustomPagination"),m=u("el-card");return C(),f("div",ga,[s(m,{class:"el-card-style","body-style":{padding:"0px"}},{default:g(()=>[_("header",Ca,[ya,s(r,{class:"el-radio-group-style",modelValue:e.tabPositionRef,"onUpdate:modelValue":a[0]||(a[0]=p=>e.tabPositionRef=p),style:{"margin-bottom":"30px"}},{default:g(()=>[s(o,{label:"grade"},{default:g(()=>[fa]),_:1}),s(o,{label:"class"},{default:g(()=>[va]),_:1})]),_:1},8,["modelValue"])]),_("article",null,[s(y,{data:e.studyDashboardRankClassTypeRef,style:{width:"100%"},"header-cell-style":e.headerCellStyle},{default:g(()=>[s(d,{type:"index",label:"\u6392\u540D",width:"60",align:"center"}),s(d,{label:"\u540D\u79F0",width:"124"},{default:g(p=>[E(h(e.getGradeClassName(p.row.info.year,p.row.info.class)),1)]),_:1}),s(d,{label:"\u5B66\u4E60\u603B\u91CF",align:"center"},{default:g(p=>[E(h(p.row.count.daily),1)]),_:1}),s(d,{label:"\u6D3B\u52A8\u603B\u91CF",align:"center"},{default:g(p=>[E(h(p.row.count.weekly),1)]),_:1}),s(d,{label:"\u603B\u5B8C\u6210\u91CF",align:"center"},{default:g(p=>[E(h(p.row.count.monthy),1)]),_:1})]),_:1},8,["data","header-cell-style"])]),_("footer",ha,[s(v)])]),_:1})])}const Da=P(pa,[["render",Pa],["__scopeId","data-v-975a9dfe"]]),Aa=D({name:"WordCloud",props:{listData:{type:[Array,Object],default:()=>[]}},setup(e){const a=c();return F(()=>{a.value=e.listData}),{listRef:a,getRandom:K}}});const ba={class:"word-cloud-container"},Ea={class:"cloud",role:"navigation","aria-label":"Webdev word cloud"},Ra=["data-weight"];function Fa(e,a,n,t,l,i){return C(),f("div",ba,[_("ul",Ea,[(C(!0),f(L,null,T(e.listRef,o=>(C(),f("li",{key:o.id},[_("a",{href:"#","data-weight":e.getRandom(1,9)},h(o.name),9,Ra)]))),128))])])}const Sa=P(Aa,[["render",Fa],["__scopeId","data-v-1c0bc7b5"]]),wa=async e=>await Z.post("https://api.ps.familyeducation.org.cn/v1/tag/info/list",e);function ka(){const e=c();return(async()=>{const t=await wa({});e.value=t})(),{tagInfoListRef:e}}const Ia=D({name:"HotTag",components:{WordCloud:Sa,CustomCard:k},setup(){return{...ka()}}});const $a={class:"hot-tag-container"},La={class:"word-cloud-box"};function Ta(e,a,n,t,l,i){const o=u("WordCloud"),r=u("CustomCard");return C(),f("div",$a,[s(r,{title:"\u91CD\u70B9\u5173\u6CE8\u4E3B\u9898"},{default:g(()=>[_("div",La,[s(o,{listData:e.tagInfoListRef},null,8,["listData"])])]),_:1})])}const Oa=P(Ia,[["render",Ta],["__scopeId","data-v-9dc1caf8"]]);function Ma(){console.log("useSchoolStore().schoolInfo :>> ",w().getSchoolInfo);const e=w().getSchoolInfo,a=c();return(async()=>{const t={school_id:e.id},l=await re(t);console.log("res_\u5BB6\u5EAD\u6784\u6210\u5206\u6790 :>> ",l);const i=[];Array.isArray(l)&&l.forEach(o=>{const r=I().getParentsName(o.family_role_id);i.push({value:o.count,name:r})}),a.value=i})(),{familyDashboardMemberGroupRoleRef:a}}const Ba=D({name:"FamilyCompositionAnalysis",components:{CustomCard:k,DoughnutChart:q},setup(){return{legend:{orient:"vertical",top:"center",right:90},title:{text:"\u5BB6\u5EAD\u6784\u6210",subtext:"",left:"25%",top:"center",textStyle:{fontSize:14},subtextStyle:{fontSize:16}},...Ma()}}});const Ga={class:"family-composition-analysis-container"};function Na(e,a,n,t,l,i){const o=u("DoughnutChart"),r=u("CustomCard");return C(),f("div",Ga,[s(r,{title:"\u5BB6\u5EAD\u6784\u6210\u5206\u6790"},{default:g(()=>[s(o,{legend:e.legend,title:e.title,width:"60%",left:"0",echartsData:e.familyDashboardMemberGroupRoleRef},null,8,["legend","title","echartsData"])]),_:1})])}const Ua=P(Ba,[["render",Na],["__scopeId","data-v-5fd1d56a"]]),Wa=D({name:"BarChart",props:{gradeNames:{type:Array,default:()=>[]},bindNums:{type:Array,default:()=>[]}},setup(e){return B(()=>{const a=c(),n=c(),t=document.getElementById("barChart"),l=N(t),i=c({title:{text:""},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{show:!1,bottom:0},grid:{top:24,left:"3%",right:"4%",bottom:24,containLabel:!0},xAxis:{type:"value",boundaryGap:[0,.01]},yAxis:{type:"category",data:a},series:[{name:"\u5E74\u7EA7",type:"bar",label:{show:!0,color:"#fff",fontSize:12},data:n}],barWidth:16,color:"#1890FF"});F(()=>{a.value=e.gradeNames,n.value=e.bindNums,i.value&&l.setOption(i.value)})}),{}}});const xa={id:"barChart",class:"bar-chart-container"};function Va(e,a,n,t,l,i){return C(),f("div",xa)}const Ya=P(Wa,[["render",Va],["__scopeId","data-v-c1ab10cf"]]);function Ha(){const e=c(),a=c(),n=c(),t=()=>{a.value=[],n.value=[],Array.isArray(e.value)&&e.value.forEach(i=>{a.value.push(I().getGraderName(i.year)),n.value.push(i.count)}),console.log("gradeNamesRef :>> ",a.value),console.log("bindNumsRef :>> ",n.value)};return(async()=>{const o={school_id:w().getSchoolInfo.id},r=await ae(o);console.log("res_\u5E74\u7EA7\u5BB6\u957F\u7ED1\u5B9A\u6570 :>> ",r),e.value=r,t()})(),{gradeNamesRef:a,bindNumsRef:n}}const ja=D({name:"GradeParentsBoundNum",components:{CustomCard:k,BarChart:Ya},setup(){return{...Ha()}}});const Ka={class:"grade-parents-bound-num-container"};function Xa(e,a,n,t,l,i){const o=u("BarChart"),r=u("CustomCard");return C(),f("div",Ka,[s(r,{title:"\u5E74\u7EA7\u5BB6\u957F\u7ED1\u5B9A\u6570"},{default:g(()=>[s(o,{bindNums:e.bindNumsRef,gradeNames:e.gradeNamesRef},null,8,["bindNums","gradeNames"])]),_:1})])}const za=P(ja,[["render",Xa],["__scopeId","data-v-ee246aa4"]]);function Qa(){const e=c(),a=c();return(async()=>{const l=await ne({school_id:1});console.log("res_\u73ED\u7EA7\u5BB6\u957F\u7ED1\u5B9A\u6392\u540D :>> ",l),e.value=l,a.value=l.data})(),{familyDashboardGroupParentClassRef:e,familyDashboardGroupParentClassListDataRef:a}}const Ja=D({name:"ClassBindingParentRanking",components:{CustomCard:k,CustomStudyRanking:W},setup(){return{...Qa()}}});const qa={class:"class-binding-parent-ranking-container"};function Za(e,a,n,t,l,i){const o=u("CustomStudyRanking"),r=u("CustomCard");return C(),f("div",qa,[s(r,{title:"\u73ED\u7EA7\u7ED1\u5B9A\u5BB6\u957F\u4EBA\u6570\u6392\u540D"},{default:g(()=>[s(o,{listData:e.familyDashboardGroupParentClassRef},null,8,["listData"])]),_:1})])}const en=P(Ja,[["render",Za],["__scopeId","data-v-7efec27b"]]),an=D({name:"CustomDropdown",props:{active:{type:Object,default:()=>({name:"\u9ED8\u8BA4\u9009\u9879",id:-1})},listData:{type:[Array,Object],default:()=>[]}},setup(e,a){const n=c(),t=c(e.listData),l=i=>{console.log("val :>> ",i),console.log("active.id :>> ",t.value);const o=c();t.value.forEach(r=>{i===r.id&&(o.value=r)}),a.emit("change",o.value)};return F(()=>{n.value=e.active,console.log("activeRef.value :>> ",n.value)}),{activeRef:n,listDataRef:t,onCommand:l}}});const nn={class:"custom-dropdown-contaienr"},tn={class:"el-dropdown-link"};function on(e,a,n,t,l,i){const o=u("arrow-down"),r=u("el-icon"),d=u("el-dropdown-item"),y=u("el-dropdown-menu"),v=u("el-dropdown");return C(),f("div",nn,[s(v,null,{dropdown:g(()=>[s(y,null,{default:g(()=>[(C(!0),f(L,null,T(e.listDataRef,m=>(C(),Q(d,{key:m.id,onClick:p=>e.onCommand(m.id)},{default:g(()=>[E(h(m.name),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:g(()=>[_("span",tn,[E(h(e.activeRef.name)+" ",1),s(r,{class:"el-icon--right"},{default:g(()=>[s(o)]),_:1})])]),_:1})])}const sn=P(an,[["render",on],["__scopeId","data-v-2df3e5b0"]]);function rn(){const e=J(),a=c({name:"\u5168\u90E8\u5E74\u7EA7",id:-1}),n=c({name:"\u5168\u90E8\u73ED\u7EA7",id:-1}),t={"background-color":"#F6F8FA",color:"#606266"},l=c(),i=b=>R(b).format("YYYY-MM-DD HH:mm:ss"),o=c(1),r=c(10),d=c(0),y=b=>{o.value=b},v=c(),m=async()=>{const b=parseInt(R().format("YYYY"))-a.value.id,H={limit:10,page:1,school_id:1,year:a.value.id!==-1?b:"",class:n.value.id!==-1?n.value.id:"",student_id:18},$=await le(H);console.log("res_\u5BB6\u957F\u652F\u6301\u5DE5\u4F5C\u60C5\u51B5 :>> ",$),v.value=$,l.value=$.data,d.value=$.total};m();const p=w(),A=c(p.getGradeList),S=c(p.getClassList),x=b=>{console.log("val :>> ",b),a.value=b,m()},V=b=>{console.log("val :>> ",b),n.value=b,m()},Y=b=>{console.log("val :>> ",b),e.push({path:"/parentsLearnDetailsView",query:{uid:b.uid,student_id:b.student_id}})};return{studyDashboardCompleteParentListRef:v,gradeActiveRef:a,classActiveRef:n,headerCellStyle:t,tableDataRef:l,fmtDateFn:i,...I(),gradeListRef:A,classListRef:S,gradeChange:x,classChange:V,pageRef:o,limitRef:r,totalRef:d,onChangePage:y,onToView:Y}}const ln=D({name:"ParentSupportWorkSituation",components:{CustomCard:k,CustomDropdown:sn,CustomPagination:G},setup(){return{...rn()}}});const cn={class:"parent-support-work-situation-container"},un={class:"filter-box"},dn=E(" \u67E5\u770B "),_n={class:"flex-end"};function pn(e,a,n,t,l,i){const o=u("CustomDropdown"),r=u("el-table-column"),d=u("el-button"),y=u("el-table"),v=u("CustomPagination"),m=u("CustomCard");return C(),f("div",cn,[s(m,{title:"\u5BB6\u957F\u652F\u6301\u5DE5\u4F5C\u60C5\u51B5"},{default:g(()=>[_("div",un,[s(o,{active:e.gradeActiveRef,listData:e.gradeListRef,onChange:e.gradeChange},null,8,["active","listData","onChange"]),s(o,{class:"filter-class-style",active:e.classActiveRef,listData:e.classListRef,onChange:e.classChange},null,8,["active","listData","onChange"])]),s(y,{class:"el-table-style",data:e.tableDataRef,"header-cell-style":e.headerCellStyle,style:{width:"100%"}},{default:g(()=>[s(r,{type:"index",label:"\u6392\u540D",width:"60",align:"center"}),s(r,{prop:"wx_name",label:"\u5BB6\u957F"}),s(r,{prop:"studentInfo",label:"\u5B66\u751F\u4FE1\u606F",align:"center"},{default:g(p=>[E(h(p.row.name)+" | "+h(e.getGradeClassName(p.row.year,p.row.class)),1)]),_:1}),s(r,{prop:"daily_count",label:"\u6BCF\u65E5\u4E00\u5B66",align:"center"}),s(r,{prop:"weekly_count",label:"\u6BCF\u5468\u4E00\u505A",align:"center"}),s(r,{prop:"monthy_count",label:"\u6BCF\u6708\u4E00\u8BFE",align:"center"}),s(r,{prop:"date",label:"\u6700\u8FD1\u4E0A\u7EBF\u65F6\u95F4",align:"center"},{default:g(p=>[E(h(e.fmtDateFn(p.row.date)),1)]),_:1}),s(r,{prop:"date",label:"\u64CD\u4F5C",align:"center"},{default:g(p=>[s(d,{type:"primary",link:"",onClick:A=>e.onToView(p.row)},{default:g(()=>[dn]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","header-cell-style"]),_("footer",_n,[s(v,{page:e.pageRef,limit:e.limitRef,total:e.totalRef,onChange:e.onChangePage},null,8,["page","limit","total","onChange"])])]),_:1})])}const mn=P(ln,[["render",pn],["__scopeId","data-v-24bf8fd7"]]);function gn(){const e=c({}),a=c({}),n=async()=>{const i=await ce({});e.value=i},t=async()=>{const i=await ue({});a.value=i};return n(),t(),{studyDashboardCompleteCountRef:e,studyDashboardCompleteDailyRef:a}}const Cn={name:"dataVisualizationView",components:{CompletedAmountOverview:Ae,OverviewChart:ze,HotRanking:da,LearningRanking:Da,HotTag:Oa,FamilyCompositionAnalysis:Ua,GradeParentsBoundNum:za,ClassBindingParentRanking:en,ParentSupportWorkSituation:mn},setup(){return{...gn()}}};const yn={class:"data-visualization-view-container"},fn={class:"row-style flex"},vn={class:"row-style flex"},hn={class:"row-style flex"},Pn={class:"row-style"};function Dn(e,a,n,t,l,i){const o=u("CompletedAmountOverview"),r=u("OverviewChart"),d=u("HotRanking"),y=u("LearningRanking"),v=u("HotTag"),m=u("FamilyCompositionAnalysis"),p=u("GradeParentsBoundNum"),A=u("ClassBindingParentRanking"),S=u("ParentSupportWorkSituation");return C(),f("div",yn,[s(o,{dataSource:e.studyDashboardCompleteCountRef,dataSourceAvg:e.studyDashboardCompleteDailyRef},null,8,["dataSource","dataSourceAvg"]),s(r,{class:"overview-chart-style"}),_("div",fn,[s(d),s(y)]),_("div",vn,[s(v),s(m)]),_("div",hn,[s(p),s(A)]),_("div",Pn,[s(S)])])}const kn=P(Cn,[["render",Dn],["__scopeId","data-v-0abd23c2"]]);export{kn as default};
