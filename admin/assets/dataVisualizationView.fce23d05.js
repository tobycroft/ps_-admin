import{g as J,a as K}from"./ak.c04aed19.js";import{d as w,r as c,k as F,_ as $,b as i,o as h,c as v,h as _,F as N,f as T,e as s,w as m,t as b,v as x,x as M,y as G,n as Q,j as X,i as B,C as V,D as W,g as Z,u as ee}from"./index.f479cc67.js";import{i as H,C as P,D as te}from"./CustomCard.00f1588a.js";import{h as E}from"./moment.9709ab41.js";import{u as R}from"./school.4fcfc4c1.js";import{u as ae,f as oe,a as ne}from"./family.02d7df62.js";import{a as se,t as le,b as ue,u as re,v as ce,w as ie,x as de,s as _e,y as pe}from"./study.8836a2c9.js";const me=w({name:"CompletedAmountOverview",props:{dataSource:{type:Object,default:()=>({})},dataSourceAvg:{type:Object,default:()=>({})}},setup(e){const t=c({total:{title:"\u603B\u8BBF\u95EE\u91CF",icon:"overview_total_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u8BBF\u95EE\u91CF",num:0}},daily:{title:"\u6BCF\u65E5\u4E00\u5B66\u603B\u5B66\u4E60\u91CF",icon:"overview_daily_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u5B66\u4E60\u91CF",num:0}},weekly:{title:"\u6BCF\u5468\u4E00\u505A\u603B\u5B8C\u6210\u91CF",icon:"overview_weekly_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u5B8C\u6210\u91CF",num:0}},monthy:{title:"\u6BCF\u6708\u4E00\u8BFE\u603B\u5B66\u4E60\u91CF",icon:"overview_monthly_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u5B66\u4E60\u91CF",num:0}}}),o=c(e.dataSource),n=c(e.dataSourceAvg);return F(()=>{o.value=e.dataSource,n.value=e.dataSourceAvg,Object.keys(o.value).length>0&&(t.value.total.num=o.value.total_all,t.value.total.tag.num=o.value.all_today,t.value.total.averageDaily.num=Math.ceil(n.value.all_num/n.value.day_num),t.value.daily.num=o.value.total_daily,t.value.daily.tag.num=o.value.daily,t.value.daily.averageDaily.num=Math.ceil(n.value.daily/n.value.day_num),t.value.weekly.num=o.value.total_weekly,t.value.weekly.tag.num=o.value.weekly_today,t.value.weekly.averageDaily.num=Math.ceil(n.value.weekly/n.value.day_num),t.value.monthy.num=o.value.total_monthy,t.value.monthy.tag.num=o.value.monthy_today,t.value.monthy.averageDaily.num=Math.ceil(n.value.monthy/n.value.day_num))}),{overviewListRef:t,getImageUrl:J}}});const fe={class:"completed-amount-overview-container"},ye={class:"completed-amount-overview-ul flex"},ge={class:"flex"},he={class:"title-style"},ve={class:"flex-start align-end"},Ce={class:"total-num-style"},be={class:"tag-box flex-center"},De={class:"flex-start"},$e={class:"average-daily-title-style"},Ee={class:"average-daily-num-style"};function Re(e,t,o,n,r,l){const a=i("el-image"),u=i("el-card");return h(),v("div",fe,[_("ul",ye,[(h(!0),v(N,null,T(e.overviewListRef,(d,g)=>(h(),v("li",{key:g,class:"completed-amount-overview-li"},[s(u,{class:"el-card-style","body-style":{padding:"0px"}},{default:m(()=>[_("header",ge,[_("p",he,b(d.title),1),s(a,{class:"header-icon-style",src:e.getImageUrl(d.icon+".png")},null,8,["src"])]),_("article",ve,[_("p",Ce,b(d.num),1),_("div",be,[_("p",null,b(d.tag.title),1),_("p",null,b(d.tag.num),1)])]),_("footer",De,[_("p",$e,b(d.averageDaily.title),1),_("p",Ee,b(d.averageDaily.num),1)])]),_:2},1024)]))),128))])])}const we=$(me,[["render",Re],["__scopeId","data-v-2b94ccf0"]]),Be=w({name:"LearningTrend",props:{echartsData:{type:[Array,Object],default:()=>[]},dateType:{type:String,defualt:""}},setup(e,t){const o=c(),n=c(),r=c(["01\u65E5","02\u65E5","03\u65E5","04\u65E5","05\u65E5","06\u65E5"]),l=c([1e3,2e3,3e3,4e3,5e3,6e3]),a=(u,d)=>{const g=[];u.forEach(y=>{y.type===d&&g.push(y)});const C=new Set(g),f=Array.from(C),p=[],k=[];return Array.isArray(f)&&f.forEach(y=>{y.dates&&p.push(y.dates),y.count&&k.push(y.count)}),{xAxisData:p,seriesData:k}};return x(()=>{const u=document.getElementById("LearningTrendChart"),d=H(u);F(()=>{o.value=e.echartsData,n.value=e.dateType;const g=a(o.value,n.value);r.value=g.xAxisData,l.value=g.seriesData;const C=c({xAxis:{type:"category",data:r.value},yAxis:{type:"value"},grid:{top:"5%",left:"5%"},series:[{data:l.value,type:"bar",barWidth:"24",itemStyle:{borderRadius:0,color:"#1890FF"}}]});d.off("click"),d.on("click",function(f){console.log("params :>> ",f),t.emit("select",f.name)}),C.value&&d.setOption(C.value)})}),{}}});const j=e=>(M("data-v-b4cec37a"),e=e(),G(),e),Ae={class:"learning-trend-container"},Fe=j(()=>_("header",null,[_("p",{class:"title-style"},"\u5B66\u4E60\u8D8B\u52BF")],-1)),ke=j(()=>_("article",null,[_("div",{id:"LearningTrendChart",class:"learning-trend-chart"})],-1)),Se=[Fe,ke];function Ie(e,t,o,n,r,l){return h(),v("div",Ae,Se)}const Pe=$(Be,[["render",Ie],["__scopeId","data-v-b4cec37a"]]);function Y(){const e=(r,l)=>{const a=R().classList;console.log("calssList :>> ",a,Array.isArray(a));let u={id:-1,name:"\u5F02\u5E38\u6570\u636E"};return Array.isArray(a)&&(u=a[l]),`${t(r)}(${u?u.name:""})`},t=r=>{const l=R().gradeList;let a={id:-1,name:"\u5F02\u5E38\u6570\u636E"};if(Array.isArray(l))return a=l[parseInt(E().format("YYYY"))-r+1],a.name};return{getGradeClassName:e,getGraderName:t,getClassName:r=>{const l=R().classList;let a={id:-1,name:"\u5F02\u5E38\u6570\u636E"};return Array.isArray(l)&&(a=l[r]),a?a.name:""},getParentsName:r=>{const l=ae().getFamilyRoleList,a=c("");return l.forEach(u=>{u.id===r&&(a.value=u.name)}),a.value}}}const Ye=w({name:"CustomStudyRanking",props:{listData:{type:[Array,Object],defualt:()=>[]}},setup(e){const t=c(),o=r=>{const l=[];for(const a of r)l.push({name:Y().getGradeClassName(a.year,a.class),num:`${a.count}\u4EBA`});return l},n=c([{name:"\u4E00\u5E74\u7EA7\uFF082\uFF09\u73ED",num:"120\u4EBA"},{name:"\u4E00\u5E74\u7EA7\uFF082\uFF09\u73ED",num:"120\u4EBA"},{name:"\u4E00\u5E74\u7EA7\uFF082\uFF09\u73ED",num:"120\u4EBA"},{name:"\u4E00\u5E74\u7EA7\uFF082\uFF09\u73ED",num:"120\u4EBA"},{name:"\u4E00\u5E74\u7EA7\uFF082\uFF09\u73ED",num:"120\u4EBA"},{name:"\u4E00\u5E74\u7EA7\uFF082\uFF09\u73ED",num:"120\u4EBA"},{name:"\u4E00\u5E74\u7EA7\uFF082\uFF09\u73ED",num:"120\u4EBA"}]);return F(()=>{if(t.value=e.listData,t.value!==void 0&&t.value.data){n.value=o(t.value.data);return}n.value=[],console.log("StudyRankingListRef.value :>> ",n.value)}),{StudyRankingListRef:n}}});const Le={class:"custom-study-ranking-container"},Ne={key:0,class:"study-ranking-ul"},Te={class:"left-box-style flex-start"},Me={class:"study-ranking-name-style"},Ge={class:"study-ranking-num-style"};function xe(e,t,o,n,r,l){return h(),v("div",Le,[e.StudyRankingListRef.length>0?(h(),v("ul",Ne,[(h(!0),v(N,null,T(e.StudyRankingListRef,(a,u)=>(h(),v("li",{key:u,class:"study-ranking-li flex"},[_("div",Te,[_("p",{class:Q(["study-ranking-sort-style",{"top-three-sort-style":u<=2,"top-other-sort-style":u>2}])},b(u+1),3),_("p",Me,b(a.name),1)]),_("p",Ge,b(a.num),1)]))),128))])):X("",!0)])}const z=$(Ye,[["render",xe],["__scopeId","data-v-684f5e50"]]),Oe=w({name:"StudyRanking",components:{CustomStudyRanking:z},props:{listData:{type:[Array,Object],defualt:()=>[]}},setup(e){const t=c();return F(()=>{t.value=e.listData}),{listDataRef:t}}});const Ve=e=>(M("data-v-bac18253"),e=e(),G(),e),We={class:"study-ranking-container"},He=Ve(()=>_("header",null,[_("p",{class:"title-style"},"\u4ECA\u65E5\u73ED\u7EA7\u4EBA\u6570\u6392\u540D")],-1));function je(e,t,o,n,r,l){const a=i("CustomStudyRanking");return h(),v("div",We,[He,_("article",null,[s(a,{listData:e.listDataRef},null,8,["listData"])])])}const ze=$(Oe,[["render",je],["__scopeId","data-v-bac18253"]]);function Ue(){const e=R().getSchoolInfo,t=c("daily"),o=c("2022-08-19"),n=c("2022-08-19"),r=()=>{o.value=E().format("YYYY-MM-DD"),n.value=E().format("YYYY-MM-DD")},l=()=>{const y=E().weekday()===0?7:E().weekday();o.value=E().subtract(y-1,"days").format("YYYY-MM-DD"),n.value=E().add(7-y,"days").format("YYYY-MM-DD")},a=()=>{const y=E().format("YYYY"),A=E().format("MM");o.value=E([y,0,1]).month(parseInt(A)-1).format("YYYY-MM-DD"),n.value=E([y,0,31]).month(parseInt(A)-1).format("YYYY-MM-DD")},u=c(""),d=y=>{if(typeof y.paneName=="string")switch(t.value=y.paneName,t.value){case"daily":r();break;case"weekly":l();break;case"monthy":a();break}C(o.value,n.value);const A=E(u.value).format("YYYY-MM-DD");p(t.value,A)},g=c(),C=async(y,A)=>{const I={start_date:y,end_date:A,school_id:e.id},S=await se(I);g.value=Array.isArray(S)?S:[S]},f=c(),p=async(y,A)=>{const I=R().getSchoolInfo,S={limit:7,page:1,type:y,school_id:I.id,start_date:A},D=await le(S);f.value=D},k=y=>{console.log("onSelectLearningTrend_val :>> ",y),u.value=y;const A=E(u.value).format("YYYY-MM-DD");p(t.value,A)};return x(()=>{const y=E(u.value).format("YYYY-MM-DD");C(o.value,n.value),p(t.value,y)}),{activeTypeRef:t,changeActiveType:d,studyDashboardCompleteListRef:g,studyDashboardRankClassRef:f,onSelectLearningTrend:k}}const qe=w({name:"OverviewChart",components:{LearningTrend:Pe,StudyRanking:ze},setup(){return{...Ue()}}});const Je={class:"overview-chart-container"},Ke={class:"flex"};function Qe(e,t,o,n,r,l){const a=i("el-tab-pane"),u=i("el-tabs"),d=i("LearningTrend"),g=i("StudyRanking"),C=i("el-card");return h(),v("div",Je,[s(C,{class:"el-card-style","body-style":{padding:"0px"}},{default:m(()=>[_("header",null,[s(u,{modelValue:e.activeTypeRef,"onUpdate:modelValue":t[0]||(t[0]=f=>e.activeTypeRef=f),class:"demo-tabs",onTabClick:e.changeActiveType},{default:m(()=>[s(a,{label:"\u6BCF\u65E5\u4E00\u5B66",name:"daily"}),s(a,{label:"\u6BCF\u5468\u4E00\u505A",name:"weekly"}),s(a,{label:"\u6BCF\u6708\u4E00\u8BFE",name:"monthy"})]),_:1},8,["modelValue","onTabClick"])]),_("article",Ke,[s(d,{echartsData:e.studyDashboardCompleteListRef,dateType:e.activeTypeRef,onSelect:e.onSelectLearningTrend},null,8,["echartsData","dateType","onSelect"]),s(g,{listData:e.studyDashboardRankClassRef},null,8,["listData"])])]),_:1})])}const Xe=$(qe,[["render",Qe],["__scopeId","data-v-317efa79"]]),Ze=w({name:"CustomPagination",props:{total:{type:Number,default:0},page:{type:Number,defualt:1},limit:{type:Number,defualt:10}},setup(e,t){const o=c(0),n=c(1),r=c(10),l=a=>{n.value=a,t.emit("change",n.value)};return F(()=>{o.value=e.total,e.page&&(n.value=e.page),e.limit&&(r.value=e.limit)}),{totalRef:o,pageRef:n,limitRef:r,changePage:l}}});const et={class:"custom-pagination-container flex-start"},tt={class:"demonstration"};function at(e,t,o,n,r,l){const a=i("el-pagination");return h(),v("div",et,[_("div",tt,"\u5171"+b(e.totalRef)+"\u6761\u8BB0\u5F55",1),s(a,{small:"",background:"",layout:"prev, pager, next",total:e.totalRef,"current-page":e.pageRef,onCurrentChange:e.changePage},null,8,["total","current-page","onCurrentChange"])])}const O=$(Ze,[["render",at],["__scopeId","data-v-2802132b"]]);function ot(){const e=c("daily"),t=c(1),o=c(10),n=c(0),r=d=>{t.value=d,console.log("pageRef.value :>> ",t.value)},l=c(),a=d=>{e.value=d.val},u=async d=>{const g=R().getSchoolInfo,C={limit:`${o.value}`,page:`${t.value}`,type:d,school_id:g.id},f=await ue(C);l.value=f.data,typeof f.total=="number"&&(n.value=f.total)};return F(()=>{const d=e.value;typeof d=="string"&&u(d)}),{hotConentList:l,changeTabs:a,paramTypeRef:e,changePage:r,pageRef:t,limitRef:o,totalRef:n}}const nt=w({name:"HotRanking",components:{CustomPagination:O},setup(){return{headerCellStyle:{color:"#606266","background-color":"#F6F8FA"},...ot()}}});const st=e=>(M("data-v-2ae22518"),e=e(),G(),e),lt={class:"hot-ranking-container"},ut={class:"flex"},rt=st(()=>_("p",{class:"title-style"},"\u70ED\u95E8\u5185\u5BB9\u6392\u884C",-1)),ct=B("\u6BCF\u65E5\u4E00\u5B66"),it=B("\u6BCF\u5468\u4E00\u505A"),dt=B("\u6BCF\u6708\u4E00\u8BFE"),_t={class:"flex-end"};function pt(e,t,o,n,r,l){const a=i("el-radio-button"),u=i("el-radio-group"),d=i("el-table-column"),g=i("el-table"),C=i("CustomPagination"),f=i("el-card");return h(),v("div",lt,[s(f,{class:"el-card-style","body-style":{padding:"0px"}},{default:m(()=>[_("header",ut,[rt,s(u,{class:"el-radio-group-style",modelValue:e.paramTypeRef,"onUpdate:modelValue":t[0]||(t[0]=p=>e.paramTypeRef=p),style:{"margin-bottom":"30px"}},{default:m(()=>[s(a,{label:"daily"},{default:m(()=>[ct]),_:1}),s(a,{label:"weekly"},{default:m(()=>[it]),_:1}),s(a,{label:"monthy"},{default:m(()=>[dt]),_:1})]),_:1},8,["modelValue"])]),_("article",null,[s(g,{data:e.hotConentList,style:{width:"100%"},"header-cell-style":e.headerCellStyle},{default:m(()=>[s(d,{type:"index",label:"\u6392\u540D",width:"60",align:"center"}),s(d,{prop:"title",label:"\u5185\u5BB9\u6807\u9898"}),s(d,{prop:"count",label:"\u5B8C\u6210\u91CF",width:"110",align:"center"})]),_:1},8,["data","header-cell-style"])]),_("footer",_t,[s(C,{total:e.totalRef,page:e.pageRef,limit:e.limitRef,onChangePage:e.changePage},null,8,["total","page","limit","onChangePage"])])]),_:1})])}const mt=$(nt,[["render",pt],["__scopeId","data-v-2ae22518"]]);function ft(){const e=R().schoolInfo,t=c("grade"),o=c(),n=async r=>{const l=e.id,u=await re({type:r,school_id:l});console.log("res_\u5B66\u4E60\u6392\u884C :>> ",u),o.value=u.data};return F(()=>{n(t.value)}),{tabPositionRef:t,studyDashboardRankClassTypeRef:o}}const yt=w({name:"LearningRanking",components:{CustomPagination:O},setup(){return{headerCellStyle:{color:"#606266","background-color":"#F6F8FA"},...ft(),...Y()}}});const gt=e=>(M("data-v-b547e377"),e=e(),G(),e),ht={class:"learning-ranking-container"},vt={class:"flex"},Ct=gt(()=>_("p",{class:"title-style"},"\u5B66\u4E60\u6392\u884C",-1)),bt=B("\u5E74\u7EA7\u6392\u884C"),Dt=B("\u73ED\u7EA7\u6392\u884C"),$t={class:"flex-end"};function Et(e,t,o,n,r,l){const a=i("el-radio-button"),u=i("el-radio-group"),d=i("el-table-column"),g=i("el-table"),C=i("CustomPagination"),f=i("el-card");return h(),v("div",ht,[s(f,{class:"el-card-style","body-style":{padding:"0px"}},{default:m(()=>[_("header",vt,[Ct,s(u,{class:"el-radio-group-style",modelValue:e.tabPositionRef,"onUpdate:modelValue":t[0]||(t[0]=p=>e.tabPositionRef=p),style:{"margin-bottom":"30px"}},{default:m(()=>[s(a,{label:"grade"},{default:m(()=>[bt]),_:1}),s(a,{label:"class"},{default:m(()=>[Dt]),_:1})]),_:1},8,["modelValue"])]),_("article",null,[s(g,{data:e.studyDashboardRankClassTypeRef,style:{width:"100%"},"header-cell-style":e.headerCellStyle},{default:m(()=>[s(d,{type:"index",label:"\u6392\u540D",width:"60",align:"center"}),s(d,{label:"\u540D\u79F0",width:"124"},{default:m(p=>[V(_("p",null,b(e.getGraderName(p.row.year)),513),[[W,e.tabPositionRef==="grade"]]),V(_("p",null,b(`${e.getGraderName(p.row.year)}(${e.getClassName(p.row.class)})`),513),[[W,e.tabPositionRef==="class"]])]),_:1}),s(d,{label:"\u5B66\u4E60\u603B\u91CF",align:"center"},{default:m(p=>[B(b(p.row.daily_count+p.row.monthy_count),1)]),_:1}),s(d,{label:"\u6D3B\u52A8\u603B\u91CF",align:"center"},{default:m(p=>[B(b(p.row.weekly_count),1)]),_:1}),s(d,{label:"\u603B\u5B8C\u6210\u91CF",align:"center"},{default:m(p=>[B(b(p.row.count),1)]),_:1})]),_:1},8,["data","header-cell-style"])]),_("footer",$t,[s(C)])]),_:1})])}const Rt=$(yt,[["render",Et],["__scopeId","data-v-b547e377"]]),wt=w({name:"WordCloud",props:{listData:{type:[Array,Object],default:()=>[]}},setup(e){const t=c();let o=16;return F(()=>{t.value=e.listData.map(n=>(n.dataWeight=o,o--,console.log("item :>> ",n),n))}),{listRef:t,getRandom:K}}});const Bt={class:"word-cloud-container"},At={class:"cloud",role:"navigation","aria-label":"Webdev word cloud"},Ft=["data-weight"];function kt(e,t,o,n,r,l){return h(),v("div",Bt,[_("ul",At,[(h(!0),v(N,null,T(e.listRef,a=>(h(),v("li",{key:a.id},[_("a",{href:"#","data-weight":a.dataWeight},b(a.name),9,Ft)]))),128))])])}const St=$(wt,[["render",kt],["__scopeId","data-v-841199ed"]]);function It(){const e=c(),t=async(n,r)=>{const a=await ce({school_id:n,limit:r});e.value=a},o=R().getSchoolInfo;return t(o.id,16),{tagInfoListRef:e}}const Pt=w({name:"HotTag",components:{WordCloud:St,CustomCard:P},setup(){return{...It()}}});const Yt={class:"hot-tag-container"},Lt={class:"word-cloud-box"};function Nt(e,t,o,n,r,l){const a=i("WordCloud"),u=i("CustomCard");return h(),v("div",Yt,[s(u,{title:"\u91CD\u70B9\u5173\u6CE8\u4E3B\u9898"},{default:m(()=>[_("div",Lt,[s(a,{listData:e.tagInfoListRef},null,8,["listData"])])]),_:1})])}const Tt=$(Pt,[["render",Nt],["__scopeId","data-v-9dc1caf8"]]);function Mt(){console.log("useSchoolStore().schoolInfo :>> ",R().getSchoolInfo);const e=R().getSchoolInfo,t=c();return(async()=>{const n={school_id:e.id},r=await ie(n);console.log("res_\u5BB6\u5EAD\u6784\u6210\u5206\u6790 :>> ",r);const l=[];Array.isArray(r)&&r.forEach(a=>{const u=Y().getParentsName(a.family_role_id);l.push({value:a.count,name:u})}),t.value=l})(),{familyDashboardMemberGroupRoleRef:t}}const Gt=w({name:"FamilyCompositionAnalysis",components:{CustomCard:P,DoughnutChart:te},setup(){return{legend:{orient:"vertical",top:"center",right:90},title:{text:"\u5BB6\u5EAD\u6784\u6210",subtext:"",left:"25%",top:"center",textStyle:{fontSize:14},subtextStyle:{fontSize:16}},...Mt()}}});const xt={class:"family-composition-analysis-container"};function Ot(e,t,o,n,r,l){const a=i("DoughnutChart"),u=i("CustomCard");return h(),v("div",xt,[s(u,{title:"\u5BB6\u5EAD\u6784\u6210\u5206\u6790"},{default:m(()=>[s(a,{legend:e.legend,title:e.title,width:"60%",left:"0",echartsData:e.familyDashboardMemberGroupRoleRef},null,8,["legend","title","echartsData"])]),_:1})])}const Vt=$(Gt,[["render",Ot],["__scopeId","data-v-5fd1d56a"]]),Wt=w({name:"BarChart",props:{gradeNames:{type:Array,default:()=>[]},bindNums:{type:Array,default:()=>[]}},setup(e){return x(()=>{const t=c(),o=c(),n=document.getElementById("barChart"),r=H(n),l=c({title:{text:""},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{show:!1,bottom:0},grid:{top:24,left:"3%",right:"4%",bottom:24,containLabel:!0},xAxis:{type:"value",boundaryGap:[0,.01]},yAxis:{type:"category",data:t},series:[{name:"\u5E74\u7EA7",type:"bar",label:{show:!0,color:"#fff",fontSize:12},data:o}],barWidth:16,color:"#1890FF"});F(()=>{t.value=e.gradeNames,o.value=e.bindNums,l.value&&r.setOption(l.value)})}),{}}});const Ht={id:"barChart",class:"bar-chart-container"};function jt(e,t,o,n,r,l){return h(),v("div",Ht)}const zt=$(Wt,[["render",jt],["__scopeId","data-v-c1ab10cf"]]);function Ut(){const e=c(),t=c(),o=c(),n=()=>{t.value=[],o.value=[],Array.isArray(e.value)&&e.value.forEach(l=>{t.value.push(Y().getGraderName(l.year)),o.value.push(l.count)}),console.log("gradeNamesRef :>> ",t.value),console.log("bindNumsRef :>> ",o.value)};return(async()=>{const a={school_id:R().getSchoolInfo.id},u=await oe(a);console.log("res_\u5E74\u7EA7\u5BB6\u957F\u7ED1\u5B9A\u6570 :>> ",u),e.value=u,n()})(),{gradeNamesRef:t,bindNumsRef:o}}const qt=w({name:"GradeParentsBoundNum",components:{CustomCard:P,BarChart:zt},setup(){return{...Ut()}}});const Jt={class:"grade-parents-bound-num-container"};function Kt(e,t,o,n,r,l){const a=i("BarChart"),u=i("CustomCard");return h(),v("div",Jt,[s(u,{title:"\u5E74\u7EA7\u5BB6\u957F\u7ED1\u5B9A\u6570"},{default:m(()=>[s(a,{bindNums:e.bindNumsRef,gradeNames:e.gradeNamesRef},null,8,["bindNums","gradeNames"])]),_:1})])}const Qt=$(qt,[["render",Kt],["__scopeId","data-v-ee246aa4"]]);function Xt(){const e=c(),t=c();return(async()=>{const r={school_id:R().getSchoolInfo.id},l=await ne(r);console.log("res_\u73ED\u7EA7\u5BB6\u957F\u7ED1\u5B9A\u6392\u540D :>> ",l),e.value=l,t.value=l.data})(),{familyDashboardGroupParentClassRef:e,familyDashboardGroupParentClassListDataRef:t}}const Zt=w({name:"ClassBindingParentRanking",components:{CustomCard:P,CustomStudyRanking:z},setup(){return{...Xt()}}});const ea={class:"class-binding-parent-ranking-container"};function ta(e,t,o,n,r,l){const a=i("CustomStudyRanking"),u=i("CustomCard");return h(),v("div",ea,[s(u,{title:"\u73ED\u7EA7\u7ED1\u5B9A\u5BB6\u957F\u4EBA\u6570\u6392\u540D"},{default:m(()=>[s(a,{listData:e.familyDashboardGroupParentClassRef},null,8,["listData"])]),_:1})])}const aa=$(Zt,[["render",ta],["__scopeId","data-v-7efec27b"]]),oa=w({name:"CustomDropdown",props:{active:{type:Object,default:()=>({name:"\u9ED8\u8BA4\u9009\u9879",id:-1})},listData:{type:[Array,Object],default:()=>[]}},setup(e,t){const o=c(),n=c(e.listData),r=l=>{console.log("val :>> ",l),console.log("active.id :>> ",n.value);const a=c();n.value.forEach(u=>{l===u.id&&(a.value=u)}),t.emit("change",a.value)};return F(()=>{o.value=e.active,console.log("activeRef.value :>> ",o.value)}),{activeRef:o,listDataRef:n,onCommand:r}}});const na={class:"custom-dropdown-contaienr"},sa={class:"el-dropdown-link"};function la(e,t,o,n,r,l){const a=i("arrow-down"),u=i("el-icon"),d=i("el-dropdown-item"),g=i("el-dropdown-menu"),C=i("el-dropdown");return h(),v("div",na,[s(C,null,{dropdown:m(()=>[s(g,null,{default:m(()=>[(h(!0),v(N,null,T(e.listDataRef,f=>(h(),Z(d,{key:f.id,onClick:p=>e.onCommand(f.id)},{default:m(()=>[B(b(f.name),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:m(()=>[_("span",sa,[B(b(e.activeRef.name)+" ",1),s(u,{class:"el-icon--right"},{default:m(()=>[s(a)]),_:1})])]),_:1})])}const ua=$(oa,[["render",la],["__scopeId","data-v-2df3e5b0"]]);function ra(){const e=ee(),t=c({name:"\u5168\u90E8\u5E74\u7EA7",id:-1}),o=c({name:"\u5168\u90E8\u73ED\u7EA7",id:-1}),n={"background-color":"#F6F8FA",color:"#606266"},r=c(),l=D=>E(D).utc().format("YYYY-MM-DD HH:mm:ss"),a=c(1),u=c(10),d=c(0),g=D=>{a.value=D},C=c(),f=async()=>{const D=R().getSchoolInfo,U=parseInt(E().format("YYYY"))-t.value.id,q={limit:10,page:1,school_id:D.id,year:t.value.id!==-1?U:"",class:o.value.id!==-1?o.value.id:"",student_id:18},L=await de(q);console.log("res_\u5BB6\u957F\u652F\u6301\u5DE5\u4F5C\u60C5\u51B5 :>> ",L),C.value=L,r.value=L.data,d.value=L.total};f();const p=R(),k=c(p.getGradeList),y=c(p.getClassList),A=D=>{console.log("val :>> ",D),t.value=D,f()},I=D=>{console.log("val :>> ",D),o.value=D,f()},S=D=>{console.log("val :>> ",D),e.push({path:"/parentsLearnDetailsView",query:{uid:D.uid,student_id:D.student_id}})};return{studyDashboardCompleteParentListRef:C,gradeActiveRef:t,classActiveRef:o,headerCellStyle:n,tableDataRef:r,fmtDateFn:l,...Y(),gradeListRef:k,classListRef:y,gradeChange:A,classChange:I,pageRef:a,limitRef:u,totalRef:d,onChangePage:g,onToView:S}}const ca=w({name:"ParentSupportWorkSituation",components:{CustomCard:P,CustomDropdown:ua,CustomPagination:O},setup(){return{...ra()}}});const ia={class:"parent-support-work-situation-container"},da={class:"filter-box"},_a=B(" \u67E5\u770B "),pa={class:"flex-end"};function ma(e,t,o,n,r,l){const a=i("CustomDropdown"),u=i("el-table-column"),d=i("el-button"),g=i("el-table"),C=i("CustomPagination"),f=i("CustomCard");return h(),v("div",ia,[s(f,{title:"\u5BB6\u957F\u652F\u6301\u5DE5\u4F5C\u60C5\u51B5"},{default:m(()=>[_("div",da,[s(a,{active:e.gradeActiveRef,listData:e.gradeListRef,onChange:e.gradeChange},null,8,["active","listData","onChange"]),s(a,{class:"filter-class-style",active:e.classActiveRef,listData:e.classListRef,onChange:e.classChange},null,8,["active","listData","onChange"])]),s(g,{class:"el-table-style",data:e.tableDataRef,"header-cell-style":e.headerCellStyle,style:{width:"100%"}},{default:m(()=>[s(u,{type:"index",label:"\u6392\u540D",width:"60",align:"center"}),s(u,{prop:"wx_name",label:"\u5BB6\u957F"}),s(u,{prop:"studentInfo",label:"\u5B66\u751F\u4FE1\u606F",align:"center"},{default:m(p=>[B(b(p.row.name)+" | "+b(e.getGradeClassName(p.row.year,p.row.class)),1)]),_:1}),s(u,{prop:"daily_count",label:"\u6BCF\u65E5\u4E00\u5B66",align:"center"}),s(u,{prop:"weekly_count",label:"\u6BCF\u5468\u4E00\u505A",align:"center"}),s(u,{prop:"monthy_count",label:"\u6BCF\u6708\u4E00\u8BFE",align:"center"}),s(u,{prop:"date",label:"\u6700\u8FD1\u4E0A\u7EBF\u65F6\u95F4",align:"center"},{default:m(p=>[B(b(e.fmtDateFn(p.row.date)),1)]),_:1}),s(u,{prop:"date",label:"\u64CD\u4F5C",align:"center"},{default:m(p=>[s(d,{type:"primary",link:"",onClick:k=>e.onToView(p.row)},{default:m(()=>[_a]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","header-cell-style"]),_("footer",pa,[s(C,{page:e.pageRef,limit:e.limitRef,total:e.totalRef,onChange:e.onChangePage},null,8,["page","limit","total","onChange"])])]),_:1})])}const fa=$(ca,[["render",ma],["__scopeId","data-v-24bf8fd7"]]);function ya(){const e=c({}),t=c({}),o=async()=>{const l={school_id:R().getSchoolInfo.id,type:"term"},a=await _e(l);e.value=a},n=async()=>{const l={school_id:R().getSchoolInfo.id},a=await pe(l);t.value=a};return o(),n(),{studyDashboardCompleteCountRef:e,studyDashboardCompleteDailyRef:t}}const ga={name:"dataVisualizationView",components:{CompletedAmountOverview:we,OverviewChart:Xe,HotRanking:mt,LearningRanking:Rt,HotTag:Tt,FamilyCompositionAnalysis:Vt,GradeParentsBoundNum:Qt,ClassBindingParentRanking:aa,ParentSupportWorkSituation:fa},setup(){return{...ya()}}};const ha={class:"data-visualization-view-container"},va={class:"row-style flex"},Ca={class:"row-style flex"},ba={class:"row-style flex"},Da={class:"row-style"};function $a(e,t,o,n,r,l){const a=i("CompletedAmountOverview"),u=i("OverviewChart"),d=i("HotRanking"),g=i("LearningRanking"),C=i("HotTag"),f=i("FamilyCompositionAnalysis"),p=i("GradeParentsBoundNum"),k=i("ClassBindingParentRanking"),y=i("ParentSupportWorkSituation");return h(),v("div",ha,[s(a,{dataSource:e.studyDashboardCompleteCountRef,dataSourceAvg:e.studyDashboardCompleteDailyRef},null,8,["dataSource","dataSourceAvg"]),s(u,{class:"overview-chart-style"}),_("div",va,[s(d),s(g)]),_("div",Ca,[s(C),s(f)]),_("div",ba,[s(p),s(k)]),_("div",Da,[s(y)])])}const Sa=$(ga,[["render",$a],["__scopeId","data-v-0abd23c2"]]);export{Sa as default};
