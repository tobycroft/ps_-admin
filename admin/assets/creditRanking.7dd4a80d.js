import{_ as B,r as b,o as c,g as C,w as g,a as i,i as V,t as p,j as k,B as q,h as n,b as e,v as P,c as m,F as z,f as L,C as U,D as W,n as j,x as E,y as G}from"./index.e312668c.js";import{h as l}from"./moment.9709ab41.js";import{c as H}from"./datacenter.40a2f085.js";import{u as J}from"./school.2bc75e1f.js";import{b as O}from"./calcFunc.5c67b6c9.js";import"./request.1668cb5f.js";const Q={class:"sum_amount"},X={__name:"TableForRank",props:{tableList:{type:Array,default:()=>[]},mode:{type:String,default:"student"},page:{type:Number,default:1},pageSize:{type:Number,default:50}},setup(r){const w={background:"#f6f8fa"};return(d,v)=>{const t=b("el-table-column"),h=b("el-table");return c(),C(h,{data:r.tableList,style:{width:"100%"},"header-cell-style":w},{default:g(()=>[i(t,{label:"\u6392\u540D",width:"120",align:"center"},{default:g(o=>[V(p(r.page*r.pageSize+o.$index+1),1)]),_:1}),r.mode=="student"?(c(),C(t,{key:0,prop:"name",label:"\u5B66\u751F\u59D3\u540D",width:"200"})):k("",!0),r.mode=="student"?(c(),C(t,{key:1,prop:"wx_name",label:"\u5BB6\u957F\u59D3\u540D",width:"200"})):k("",!0),i(t,{label:"\u6240\u5728\u73ED\u7EA7",width:"200"},{default:g(({row:o})=>[V(p(q(O)(o.year))+p(o.class)+"\u73ED ",1)]),_:1}),i(t,{prop:"teacher_name",label:"\u73ED\u4E3B\u4EFB\u59D3\u540D"}),i(t,{prop:"sum_amount",label:"\u65B0\u589E\u5B66\u5206",fixed:"right",align:"center",width:"300"},{default:g(({row:o})=>[n("span",Q,p(o.sum_amount),1)]),_:1})]),_:1},8,["data"])}}},Z=B(X,[["__scopeId","data-v-d90338f3"]]);const N=r=>(E("data-v-b75473cd"),r=r(),G(),r),ee={class:"study-report-container"},ae={class:"sort-wrap"},te=N(()=>n("div",{class:"title-time"},[n("span",{class:"study-tit"},"\u5B66\u5206\u6392\u884C\u699C")],-1)),oe=N(()=>n("span",{class:"o-char"},"\u5206\u7C7B\uFF1A",-1)),se=["onClick"],le={key:0,class:"date-picker-wrap"},ne={key:1,class:"date-picker-wrap"},re={class:"data-wrap"},de={class:"flex-start",style:{margin:"18px 0 0 0"}},ce={class:"flex"},ue={class:"record-char"},ie={__name:"creditRanking",setup(r){const w=[{sortKey:1,sortItem:[{id:"",name:"\u7EFC\u5408"},{id:"daily",name:"\u6BCF\u65E5\u4E00\u5B66"},{id:"weekly",name:"\u6BCF\u5468\u4E00\u505A"},{id:"monthy",name:"\u6BCF\u6708\u4E00\u8BFE"}]},{sortKey:2,sortItem:[{id:2,name:"\u6708\u699C"},{id:1,name:"\u5468\u699C"}]},{sortKey:3,sortItem:[{id:"student",name:"\u5BB6\u957F\u6392\u540D"},{id:"class",name:"\u73ED\u7EA7\u6392\u540D"}]}],d=e(["",2,"student"]),v=e(""),t=e(""),h=e(""),o=e(""),y=e("");e(""),e([]);const K=(a,s)=>{d.value[a-1]=s,s=="student"?_.value=50:s=="class"&&(_.value=0),f()},M=e(""),D=e(""),A=a=>{o.value=l(a).add(1,"day").format("YYYY-MM-DD"),y.value=l(a).add(7,"day").format("YYYY-MM-DD"),f()},F=a=>{v.value=l(a).format("YYYY-MM-01"),a?h.value=l(a).format("M"):h.value="",t.value=l(v.value).add(1,"month").format("YYYY-MM-DD"),f()},S=e(0),_=e(50),x=e(1),T=a=>{x.value=a,f()},R=e([]),f=async()=>{const a={coin_id:1,school_id:J().schoolInfo.id,limit:_.value,page:x.value,mode:d.value[2],start_date:d.value[1]==2?v.value:o.value,end_date:d.value[1]==2?t.value:y.value,study_type:d.value[0]},s=await H(a);R.value=s.data,S.value=s.total};return P(()=>{h.value=l().month(),t.value=l().format("YYYY-MM-01"),v.value=l(t.value).subtract(1,"month").format("YYYY-MM-DD"),y.value=l().isoWeekday(0).format("YYYY-MM-DD"),o.value=l(y.value).subtract(6,"day").format("YYYY-MM-DD"),M.value=o.value,D.value=l().subtract(1,"month").format("YYYY-MM"),f()}),(a,s)=>{const I=b("el-date-picker"),$=b("el-pagination");return c(),m("div",ee,[n("div",null,[n("div",ae,[te,(c(),m(z,null,L(w,u=>n("div",{class:"sort-sec",key:u.sortKey},[oe,(c(!0),m(z,null,L(u.sortItem,Y=>(c(),m("div",{class:j(["lab-item",d.value[u.sortKey-1]==Y.id?"active":""]),onClick:_e=>K(u.sortKey,Y.id),key:Y.id},p(Y.name),11,se))),128))])),64)),d.value[1]==1?(c(),m("div",le,[i(I,{modelValue:M.value,"onUpdate:modelValue":s[0]||(s[0]=u=>M.value=u),onChange:A,type:"week",format:"YYYY \u7B2C ww \u5468",placeholder:"\u9009\u62E9\u5468"},null,8,["modelValue"])])):k("",!0),d.value[1]==2?(c(),m("div",ne,[i(I,{modelValue:D.value,"onUpdate:modelValue":s[1]||(s[1]=u=>D.value=u),type:"month",placeholder:"\u9009\u62E9\u6708",onChange:F},null,8,["modelValue"])])):k("",!0)]),n("div",re,[i(Z,{tableList:R.value,mode:d.value[2],page:x.value-1,pageSize:_.value},null,8,["tableList","mode","page","pageSize"])]),n("div",de,[n("div",ce,[n("span",ue,"\u5171"+p(S.value)+"\u6761\u8BB0\u5F55",1),U(i($,{background:"","page-size":_.value,"pager-count":5,layout:"prev, pager, next",total:S.value,onCurrentChange:T},null,8,["page-size","total"]),[[W,_.value]])])])])])}}},Ye=B(ie,[["__scopeId","data-v-b75473cd"]]);export{Ye as default};
