import{_ as F,u as J,b as p,v as T,o as r,c as u,h as e,t as a,x as L,y as N,r as R,C as m,D as h,n as O,Q as U,a as x,w as j,B as V,Z as X,$ as ee,F as A,f as E,i as te,d as ae,k as se,j as B}from"./index.c3622493.js";import{a as oe,b as q}from"./datacenter.8d6e3832.js";import{u as S}from"./school.4378904f.js";import{_ as G,a as K,b as z,c as W}from"./six_border.bc95b85f.js";import{_ as Q,a as le,b as ce,c as ne}from"./medal3.fce23df7.js";import{u as de}from"./teacher.ab98cb09.js";import{s as ie,z as re}from"./study.81bfc18f.js";import{h as w}from"./moment.9709ab41.js";import{g as ue}from"./ak.02252990.js";const Z=t=>(L("data-v-4ce2ce80"),t=t(),N(),t),_e={class:"all-complete-box flex"},me={class:"left-box"},he={class:"num"},ve=Z(()=>e("span",{class:"per-char"},"%",-1)),pe=Z(()=>e("span",{class:"per-char"},"\u5168\u6821\u7D2F\u8BA1\u5B8C\u6210\u6CE8\u518C\u7387",-1)),ye={__name:"PerAllComplete",setup(t){const c=J(),l=()=>{c.push({path:"/CompletionRate"})},d=p(0),s=async()=>{const o={school_id:S().schoolInfo.id},i=await oe(o);if(i){const Y=i.parent_count||0,n=i.student_should_count||0;n?d.value=Math.ceil(Y/n*100):d.value=100}};return T(()=>{s()}),(o,i)=>(r(),u("div",_e,[e("div",me,[e("span",he,a(d.value),1),ve,pe]),e("div",{class:"look-char",onClick:l},"\u67E5\u770B\u8BE6\u60C5")]))}},ge=F(ye,[["__scopeId","data-v-4ce2ce80"]]);const b=t=>(L("data-v-03bc0a3e"),t=t(),N(),t),fe={class:"grade-class-rank-container"},Ie={class:"rank-left"},ke={class:"rank-img",src:G,alt:""},$e={class:"rank-img",src:K,alt:""},we={class:"rank-img",src:z,alt:""},xe={class:"rank-cic"},De=b(()=>e("img",{class:"six-img",src:W,alt:""},null,-1)),Ce={class:"rank-num"},Ye={class:"right-data-wrap"},be={class:"progress-complete"},Me={class:"progress-box"},Se={class:"flex"},Ae={class:"gc-char"},Ee=b(()=>e("span",{class:"cp-char"},"\u672C\u6708\u5B66\u4E60\u5B8C\u6210\u7387",-1)),Be={class:"progress"},Fe={class:"fire-icon",src:Q,alt:"fire"},Re={class:"per-char"},Ve={class:"data-box flex"},Le={class:"data-detail-wrap"},Ne=b(()=>e("span",{class:"data-char"},"\u6570\u636E\u6982\u89C8",-1)),Ue={class:"data-item"},Oe={class:"num-char"},Pe=b(()=>e("div",{class:"char"},"\u5B66\u4E60\u4EBA\u6B21",-1)),Te={class:"data-item"},je={class:"num-char"},qe=b(()=>e("div",{class:"char"},"\u5E74\u7EA7\u4EBA\u6570",-1)),Ge={class:"data-item"},Ke={class:"num-char"},ze={class:"char"},We={class:"data-item"},Qe={class:"num-char"},Ze=b(()=>e("div",{class:"char"},"\u6BCF\u65E5\u4E00\u5B66",-1)),He={class:"data-item"},Je={class:"num-char"},Xe=b(()=>e("div",{class:"char"},"\u6BCF\u5468\u4E00\u505A",-1)),et={class:"data-item"},tt={class:"num-char"},at=b(()=>e("div",{class:"char nomar"},"\u6BCF\u6708\u4E00\u8BFE",-1)),st={class:"detail-char"},ot={class:"class-item-wrap"},lt={class:"flex"},ct={class:"class-sec"},nt={class:"class-char"},dt={class:"per-char"},it={class:"teacher-sec flex"},rt={class:"teacher-char"},ut=b(()=>e("span",{class:"teacher-char"},"\u5B66\u4E60\u5B8C\u6210\u7387",-1)),_t={class:"progress-wrap"},mt={class:"count-sec flex"},ht={class:"count-tag"},vt={class:"count-tag"},pt={class:"medal-img",src:le,alt:""},yt={class:"medal-img",src:ce,alt:""},gt={class:"medal-img",src:ne,alt:""},ft={class:"no-char"},It=te("NO: "),kt={class:"no-num"},$t={__name:"GradeClassRank",props:{completeItem:{type:Object},completeIndex:{type:Number,default:0},startDate:{type:String,default:""},endDate:{type:String,default:""},studyType:{type:String,default:""},rankMode:{type:Number,default:1}},setup(t){const c=t,l=p([]),d=async v=>{const y={school_id:S().schoolInfo.id,limit:30,page:1,rank_mode:"class",start_date:c.startDate,end_date:c.endDate,study_type:c.studyType,year:v},f=await q(y);l.value=f},s=p(!1),o=v=>{s.value=!s.value,s.value&&d(v)},i=(v,y)=>{const f=de().teacherList;for(const _ of f)if(_.year==v&&_.class_id==y)return _.name},Y=v=>{const y=S().gradeList,_=new Date().getFullYear()-Number(v)+1;let k={};for(const g of y)g.id===_&&(k=g);return k},n=v=>Math.ceil(Number(v)*100),I=(v,y)=>({isUp:v-y>0,isShow:v-y!=0,numAbs:Math.abs(v-y)});return(v,y)=>{const f=R("el-icon");return r(),u("div",fe,[e("div",Ie,[m(e("img",ke,null,512),[[h,t.completeIndex==0]]),m(e("img",$e,null,512),[[h,t.completeIndex==1]]),m(e("img",we,null,512),[[h,t.completeIndex==2]]),m(e("div",xe,[De,e("span",Ce,a(t.completeIndex+1),1)],512),[[h,t.completeIndex>2]]),m(e("div",{class:O(["ranked-tag",I(t.completeItem.rank_index_last,t.completeItem.rank_index).isUp?"":"green"])}," \u8F83\u4E0A"+a(t.rankMode==1?"\u5468":"\u6708")+a(I(t.completeItem.rank_index_last,t.completeItem.rank_index).isUp?"\u4E0A\u5347":"\u4E0B\u964D")+a(I(t.completeItem.rank_index_last,t.completeItem.rank_index).numAbs)+"\u540D ",3),[[h,I(t.completeItem.rank_index_last,t.completeItem.rank_index).isShow]])]),e("div",Ye,[e("div",be,[e("div",Me,[e("div",Se,[e("span",Ae,a(Y(t.completeItem.year).name),1),Ee]),e("div",Be,[e("div",{class:"progress-active",style:U(`width: ${n(t.completeItem.parent_student_ratio)>=100?100:n(t.completeItem.parent_student_ratio)}%`)},null,4),m(e("img",Fe,null,512),[[h,n(t.completeItem.parent_student_ratio)>=100]])])]),e("span",Re,a(n(t.completeItem.parent_student_ratio))+"%",1)]),e("div",Ve,[e("div",Le,[Ne,e("div",Ue,[e("div",Oe,a(t.completeItem.complete_parent),1),Pe]),e("div",Te,[e("div",je,a(t.completeItem.student_num),1),qe]),e("div",Ge,[e("div",Ke,a(t.completeItem.rank_index_last),1),e("div",ze,a(t.rankMode==1?"\u4E0A\u5468\u6392\u540D":"\u4E0A\u6708\u6392\u540D"),1)]),e("div",We,[e("div",Qe,a(n(t.completeItem.daily_parent_ratio))+"% ",1),Ze]),e("div",He,[e("div",Je,a(n(t.completeItem.weekly_parent_ratio))+"% ",1),Xe]),e("div",et,[e("div",tt,a(n(t.completeItem.monthy_parent_ratio))+"% ",1),at])]),e("div",{class:"sw-btn",onClick:y[0]||(y[0]=_=>o(t.completeItem.year))},[e("span",st,a(s.value?"\u6536\u8D77":"\u67E5\u770B")+"\u5E74\u7EA7\u5404\u73ED\u8BE6\u60C5",1),x(f,null,{default:j(()=>[m(x(V(X),{class:"arr-icon"},null,512),[[h,s.value]]),m(x(V(ee),{class:"arr-icon"},null,512),[[h,!s.value]])]),_:1})])]),m(e("div",ot,[(r(!0),u(A,null,E(l.value,(_,k)=>(r(),u("div",{class:"class-item",key:k},[e("div",lt,[e("div",ct,[e("span",nt,a(_.class_id)+"\u73ED",1)]),e("span",dt,a(n(_.parent_student_ratio))+"%",1)]),e("div",it,[e("span",rt,"\u73ED\u4E3B\u4EFB\uFF1A"+a(i(_.year,_.class_id)),1),ut]),e("div",_t,[e("div",{class:"progress-item",style:U(`width: ${n(_.parent_student_ratio)}%`)},null,4)]),e("div",mt,[e("div",null,[e("div",ht,"\u5B66\u4E60\u4EBA\u6B21\uFF1A"+a(_.complete_parent),1),e("div",vt,"\u73ED\u7EA7\u4EBA\u6570\uFF1A"+a(_.student_num),1)]),m(e("img",pt,null,512),[[h,k==0]]),m(e("img",yt,null,512),[[h,k==1]]),m(e("img",gt,null,512),[[h,k==2]]),m(e("span",ft,[It,e("span",kt,a(k+1),1)],512),[[h,k>2]])])]))),128))],512),[[h,s.value]])])])}}},wt=F($t,[["__scopeId","data-v-03bc0a3e"]]);function xt(){const t=p({}),c=p({}),l=async()=>{const o={school_id:S().getSchoolInfo.id,type:"term"},i=await ie(o);t.value=i},d=async()=>{const o={school_id:S().getSchoolInfo.id},i=await re(o);c.value=i};return l(),d(),{studyDashboardCompleteCountRef:t,studyDashboardCompleteDailyRef:c}}const Dt=ae({name:"CompletedAmountOverview",props:{dataSource:{type:Object,default:()=>({})},dataSourceAvg:{type:Object,default:()=>({})}},setup(t){const c=p({total:{title:"\u603B\u8BBF\u95EE\u91CF",icon:"overview_total_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u8BBF\u95EE\u91CF",num:0}},daily:{title:"\u6BCF\u65E5\u4E00\u5B66\u603B\u5B66\u4E60\u91CF",icon:"overview_daily_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u5B66\u4E60\u91CF",num:0}},weekly:{title:"\u6BCF\u5468\u4E00\u505A\u603B\u5B8C\u6210\u91CF",icon:"overview_weekly_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u5B8C\u6210\u91CF",num:0}},monthy:{title:"\u6BCF\u6708\u4E00\u8BFE\u603B\u5B66\u4E60\u91CF",icon:"overview_monthly_icon_img",num:0,tag:{title:"\u4ECA\u65E5\u65B0\u589E",num:0},averageDaily:{title:"\u65E5\u5747\u5B66\u4E60\u91CF",num:0}}}),l=p(t.dataSource),d=p(t.dataSourceAvg);return se(()=>{l.value=t.dataSource,d.value=t.dataSourceAvg,Object.keys(l.value).length>0&&(c.value.total.num=l.value.total_all,c.value.total.tag.num=l.value.all_today,c.value.total.averageDaily.num=Math.ceil(d.value.all_num/d.value.day_num),c.value.daily.num=l.value.total_daily,c.value.daily.tag.num=l.value.daily,c.value.daily.averageDaily.num=Math.ceil(d.value.daily/d.value.day_num),c.value.weekly.num=l.value.total_weekly,c.value.weekly.tag.num=l.value.weekly_today,c.value.weekly.averageDaily.num=Math.ceil(d.value.weekly/d.value.day_num),c.value.monthy.num=l.value.total_monthy,c.value.monthy.tag.num=l.value.monthy_today,c.value.monthy.averageDaily.num=Math.ceil(d.value.monthy/d.value.day_num))}),{overviewListRef:c,getImageUrl:ue}}});const Ct={class:"completed-amount-overview-container"},Yt={class:"completed-amount-overview-ul flex"},bt={class:"flex"},Mt={class:"title-style"},St={class:"flex-start align-end"},At={class:"total-num-style"},Et={class:"tag-box flex-center"},Bt={class:"flex-start"},Ft={class:"average-daily-title-style"},Rt={class:"average-daily-num-style"};function Vt(t,c,l,d,s,o){const i=R("el-image"),Y=R("el-card");return r(),u("div",Ct,[e("ul",Yt,[(r(!0),u(A,null,E(t.overviewListRef,(n,I)=>(r(),u("li",{key:I,class:"completed-amount-overview-li"},[x(Y,{class:"el-card-style","body-style":{padding:"0px"}},{default:j(()=>[e("header",bt,[e("p",Mt,a(n.title),1),x(i,{class:"header-icon-style",src:t.getImageUrl(n.icon+".png")},null,8,["src"])]),e("article",St,[e("p",At,a(n.num),1),e("div",Et,[e("p",null,a(n.tag.title),1),e("p",null,a(n.tag.num),1)])]),e("footer",Bt,[e("p",Ft,a(n.averageDaily.title),1),e("p",Rt,a(n.averageDaily.num),1)])]),_:2},1024)]))),128))])])}const Lt=F(Dt,[["render",Vt],["__scopeId","data-v-2b669cee"]]);const M=t=>(L("data-v-82846c88"),t=t(),N(),t),Nt={class:"grade-class-rank-container"},Ut={class:"rank-left"},Ot={class:"rank-img",src:G,alt:""},Pt={class:"rank-img",src:K,alt:""},Tt={class:"rank-img",src:z,alt:""},jt={class:"rank-cic"},qt=M(()=>e("img",{class:"six-img",src:W,alt:""},null,-1)),Gt={class:"rank-num"},Kt={class:"right-data-wrap"},zt={class:"progress-complete"},Wt={class:"progress-box"},Qt={class:"flex"},Zt={class:"gc-char"},Ht=M(()=>e("span",{class:"cp-char"},"\u672C\u6708\u5B66\u4E60\u5B8C\u6210\u7387",-1)),Jt={class:"progress"},Xt={class:"fire-icon",src:Q,alt:"fire"},ea={class:"per-char"},ta={class:"data-box flex"},aa={class:"data-detail-wrap"},sa=M(()=>e("span",{class:"data-char"},"\u6570\u636E\u6982\u89C8",-1)),oa={class:"data-item"},la={class:"num-char"},ca=M(()=>e("div",{class:"char"},"\u5B66\u4E60\u4EBA\u6B21",-1)),na={class:"data-item"},da={class:"num-char"},ia=M(()=>e("div",{class:"char"},"\u73ED\u7EA7\u4EBA\u6570",-1)),ra={class:"data-item"},ua={class:"num-char"},_a={class:"char"},ma={class:"data-item"},ha={class:"num-char"},va=M(()=>e("div",{class:"char"},"\u6BCF\u65E5\u4E00\u5B66",-1)),pa={class:"data-item"},ya={class:"num-char"},ga=M(()=>e("div",{class:"char"},"\u6BCF\u5468\u4E00\u505A",-1)),fa={class:"data-item"},Ia={class:"num-char"},ka=M(()=>e("div",{class:"char nomar"},"\u6BCF\u6708\u4E00\u8BFE",-1)),$a={__name:"ClassRankForComplete",props:{completeItem:{type:Object},completeIndex:{type:Number,default:0},rankMode:{type:Number,default:1}},setup(t){const c=s=>{const o=S().gradeList,Y=new Date().getFullYear()-Number(s)+1;let n={};for(const I of o)I.id===Y&&(n=I);return n},l=s=>Math.ceil(Number(s)*100),d=(s,o)=>({isUp:s-o>0,isShow:s-o!=0,numAbs:Math.abs(s-o)});return(s,o)=>(r(),u("div",Nt,[e("div",Ut,[m(e("img",Ot,null,512),[[h,t.completeIndex==0]]),m(e("img",Pt,null,512),[[h,t.completeIndex==1]]),m(e("img",Tt,null,512),[[h,t.completeIndex==2]]),m(e("div",jt,[qt,e("span",Gt,a(t.completeIndex+1),1)],512),[[h,t.completeIndex>2]]),m(e("div",{class:O(["ranked-tag",d(t.completeItem.rank_index_last,t.completeItem.rank_index).isUp?"":"green"])}," \u8F83\u4E0A"+a(t.rankMode==1?"\u5468":"\u6708")+a(d(t.completeItem.rank_index_last,t.completeItem.rank_index).isUp?"\u4E0A\u5347":"\u4E0B\u964D")+a(d(t.completeItem.rank_index_last,t.completeItem.rank_index).numAbs)+"\u540D ",3),[[h,d(t.completeItem.rank_index_last,t.completeItem.rank_index).isShow]])]),e("div",Kt,[e("div",zt,[e("div",Wt,[e("div",Qt,[e("span",Zt,a(c(t.completeItem.year).name)+"("+a(t.completeItem.class_id)+")\u73ED",1),Ht]),e("div",Jt,[e("div",{class:"progress-active",style:U(`width: ${l(t.completeItem.parent_student_ratio)>=100?100:l(t.completeItem.parent_student_ratio)}%`)},null,4),m(e("img",Xt,null,512),[[h,l(t.completeItem.parent_student_ratio)>=100]])])]),e("span",ea,a(l(t.completeItem.parent_student_ratio))+"%",1)]),e("div",ta,[e("div",aa,[sa,e("div",oa,[e("div",la,a(t.completeItem.complete_parent),1),ca]),e("div",na,[e("div",da,a(t.completeItem.student_num),1),ia]),e("div",ra,[e("div",ua,a(t.completeItem.rank_index_last),1),e("div",_a,a(t.rankMode==1?"\u4E0A\u5468\u6392\u540D":"\u4E0A\u6708\u6392\u540D"),1)]),e("div",ma,[e("div",ha,a(l(t.completeItem.daily_parent_ratio))+"% ",1),va]),e("div",pa,[e("div",ya,a(l(t.completeItem.weekly_parent_ratio))+"% ",1),ga]),e("div",fa,[e("div",Ia,a(l(t.completeItem.monthy_parent_ratio))+"% ",1),ka])])])])]))}},wa=F($a,[["__scopeId","data-v-82846c88"]]);const H=t=>(L("data-v-fd60f209"),t=t(),N(),t),xa={class:"study-report-container"},Da={class:"all-wrap"},Ca={class:"sort-wrap"},Ya={class:"title-time"},ba=H(()=>e("span",{class:"study-tit"},"\u5B66\u4E60\u5B8C\u6210\u699C",-1)),Ma={class:"time-char"},Sa=H(()=>e("span",{class:"o-char"},"\u5206\u7C7B\uFF1A",-1)),Aa=["onClick"],Ea={key:0,class:"date-picker-wrap"},Ba={key:1,class:"date-picker-wrap"},Fa={key:0,class:"data-wrap"},Ra={key:0},Va={key:1},La={__name:"studyReportForm",setup(t){const{studyDashboardCompleteCountRef:c,studyDashboardCompleteDailyRef:l}=xt(),d=[{sortKey:1,sortItem:[{id:"grade",name:"\u5E74\u6BB5\u6392\u540D"},{id:"class",name:"\u73ED\u7EA7\u6392\u540D"}]},{sortKey:2,sortItem:[{id:"daily",name:"\u6BCF\u65E5\u4E00\u5B66"},{id:"weekly",name:"\u6BCF\u5468\u4E00\u505A"},{id:"monthy",name:"\u6BCF\u6708\u4E00\u8BFE"}]},{sortKey:3,sortItem:[{id:2,name:"\u6708\u699C"},{id:1,name:"\u5468\u699C"}]}],s=p(["grade","daily",2]),o=p(""),i=p(""),Y=(g,D)=>{s.value[g-1]=D,g==3&&D==1&&(o.value=w().isoWeek(1).format("YYYY-MM-DD"),i.value=w(o.value).add(7,"day").format("YYYY-MM-DD")),g==3&&D==2&&(o.value=w().format("YYYY-MM-01"),i.value=w(o.value).add(1,"month").format("YYYY-MM-DD")),_()},n=p(""),I=p(""),v=g=>{o.value=w(g).add(1,"day").format("YYYY-MM-DD"),i.value=w(g).add(7,"day").format("YYYY-MM-DD"),_(),console.log(o.value)},y=g=>{o.value=w(g).format("YYYY-MM-01"),i.value=w(o.value).add(1,"month").format("YYYY-MM-DD"),_()},f=p([]),_=async()=>{const g={school_id:S().schoolInfo.id,limit:30,page:1,rank_mode:s.value[0],start_date:o.value,end_date:i.value,study_type:s.value[1]},D=await q(g);f.value=D},k=p("");return T(()=>{k.value=w().format("YYYY\u5E74MM\u6708DD\u65E5"),o.value=w().format("YYYY-MM-01"),i.value=w(o.value).add(1,"month").format("YYYY-MM-DD"),_()}),(g,D)=>{const P=R("el-date-picker");return r(),u("div",xa,[e("div",null,[x(Lt,{dataSource:V(c),dataSourceAvg:V(l)},null,8,["dataSource","dataSourceAvg"]),e("div",Da,[x(ge)]),e("div",Ca,[e("div",Ya,[ba,e("span",Ma,"\u66F4\u65B0\u65F6\u95F4\uFF1A"+a(k.value),1)]),(r(),u(A,null,E(d,$=>e("div",{class:"sort-sec",key:$.sortKey},[Sa,(r(!0),u(A,null,E($.sortItem,C=>(r(),u("div",{class:O(["lab-item",s.value[$.sortKey-1]==C.id?"active":""]),onClick:Na=>Y($.sortKey,C.id),key:C.id},a(C.name),11,Aa))),128))])),64)),s.value[2]==1?(r(),u("div",Ea,[x(P,{modelValue:n.value,"onUpdate:modelValue":D[0]||(D[0]=$=>n.value=$),onChange:v,type:"week",format:"YYYY \u7B2C ww \u5468",placeholder:"\u9009\u62E9\u5468"},null,8,["modelValue"])])):B("",!0),s.value[2]==2?(r(),u("div",Ba,[x(P,{modelValue:I.value,"onUpdate:modelValue":D[1]||(D[1]=$=>I.value=$),type:"month",placeholder:"\u9009\u62E9\u6708",onChange:y},null,8,["modelValue"])])):B("",!0)]),f.value&&f.value.length?(r(),u("div",Fa,[s.value[0]=="grade"?(r(),u("div",Ra,[(r(!0),u(A,null,E(f.value,($,C)=>(r(),u("div",{class:"mar-wrap",key:C},[x(wt,{completeItem:$,completeIndex:C,startDate:o.value,endDate:i.value,studyType:s.value[1],rankMode:s.value[2]},null,8,["completeItem","completeIndex","startDate","endDate","studyType","rankMode"])]))),128))])):B("",!0),s.value[0]=="class"?(r(),u("div",Va,[(r(!0),u(A,null,E(f.value,($,C)=>(r(),u("div",{class:"mar-wrap",key:C},[x(wa,{completeItem:$,completeIndex:C,rankMode:s.value[2]},null,8,["completeItem","completeIndex","rankMode"])]))),128))])):B("",!0)])):B("",!0)])])}}},Wa=F(La,[["__scopeId","data-v-fd60f209"]]);export{Wa as default};
