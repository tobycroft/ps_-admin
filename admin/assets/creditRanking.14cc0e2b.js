import{h as o}from"./moment.9709ab41.js";import{c as $}from"./datacenter.57d8f7ab.js";import{u as q}from"./school.4bd03eba.js";import{b as z}from"./calcFunc.bffe5f1d.js";import{_ as L,r as Y,o as d,g as x,w as D,a as i,j as k,i as P,t as h,B as U,h as s,b as t,v as W,c as _,F as R,f as V,n as j,x as E,y as G}from"./index.816ebd75.js";import"./request.27994465.js";const H={class:"sum_amount"},J={__name:"TableForRank",props:{tableList:{type:Array,default:()=>[]},mode:{type:String,default:"student"}},setup(c){const g={background:"#f6f8fa"};return(l,m)=>{const a=Y("el-table-column"),p=Y("el-table");return d(),x(p,{data:c.tableList,style:{width:"100%"},"header-cell-style":g},{default:D(()=>[i(a,{label:"\u6392\u540D",width:"100",type:"index"}),c.mode=="student"?(d(),x(a,{key:0,prop:"name",label:"\u5B66\u751F\u59D3\u540D",width:"200"})):k("",!0),c.mode=="student"?(d(),x(a,{key:1,prop:"wx_name",label:"\u5BB6\u957F\u59D3\u540D",width:"200"})):k("",!0),i(a,{label:"\u6240\u5728\u73ED\u7EA7",width:"200"},{default:D(({row:n})=>[P(h(U(z)(n.year))+h(n.class)+"\u73ED ",1)]),_:1}),i(a,{prop:"teacher_name",label:"\u73ED\u4E3B\u4EFB\u59D3\u540D",width:"480"}),i(a,{prop:"sum_amount",label:"\u65B0\u589E\u5B66\u5206",fixed:"right",align:"center",width:"300"},{default:D(({row:n})=>[s("span",H,h(n.sum_amount),1)]),_:1})]),_:1},8,["data"])}}},O=L(J,[["__scopeId","data-v-5910c3f6"]]);const B=c=>(E("data-v-f4d69c34"),c=c(),G(),c),Q={class:"study-report-container"},X={class:"sort-wrap"},Z=B(()=>s("div",{class:"title-time"},[s("span",{class:"study-tit"},"\u5B66\u5206\u6392\u884C\u699C")],-1)),ee=B(()=>s("span",{class:"o-char"},"\u5206\u7C7B\uFF1A",-1)),te=["onClick"],ae={key:0,class:"date-picker-wrap"},oe={key:1,class:"date-picker-wrap"},se={class:"data-wrap"},le={class:"flex-start",style:{margin:"18px 0 0 0"}},ne={class:"flex"},re={class:"record-char"},de={__name:"creditRanking",setup(c){const g=[{sortKey:1,sortItem:[{id:"",name:"\u7EFC\u5408"},{id:"daily",name:"\u6BCF\u65E5\u4E00\u5B66"},{id:"weekly",name:"\u6BCF\u5468\u4E00\u505A"},{id:"monthy",name:"\u6BCF\u6708\u4E00\u8BFE"}]},{sortKey:2,sortItem:[{id:2,name:"\u6708\u699C"},{id:1,name:"\u5468\u699C"}]},{sortKey:3,sortItem:[{id:"student",name:"\u5BB6\u957F\u6392\u540D"},{id:"class",name:"\u73ED\u7EA7\u6392\u540D"}]}],l=t(["",2,"student"]),m=t(""),a=t(""),p=t(""),n=t(""),f=t("");t(""),t([]);const K=(e,r)=>{l.value[e-1]=r,v()},b=t(""),w=t(""),A=e=>{n.value=o(e).add(1,"day").format("YYYY-MM-DD"),f.value=o(e).add(7,"day").format("YYYY-MM-DD"),v()},F=e=>{m.value=o(e).format("YYYY-MM-01"),e?p.value=o(e).format("M"):p.value="",a.value=o(m.value).add(1,"month").format("YYYY-MM-DD"),v()},M=t(0),C=t(1),N=e=>{C.value=e,v()},I=t([]),v=async()=>{const e={coin_id:1,school_id:q().schoolInfo.id,limit:10,page:C.value,mode:l.value[2],start_date:l.value[1]==2?m.value:n.value,end_date:l.value[1]==2?a.value:f.value,study_type:l.value[0]},r=await $(e);I.value=r.data,M.value=r.total};return W(()=>{p.value=o().month(),a.value=o().format("YYYY-MM-01"),m.value=o(a.value).subtract(1,"month").format("YYYY-MM-DD"),f.value=o().isoWeekday(0).format("YYYY-MM-DD"),n.value=o(f.value).subtract(6,"day").format("YYYY-MM-DD"),b.value=n.value,w.value=o().subtract(1,"month").format("YYYY-MM"),v()}),(e,r)=>{const S=Y("el-date-picker"),T=Y("el-pagination");return d(),_("div",Q,[s("div",null,[s("div",X,[Z,(d(),_(R,null,V(g,u=>s("div",{class:"sort-sec",key:u.sortKey},[ee,(d(!0),_(R,null,V(u.sortItem,y=>(d(),_("div",{class:j(["lab-item",l.value[u.sortKey-1]==y.id?"active":""]),onClick:ce=>K(u.sortKey,y.id),key:y.id},h(y.name),11,te))),128))])),64)),l.value[1]==1?(d(),_("div",ae,[i(S,{modelValue:b.value,"onUpdate:modelValue":r[0]||(r[0]=u=>b.value=u),onChange:A,type:"week",format:"YYYY \u7B2C ww \u5468",placeholder:"\u9009\u62E9\u5468"},null,8,["modelValue"])])):k("",!0),l.value[1]==2?(d(),_("div",oe,[i(S,{modelValue:w.value,"onUpdate:modelValue":r[1]||(r[1]=u=>w.value=u),type:"month",placeholder:"\u9009\u62E9\u6708",onChange:F},null,8,["modelValue"])])):k("",!0)]),s("div",se,[i(O,{tableList:I.value,mode:l.value[2]},null,8,["tableList","mode"])]),s("div",le,[s("div",ne,[s("span",re,"\u5171"+h(M.value)+"\u6761\u8BB0\u5F55",1),i(T,{background:"","page-size":10,"pager-count":5,layout:"prev, pager, next",total:M.value,onCurrentChange:N},null,8,["total"])])])])])}}},he=L(de,[["__scopeId","data-v-f4d69c34"]]);export{he as default};
