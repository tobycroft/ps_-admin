import{_ as z,b as a,I as G,v as K,u as Q,r as n,o as y,c as R,a as s,w as d,j as W,h as o,B as b,J as X,F as Z,f as $,g as ee,L as ae,t as te,i as q,E as se,x as oe,y as le}from"./index.5c9dba08.js";import{S as A}from"./StudyTaskTable.0cee9f16.js";import{e as ne,g as de}from"./study.3a990818.js";import{u as g}from"./school.39248828.js";import{h as ce}from"./moment.9709ab41.js";const x=u=>(oe("data-v-35ea228a"),u=u(),le(),u),re=x(()=>o("div",{class:"card-header"},[o("span",{class:"head-title"},"\u6DFB\u52A0\u5185\u5BB9")],-1)),ue={class:"search-wrap"},ie={class:"search-left-wrap"},_e={class:"flex search-item-sec"},pe=x(()=>o("span",{class:"search-label"},"\u4EFB\u52A1\u540D\u79F0",-1)),me={class:"flex search-item-sec"},ve=x(()=>o("span",{class:"search-label"},"\u4EFB\u52A1\u5E74\u7EA7",-1)),fe=q("\u67E5\u8BE2"),he=q("\u65B0\u5EFA\u4EFB\u52A1"),ye={class:"flex-end",style:{"margin-top":"24px"}},be={class:"flex"},ge={class:"record-char"},xe={__name:"addContent",setup(u){const D=g().gradeList,k=a("know"),m=a(0),w=a(1),v=a(null),L=a(""),N=a([]),B=a(""),T=a(""),r=a("daily"),i=a(""),I=a(null),f=G();r.value=f.query.type,I.value=Number(f.query.grade),i.value=f.query.date;const h=a([]),_=a(!1),p=async()=>{let e=0;_.value&&(e=g().schoolInfo.id);const t={type:r.value,is_custom:_.value,limit:10,page:w.value,area_id:0,school_id:e,grade:v.value,title:L.value,start_date:B.value,end_date:T.value,tag_ids:N.value},c=await ne(t);h.value=c.data,m.value=c.total};K(()=>{p()});const E=e=>{w.value=e,p()},M=(e,t)=>{console.log(e,t),e.props.name=="know"&&(_.value=!1),e.props.name=="custom"&&(_.value=!0),p()},Y=async e=>{const t=[I.value],c={school_id:g().schoolInfo.id,study_type:r.value,study_id:e,grade:JSON.stringify(t),push_date:i.value,show_date:i.value,end_date:ce(i.value).add(7,"days").format("YYYY-MM-DD HH:mm:ss"),can_push:!0,can_show:!0};await de(c)},O=Q(),S=async e=>{console.log(e),await Y(e),se.success("\u6DFB\u52A0\u6210\u529F"),O.back()};return(e,t)=>{const c=n("el-input"),P=n("el-option"),U=n("el-select"),V=n("el-button"),F=n("router-link"),C=n("el-tab-pane"),H=n("el-tabs"),J=n("el-pagination"),j=n("el-card");return y(),R("div",null,[s(j,{class:"box-card"},{header:d(()=>[re]),default:d(()=>[o("div",ue,[o("div",ie,[o("div",_e,[pe,s(c,{style:{width:"px(296)","margin-right":"24px"},modelValue:e.contentRef,"onUpdate:modelValue":t[0]||(t[0]=l=>e.contentRef=l),class:"flex1",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u4EFB\u52A1\u540D\u79F0","suffix-icon":b(X)},null,8,["modelValue","suffix-icon"])]),o("div",me,[ve,s(U,{style:{"margin-right":"24px"},modelValue:v.value,"onUpdate:modelValue":t[1]||(t[1]=l=>v.value=l),class:"flex1",clearable:"",placeholder:"\u8BF7\u9009\u62E9\u4EFB\u52A1\u5E74\u7EA7"},{default:d(()=>[(y(!0),R(Z,null,$(b(D),l=>(y(),ee(P,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),s(V,{class:"add-btn search",type:"primary",onClick:p},{default:d(()=>[fe]),_:1})]),s(F,{to:"/createTask?type=weekly"},{default:d(()=>[s(V,{class:"add-btn",type:"primary",icon:b(ae)},{default:d(()=>[he]),_:1},8,["icon"])]),_:1})]),s(H,{modelValue:k.value,"onUpdate:modelValue":t[2]||(t[2]=l=>k.value=l),class:"demo-tabs",onTabClick:M},{default:d(()=>[s(C,{label:"\u77E5\u8BC6\u5E93",name:"know"},{default:d(()=>[s(A,{hasOperationAdd:"",onAddIt:S,"table-data":h.value,type:r.value},null,8,["table-data","type"])]),_:1}),s(C,{label:"\u81EA\u5B9A\u4E49",name:"custom"},{default:d(()=>[s(A,{hasOperationAdd:"",onAddIt:S,"table-data":h.value,type:r.value},null,8,["table-data","type"])]),_:1})]),_:1},8,["modelValue"]),o("div",ye,[o("div",be,[o("span",ge,"\u5171"+te(m.value)+"\u6761\u8BB0\u5F55",1),s(J,{"page-size":10,"pager-count":5,layout:"prev, pager, next",total:m.value,onCurrentChange:E},null,8,["total"])])])]),_:1}),W(` <div class="bottom-fixed-sec">\r
      <span\r
        >\u5DF2\u9009: <span class="char-blue">\u5E7C\u5347\u5C0F\uFF0C\u5982\u4F55\u5E2E\u52A9\u5B69\u5B50\u987A\u5229\u9002\u5E94\uFF1F</span>\r
      </span>\r
      <div class="btn">\u53D6\u6D88</div>\r
      <div class="btn blue">\u786E\u5B9E</div>\r
    </div> `)])}}},Ce=z(xe,[["__scopeId","data-v-35ea228a"],["__file","E:/work/parents_school_institution_pc/src/views/studyAdmin/addContent/addContent.vue"]]);export{Ce as default};
